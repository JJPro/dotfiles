"use strict";var hh=Object.create;var zt=Object.defineProperty;var fh=Object.getOwnPropertyDescriptor;var dh=Object.getOwnPropertyNames;var ph=Object.getPrototypeOf,mh=Object.prototype.hasOwnProperty;var g=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),gh=(t,e)=>{for(var r in e)zt(t,r,{get:e[r],enumerable:!0})},ni=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of dh(e))!mh.call(t,s)&&s!==r&&zt(t,s,{get:()=>e[s],enumerable:!(n=fh(e,s))||n.enumerable});return t};var N=(t,e,r)=>(r=t!=null?hh(ph(t)):{},ni(e||!t||!t.__esModule?zt(r,"default",{value:t,enumerable:!0}):r,t)),yh=t=>ni(zt({},"__esModule",{value:!0}),t);var ai=g((Qr,Xr)=>{"use strict";Object.defineProperty(Qr,"__esModule",{value:!0});function Ih(t){return t.encrypted}var Jr=(t,e)=>{let r;typeof e=="function"?r={connect:e}:r=e;let n=typeof r.connect=="function",s=typeof r.secureConnect=="function",i=typeof r.close=="function",o=()=>{n&&r.connect(),Ih(t)&&s&&(t.authorized?r.secureConnect():t.authorizationError||t.once("secureConnect",r.secureConnect)),i&&t.once("close",r.close)};t.writable&&!t.connecting?o():t.connecting?t.once("connect",o):t.destroyed&&i&&r.close(t._hadError)};Qr.default=Jr;Xr.exports=Jr;Xr.exports.default=Jr});var di=g((O_,fi)=>{"use strict";var{PassThrough:Mh}=require("stream");fi.exports=t=>{t={...t};let{array:e}=t,{encoding:r}=t,n=r==="buffer",s=!1;e?s=!(r||n):r=r||"utf8",n&&(r=null);let i=new Mh({objectMode:s});r&&i.setEncoding(r);let o=0,a=[];return i.on("data",c=>{a.push(c),s?o=a.length:o+=c.length}),i.getBufferedValue=()=>e?a:n?Buffer.concat(a,o):a.join(""),i.getBufferedLength=()=>o,i}});var Xt=g((I_,it)=>{"use strict";var{constants:Hh}=require("buffer"),Uh=require("stream"),{promisify:Dh}=require("util"),Fh=di(),$h=Dh(Uh.pipeline),Qt=class extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}};async function tn(t,e){if(!t)throw new Error("Expected a stream");e={maxBuffer:1/0,...e};let{maxBuffer:r}=e,n=Fh(e);return await new Promise((s,i)=>{let o=a=>{a&&n.getBufferedLength()<=Hh.MAX_LENGTH&&(a.bufferedData=n.getBufferedValue()),i(a)};(async()=>{try{await $h(t,n),s()}catch(a){o(a)}})(),n.on("data",()=>{n.getBufferedLength()>r&&o(new Qt)})}),n.getBufferedValue()}it.exports=tn;it.exports.buffer=(t,e)=>tn(t,{...e,encoding:"buffer"});it.exports.array=(t,e)=>tn(t,{...e,array:!0});it.exports.MaxBufferError=Qt});var mi=g((q_,pi)=>{"use strict";var zh=new Set([200,203,204,206,300,301,308,404,405,410,414,501]),Gh=new Set([200,203,204,300,301,302,303,307,308,404,405,410,414,501]),Vh=new Set([500,502,503,504]),Wh={date:!0,connection:!0,"keep-alive":!0,"proxy-authenticate":!0,"proxy-authorization":!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0},Yh={"content-length":!0,"content-encoding":!0,"transfer-encoding":!0,"content-range":!0};function ge(t){let e=parseInt(t,10);return isFinite(e)?e:0}function Kh(t){return t?Vh.has(t.status):!0}function rn(t){let e={};if(!t)return e;let r=t.trim().split(/,/);for(let n of r){let[s,i]=n.split(/=/,2);e[s.trim()]=i===void 0?!0:i.trim().replace(/^"|"$/g,"")}return e}function Jh(t){let e=[];for(let r in t){let n=t[r];e.push(n===!0?r:r+"="+n)}if(e.length)return e.join(", ")}pi.exports=class{constructor(e,r,{shared:n,cacheHeuristic:s,immutableMinTimeToLive:i,ignoreCargoCult:o,_fromObject:a}={}){if(a){this._fromObject(a);return}if(!r||!r.headers)throw Error("Response headers missing");this._assertRequestHasHeaders(e),this._responseTime=this.now(),this._isShared=n!==!1,this._cacheHeuristic=s!==void 0?s:.1,this._immutableMinTtl=i!==void 0?i:24*3600*1e3,this._status="status"in r?r.status:200,this._resHeaders=r.headers,this._rescc=rn(r.headers["cache-control"]),this._method="method"in e?e.method:"GET",this._url=e.url,this._host=e.headers.host,this._noAuthorization=!e.headers.authorization,this._reqHeaders=r.headers.vary?e.headers:null,this._reqcc=rn(e.headers["cache-control"]),o&&"pre-check"in this._rescc&&"post-check"in this._rescc&&(delete this._rescc["pre-check"],delete this._rescc["post-check"],delete this._rescc["no-cache"],delete this._rescc["no-store"],delete this._rescc["must-revalidate"],this._resHeaders=Object.assign({},this._resHeaders,{"cache-control":Jh(this._rescc)}),delete this._resHeaders.expires,delete this._resHeaders.pragma),r.headers["cache-control"]==null&&/no-cache/.test(r.headers.pragma)&&(this._rescc["no-cache"]=!0)}now(){return Date.now()}storable(){return!!(!this._reqcc["no-store"]&&(this._method==="GET"||this._method==="HEAD"||this._method==="POST"&&this._hasExplicitExpiration())&&Gh.has(this._status)&&!this._rescc["no-store"]&&(!this._isShared||!this._rescc.private)&&(!this._isShared||this._noAuthorization||this._allowsStoringAuthenticated())&&(this._resHeaders.expires||this._rescc["max-age"]||this._isShared&&this._rescc["s-maxage"]||this._rescc.public||zh.has(this._status)))}_hasExplicitExpiration(){return this._isShared&&this._rescc["s-maxage"]||this._rescc["max-age"]||this._resHeaders.expires}_assertRequestHasHeaders(e){if(!e||!e.headers)throw Error("Request headers missing")}satisfiesWithoutRevalidation(e){this._assertRequestHasHeaders(e);let r=rn(e.headers["cache-control"]);return r["no-cache"]||/no-cache/.test(e.headers.pragma)||r["max-age"]&&this.age()>r["max-age"]||r["min-fresh"]&&this.timeToLive()<1e3*r["min-fresh"]||this.stale()&&!(r["max-stale"]&&!this._rescc["must-revalidate"]&&(r["max-stale"]===!0||r["max-stale"]>this.age()-this.maxAge()))?!1:this._requestMatches(e,!1)}_requestMatches(e,r){return(!this._url||this._url===e.url)&&this._host===e.headers.host&&(!e.method||this._method===e.method||r&&e.method==="HEAD")&&this._varyMatches(e)}_allowsStoringAuthenticated(){return this._rescc["must-revalidate"]||this._rescc.public||this._rescc["s-maxage"]}_varyMatches(e){if(!this._resHeaders.vary)return!0;if(this._resHeaders.vary==="*")return!1;let r=this._resHeaders.vary.trim().toLowerCase().split(/\s*,\s*/);for(let n of r)if(e.headers[n]!==this._reqHeaders[n])return!1;return!0}_copyWithoutHopByHopHeaders(e){let r={};for(let n in e)Wh[n]||(r[n]=e[n]);if(e.connection){let n=e.connection.trim().split(/\s*,\s*/);for(let s of n)delete r[s]}if(r.warning){let n=r.warning.split(/,/).filter(s=>!/^\s*1[0-9][0-9]/.test(s));n.length?r.warning=n.join(",").trim():delete r.warning}return r}responseHeaders(){let e=this._copyWithoutHopByHopHeaders(this._resHeaders),r=this.age();return r>3600*24&&!this._hasExplicitExpiration()&&this.maxAge()>3600*24&&(e.warning=(e.warning?`${e.warning}, `:"")+'113 - "rfc7234 5.5.4"'),e.age=`${Math.round(r)}`,e.date=new Date(this.now()).toUTCString(),e}date(){let e=Date.parse(this._resHeaders.date);return isFinite(e)?e:this._responseTime}age(){let e=this._ageValue(),r=(this.now()-this._responseTime)/1e3;return e+r}_ageValue(){return ge(this._resHeaders.age)}maxAge(){if(!this.storable()||this._rescc["no-cache"]||this._isShared&&this._resHeaders["set-cookie"]&&!this._rescc.public&&!this._rescc.immutable||this._resHeaders.vary==="*")return 0;if(this._isShared){if(this._rescc["proxy-revalidate"])return 0;if(this._rescc["s-maxage"])return ge(this._rescc["s-maxage"])}if(this._rescc["max-age"])return ge(this._rescc["max-age"]);let e=this._rescc.immutable?this._immutableMinTtl:0,r=this.date();if(this._resHeaders.expires){let n=Date.parse(this._resHeaders.expires);return Number.isNaN(n)||n<r?0:Math.max(e,(n-r)/1e3)}if(this._resHeaders["last-modified"]){let n=Date.parse(this._resHeaders["last-modified"]);if(isFinite(n)&&r>n)return Math.max(e,(r-n)/1e3*this._cacheHeuristic)}return e}timeToLive(){let e=this.maxAge()-this.age(),r=e+ge(this._rescc["stale-if-error"]),n=e+ge(this._rescc["stale-while-revalidate"]);return Math.max(0,e,r,n)*1e3}stale(){return this.maxAge()<=this.age()}_useStaleIfError(){return this.maxAge()+ge(this._rescc["stale-if-error"])>this.age()}useStaleWhileRevalidate(){return this.maxAge()+ge(this._rescc["stale-while-revalidate"])>this.age()}static fromObject(e){return new this(void 0,void 0,{_fromObject:e})}_fromObject(e){if(this._responseTime)throw Error("Reinitialized");if(!e||e.v!==1)throw Error("Invalid serialization");this._responseTime=e.t,this._isShared=e.sh,this._cacheHeuristic=e.ch,this._immutableMinTtl=e.imm!==void 0?e.imm:24*3600*1e3,this._status=e.st,this._resHeaders=e.resh,this._rescc=e.rescc,this._method=e.m,this._url=e.u,this._host=e.h,this._noAuthorization=e.a,this._reqHeaders=e.reqh,this._reqcc=e.reqcc}toObject(){return{v:1,t:this._responseTime,sh:this._isShared,ch:this._cacheHeuristic,imm:this._immutableMinTtl,st:this._status,resh:this._resHeaders,rescc:this._rescc,m:this._method,u:this._url,h:this._host,a:this._noAuthorization,reqh:this._reqHeaders,reqcc:this._reqcc}}revalidationHeaders(e){this._assertRequestHasHeaders(e);let r=this._copyWithoutHopByHopHeaders(e.headers);if(delete r["if-range"],!this._requestMatches(e,!0)||!this.storable())return delete r["if-none-match"],delete r["if-modified-since"],r;if(this._resHeaders.etag&&(r["if-none-match"]=r["if-none-match"]?`${r["if-none-match"]}, ${this._resHeaders.etag}`:this._resHeaders.etag),r["accept-ranges"]||r["if-match"]||r["if-unmodified-since"]||this._method&&this._method!="GET"){if(delete r["if-modified-since"],r["if-none-match"]){let s=r["if-none-match"].split(/,/).filter(i=>!/^\s*W\//.test(i));s.length?r["if-none-match"]=s.join(",").trim():delete r["if-none-match"]}}else this._resHeaders["last-modified"]&&!r["if-modified-since"]&&(r["if-modified-since"]=this._resHeaders["last-modified"]);return r}revalidatedPolicy(e,r){if(this._assertRequestHasHeaders(e),this._useStaleIfError()&&Kh(r))return{modified:!1,matches:!1,policy:this};if(!r||!r.headers)throw Error("Response headers missing");let n=!1;if(r.status!==void 0&&r.status!=304?n=!1:r.headers.etag&&!/^\s*W\//.test(r.headers.etag)?n=this._resHeaders.etag&&this._resHeaders.etag.replace(/^\s*W\//,"")===r.headers.etag:this._resHeaders.etag&&r.headers.etag?n=this._resHeaders.etag.replace(/^\s*W\//,"")===r.headers.etag.replace(/^\s*W\//,""):this._resHeaders["last-modified"]?n=this._resHeaders["last-modified"]===r.headers["last-modified"]:!this._resHeaders.etag&&!this._resHeaders["last-modified"]&&!r.headers.etag&&!r.headers["last-modified"]&&(n=!0),!n)return{policy:new this.constructor(e,r),modified:r.status!=304,matches:!1};let s={};for(let o in this._resHeaders)s[o]=o in r.headers&&!Yh[o]?r.headers[o]:this._resHeaders[o];let i=Object.assign({},r,{status:this._status,method:this._method,headers:s});return{policy:new this.constructor(e,i,{shared:this._isShared,cacheHeuristic:this._cacheHeuristic,immutableMinTimeToLive:this._immutableMinTtl}),modified:!1,matches:!0}}}});var yi=g(nn=>{nn.stringify=function t(e){if(typeof e>"u")return e;if(e&&Buffer.isBuffer(e))return JSON.stringify(":base64:"+e.toString("base64"));if(e&&e.toJSON&&(e=e.toJSON()),e&&typeof e=="object"){var r="",n=Array.isArray(e);r=n?"[":"{";var s=!0;for(var i in e){var o=typeof e[i]=="function"||!n&&typeof e[i]>"u";Object.hasOwnProperty.call(e,i)&&!o&&(s||(r+=","),s=!1,n?e[i]==null?r+="null":r+=t(e[i]):e[i]!==void 0&&(r+=t(i)+":"+t(e[i])))}return r+=n?"]":"}",r}else return typeof e=="string"?JSON.stringify(/^:/.test(e)?":"+e:e):typeof e>"u"?"null":JSON.stringify(e)};nn.parse=function(t){return JSON.parse(t,function(e,r){return typeof r=="string"?/^:base64:/.test(r)?Buffer.from(r.substring(8),"base64"):/^:/.test(r)?r.substring(1):r:r})}});var Ei=g((M_,wi)=>{"use strict";var Qh=require("events"),_i=yi(),Xh=t=>{let e={redis:"@keyv/redis",rediss:"@keyv/redis",mongodb:"@keyv/mongo",mongo:"@keyv/mongo",sqlite:"@keyv/sqlite",postgresql:"@keyv/postgres",postgres:"@keyv/postgres",mysql:"@keyv/mysql",etcd:"@keyv/etcd",offline:"@keyv/offline",tiered:"@keyv/tiered"};if(t.adapter||t.uri){let r=t.adapter||/^[^:+]*/.exec(t.uri)[0];return new(require(e[r]))(t)}return new Map},bi=["sqlite","postgres","mysql","mongo","redis","tiered"],sn=class extends Qh{constructor(e,{emitErrors:r=!0,...n}={}){if(super(),this.opts={namespace:"keyv",serialize:_i.stringify,deserialize:_i.parse,...typeof e=="string"?{uri:e}:e,...n},!this.opts.store){let i={...this.opts};this.opts.store=Xh(i)}if(this.opts.compression){let i=this.opts.compression;this.opts.serialize=i.serialize.bind(i),this.opts.deserialize=i.deserialize.bind(i)}typeof this.opts.store.on=="function"&&r&&this.opts.store.on("error",i=>this.emit("error",i)),this.opts.store.namespace=this.opts.namespace;let s=i=>async function*(){for await(let[o,a]of typeof i=="function"?i(this.opts.store.namespace):i){let c=await this.opts.deserialize(a);if(!(this.opts.store.namespace&&!o.includes(this.opts.store.namespace))){if(typeof c.expires=="number"&&Date.now()>c.expires){this.delete(o);continue}yield[this._getKeyUnprefix(o),c.value]}}};typeof this.opts.store[Symbol.iterator]=="function"&&this.opts.store instanceof Map?this.iterator=s(this.opts.store):typeof this.opts.store.iterator=="function"&&this.opts.store.opts&&this._checkIterableAdaptar()&&(this.iterator=s(this.opts.store.iterator.bind(this.opts.store)))}_checkIterableAdaptar(){return bi.includes(this.opts.store.opts.dialect)||bi.findIndex(e=>this.opts.store.opts.url.includes(e))>=0}_getKeyPrefix(e){return`${this.opts.namespace}:${e}`}_getKeyPrefixArray(e){return e.map(r=>`${this.opts.namespace}:${r}`)}_getKeyUnprefix(e){return e.split(":").splice(1).join(":")}get(e,r){let{store:n}=this.opts,s=Array.isArray(e),i=s?this._getKeyPrefixArray(e):this._getKeyPrefix(e);if(s&&n.getMany===void 0){let o=[];for(let a of i)o.push(Promise.resolve().then(()=>n.get(a)).then(c=>typeof c=="string"?this.opts.deserialize(c):this.opts.compression?this.opts.deserialize(c):c).then(c=>{if(c!=null)return typeof c.expires=="number"&&Date.now()>c.expires?this.delete(a).then(()=>{}):r&&r.raw?c:c.value}));return Promise.allSettled(o).then(a=>{let c=[];for(let l of a)c.push(l.value);return c})}return Promise.resolve().then(()=>s?n.getMany(i):n.get(i)).then(o=>typeof o=="string"?this.opts.deserialize(o):this.opts.compression?this.opts.deserialize(o):o).then(o=>{if(o!=null)return s?o.map((a,c)=>{if(typeof a=="string"&&(a=this.opts.deserialize(a)),a!=null){if(typeof a.expires=="number"&&Date.now()>a.expires){this.delete(e[c]).then(()=>{});return}return r&&r.raw?a:a.value}}):typeof o.expires=="number"&&Date.now()>o.expires?this.delete(e).then(()=>{}):r&&r.raw?o:o.value})}set(e,r,n){let s=this._getKeyPrefix(e);typeof n>"u"&&(n=this.opts.ttl),n===0&&(n=void 0);let{store:i}=this.opts;return Promise.resolve().then(()=>{let o=typeof n=="number"?Date.now()+n:null;return typeof r=="symbol"&&this.emit("error","symbol cannot be serialized"),r={value:r,expires:o},this.opts.serialize(r)}).then(o=>i.set(s,o,n)).then(()=>!0)}delete(e){let{store:r}=this.opts;if(Array.isArray(e)){let s=this._getKeyPrefixArray(e);if(r.deleteMany===void 0){let i=[];for(let o of s)i.push(r.delete(o));return Promise.allSettled(i).then(o=>o.every(a=>a.value===!0))}return Promise.resolve().then(()=>r.deleteMany(s))}let n=this._getKeyPrefix(e);return Promise.resolve().then(()=>r.delete(n))}clear(){let{store:e}=this.opts;return Promise.resolve().then(()=>e.clear())}has(e){let r=this._getKeyPrefix(e),{store:n}=this.opts;return Promise.resolve().then(async()=>typeof n.has=="function"?n.has(r):await n.get(r)!==void 0)}disconnect(){let{store:e}=this.opts;if(typeof e.disconnect=="function")return e.disconnect()}};wi.exports=sn});var Ai=g((W_,Pi)=>{"use strict";var nf=["aborted","complete","headers","httpVersion","httpVersionMinor","httpVersionMajor","method","rawHeaders","rawTrailers","setTimeout","socket","statusCode","statusMessage","trailers","url"];Pi.exports=(t,e)=>{if(e._readableState.autoDestroy)throw new Error("The second stream must have the `autoDestroy` option set to `false`");let r=new Set(Object.keys(t).concat(nf)),n={};for(let s of r)s in e||(n[s]={get(){let i=t[s];return typeof i=="function"?i.bind(t):i},set(i){t[s]=i},enumerable:!0,configurable:!1});return Object.defineProperties(e,n),t.once("aborted",()=>{e.destroy(),e.emit("aborted")}),t.once("close",()=>{t.complete&&e.readable?e.once("end",()=>{e.emit("close")}):e.emit("close")}),e}});var Oi=g((Y_,ki)=>{"use strict";var{Transform:sf,PassThrough:of}=require("stream"),un=require("zlib"),af=Ai();ki.exports=t=>{let e=(t.headers["content-encoding"]||"").toLowerCase();if(!["gzip","deflate","br"].includes(e))return t;let r=e==="br";if(r&&typeof un.createBrotliDecompress!="function")return t.destroy(new Error("Brotli is not supported on Node.js < 12")),t;let n=!0,s=new sf({transform(a,c,l){n=!1,l(null,a)},flush(a){a()}}),i=new of({autoDestroy:!1,destroy(a,c){t.destroy(),c(a)}}),o=r?un.createBrotliDecompress():un.createUnzip();return o.once("error",a=>{if(n&&!t.readable){i.end();return}i.destroy(a)}),af(t,i),t.pipe(s).pipe(o).pipe(i),i}});var wn=g((Ob,Yi)=>{"use strict";var bn=class{constructor(e={}){if(!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=e.maxSize,this.onEviction=e.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(e,r){if(this.cache.set(e,r),this._size++,this._size>=this.maxSize){if(this._size=0,typeof this.onEviction=="function")for(let[n,s]of this.oldCache.entries())this.onEviction(n,s);this.oldCache=this.cache,this.cache=new Map}}get(e){if(this.cache.has(e))return this.cache.get(e);if(this.oldCache.has(e)){let r=this.oldCache.get(e);return this.oldCache.delete(e),this._set(e,r),r}}set(e,r){return this.cache.has(e)?this.cache.set(e,r):this._set(e,r),this}has(e){return this.cache.has(e)||this.oldCache.has(e)}peek(e){if(this.cache.has(e))return this.cache.get(e);if(this.oldCache.has(e))return this.oldCache.get(e)}delete(e){let r=this.cache.delete(e);return r&&this._size--,this.oldCache.delete(e)||r}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(let[e]of this)yield e}*values(){for(let[,e]of this)yield e}*[Symbol.iterator](){for(let e of this.cache)yield e;for(let e of this.oldCache){let[r]=e;this.cache.has(r)||(yield e)}}get size(){let e=0;for(let r of this.oldCache.keys())this.cache.has(r)||e++;return Math.min(this._size+e,this.maxSize)}};Yi.exports=bn});var En=g((Ib,Ki)=>{"use strict";Ki.exports=t=>{if(t.listenerCount("error")!==0)return t;t.__destroy=t._destroy,t._destroy=(...r)=>{let n=r.pop();t.__destroy(...r,async s=>{await Promise.resolve(),n(s)})};let e=r=>{Promise.resolve().then(()=>{t.emit("error",r)})};return t.once("error",e),Promise.resolve().then(()=>{t.off("error",e)}),t}});var _e=g((Lb,to)=>{"use strict";var{URL:Ji}=require("url"),wf=require("events"),Ef=require("tls"),Cf=require("http2"),Sf=wn(),xf=En(),F=Symbol("currentStreamCount"),Qi=Symbol("request"),$=Symbol("cachedOriginSet"),ce=Symbol("gracefullyClosing"),cr=Symbol("length"),Xi=["createConnection","maxDeflateDynamicTableSize","maxSettings","maxSessionMemory","maxHeaderListPairs","maxOutstandingPings","maxReservedRemoteStreams","maxSendHeaderBlockLength","paddingStrategy","peerMaxConcurrentStreams","settings","family","localAddress","rejectUnauthorized","pskCallback","minDHSize","path","socket","ca","cert","sigalgs","ciphers","clientCertEngine","crl","dhparam","ecdhCurve","honorCipherOrder","key","privateKeyEngine","privateKeyIdentifier","maxVersion","minVersion","pfx","secureOptions","secureProtocol","sessionIdContext","ticketKeys"],Tf=(t,e,r)=>{let n=0,s=t.length;for(;n<s;){let i=n+s>>>1;r(t[i],e)?n=i+1:s=i}return n},Rf=(t,e)=>t.remoteSettings.maxConcurrentStreams>e.remoteSettings.maxConcurrentStreams,Cn=(t,e)=>{for(let r=0;r<t.length;r++){let n=t[r];n[$].length>0&&n[$].length<e[$].length&&n[$].every(s=>e[$].includes(s))&&n[F]+e[F]<=e.remoteSettings.maxConcurrentStreams&&eo(n)}},Zi=(t,e)=>{for(let r=0;r<t.length;r++){let n=t[r];if(e[$].length>0&&e[$].length<n[$].length&&e[$].every(s=>n[$].includes(s))&&e[F]+n[F]<=n.remoteSettings.maxConcurrentStreams)return eo(e),!0}return!1},eo=t=>{t[ce]=!0,t[F]===0&&t.close()},Be=class t extends wf{constructor({timeout:e=0,maxSessions:r=Number.POSITIVE_INFINITY,maxEmptySessions:n=10,maxCachedTlsSessions:s=100}={}){super(),this.sessions={},this.queue={},this.timeout=e,this.maxSessions=r,this.maxEmptySessions=n,this._emptySessionCount=0,this._sessionCount=0,this.settings={enablePush:!1,initialWindowSize:1024*1024*32},this.tlsSessionCache=new Sf({maxSize:s})}get protocol(){return"https:"}normalizeOptions(e){let r="";for(let n=0;n<Xi.length;n++){let s=Xi[n];r+=":",e&&e[s]!==void 0&&(r+=e[s])}return r}_processQueue(){if(this._sessionCount>=this.maxSessions){this.closeEmptySessions(this.maxSessions-this._sessionCount+1);return}for(let e in this.queue)for(let r in this.queue[e]){let n=this.queue[e][r];n.completed||(n.completed=!0,n())}}_isBetterSession(e,r){return e>r}_accept(e,r,n,s){let i=0;for(;i<r.length&&e[F]<e.remoteSettings.maxConcurrentStreams;)r[i].resolve(e),i++;r.splice(0,i),r.length>0&&(this.getSession(n,s,r),r.length=0)}getSession(e,r,n){return new Promise((s,i)=>{Array.isArray(n)&&n.length>0?(n=[...n],s()):n=[{resolve:s,reject:i}];try{if(typeof e=="string")e=new Ji(e);else if(!(e instanceof Ji))throw new TypeError("The `origin` argument needs to be a string or an URL object");if(r){let{servername:f}=r,{hostname:m}=e;if(f&&m!==f)throw new Error(`Origin ${m} differs from servername ${f}`)}}catch(f){for(let m=0;m<n.length;m++)n[m].reject(f);return}let o=this.normalizeOptions(r),a=e.origin;if(o in this.sessions){let f=this.sessions[o],m=-1,p=-1,y;for(let _=0;_<f.length;_++){let d=f[_],C=d.remoteSettings.maxConcurrentStreams;if(C<m)break;if(!d[$].includes(a))continue;let w=d[F];w>=C||d[ce]||d.destroyed||(y||(m=C),this._isBetterSession(w,p)&&(y=d,p=w))}if(y){this._accept(y,n,a,r);return}}if(o in this.queue){if(a in this.queue[o]){this.queue[o][a].listeners.push(...n);return}}else this.queue[o]={[cr]:0};let c=()=>{o in this.queue&&this.queue[o][a]===l&&(delete this.queue[o][a],--this.queue[o][cr]===0&&delete this.queue[o])},l=async()=>{this._sessionCount++;let f=`${a}:${o}`,m=!1,p;try{let y={...r};y.settings===void 0&&(y.settings=this.settings),y.session===void 0&&(y.session=this.tlsSessionCache.get(f)),p=await(y.createConnection||this.createConnection).call(this,e,y),y.createConnection=()=>p;let d=Cf.connect(e,y);d[F]=0,d[ce]=!1;let C=()=>{let{socket:S}=d,x;return S.servername===!1?(S.servername=S.remoteAddress,x=d.originSet,S.servername=!1):x=d.originSet,x},w=()=>d[F]<d.remoteSettings.maxConcurrentStreams;d.socket.once("session",S=>{this.tlsSessionCache.set(f,S)}),d.once("error",S=>{for(let x=0;x<n.length;x++)n[x].reject(S);this.tlsSessionCache.delete(f)}),d.setTimeout(this.timeout,()=>{d.destroy()}),d.once("close",()=>{if(this._sessionCount--,m){this._emptySessionCount--;let S=this.sessions[o];S.length===1?delete this.sessions[o]:S.splice(S.indexOf(d),1)}else{c();let S=new Error("Session closed without receiving a SETTINGS frame");S.code="HTTP2WRAPPER_NOSETTINGS";for(let x=0;x<n.length;x++)n[x].reject(S)}this._processQueue()});let T=()=>{let S=this.queue[o];if(!S)return;let x=d[$];for(let R=0;R<x.length;R++){let k=x[R];if(k in S){let{listeners:j,completed:tt}=S[k],$t=0;for(;$t<j.length&&w();)j[$t].resolve(d),$t++;if(S[k].listeners.splice(0,$t),S[k].listeners.length===0&&!tt&&(delete S[k],--S[cr]===0)){delete this.queue[o];break}if(!w())break}}};d.on("origin",()=>{d[$]=C()||[],d[ce]=!1,Zi(this.sessions[o],d),!(d[ce]||!w())&&(T(),w()&&Cn(this.sessions[o],d))}),d.once("remoteSettings",()=>{if(l.destroyed){let S=new Error("Agent has been destroyed");for(let x=0;x<n.length;x++)n[x].reject(S);d.destroy();return}if(d.setLocalWindowSize&&d.setLocalWindowSize(1024*1024*4),d[$]=C()||[],d.socket.encrypted){let S=d[$][0];if(S!==a){let x=new Error(`Requested origin ${a} does not match server ${S}`);for(let R=0;R<n.length;R++)n[R].reject(x);d.destroy();return}}c();{let S=this.sessions;if(o in S){let x=S[o];x.splice(Tf(x,d,Rf),0,d)}else S[o]=[d]}m=!0,this._emptySessionCount++,this.emit("session",d),this._accept(d,n,a,r),d[F]===0&&this._emptySessionCount>this.maxEmptySessions&&this.closeEmptySessions(this._emptySessionCount-this.maxEmptySessions),d.on("remoteSettings",()=>{w()&&(T(),w()&&Cn(this.sessions[o],d))})}),d[Qi]=d.request,d.request=(S,x)=>{if(d[ce])throw new Error("The session is gracefully closing. No new streams are allowed.");let R=d[Qi](S,x);return d.ref(),d[F]++===0&&this._emptySessionCount--,R.once("close",()=>{if(--d[F]===0&&(this._emptySessionCount++,d.unref(),this._emptySessionCount>this.maxEmptySessions||d[ce])){d.close();return}d.destroyed||d.closed||w()&&!Zi(this.sessions[o],d)&&(Cn(this.sessions[o],d),T(),d[F]===0&&this._processQueue())}),R}}catch(y){c(),this._sessionCount--;for(let _=0;_<n.length;_++)n[_].reject(y)}};l.listeners=n,l.completed=!1,l.destroyed=!1,this.queue[o][a]=l,this.queue[o][cr]++,this._processQueue()})}request(e,r,n,s){return new Promise((i,o)=>{this.getSession(e,r,[{reject:o,resolve:a=>{try{let c=a.request(n,s);xf(c),i(c)}catch(c){o(c)}}}])})}async createConnection(e,r){return t.connect(e,r)}static connect(e,r){r.ALPNProtocols=["h2"];let n=e.port||443,s=e.hostname;typeof r.servername>"u"&&(r.servername=s);let i=Ef.connect(n,s,r);return r.socket&&(i._peername={family:void 0,address:void 0,port:n}),i}closeEmptySessions(e=Number.POSITIVE_INFINITY){let r=0,{sessions:n}=this;for(let s in n){let i=n[s];for(let o=0;o<i.length;o++){let a=i[o];if(a[F]===0&&(r++,a.close(),r>=e))return r}}return r}destroy(e){let{sessions:r,queue:n}=this;for(let s in r){let i=r[s];for(let o=0;o<i.length;o++)i[o].destroy(e)}for(let s in n){let i=n[s];for(let o in i)i[o].destroyed=!0}this.queue={},this.tlsSessionCache.clear()}get emptySessionCount(){return this._emptySessionCount}get pendingSessionCount(){return this._sessionCount-this._emptySessionCount}get sessionCount(){return this._sessionCount}};Be.kCurrentStreamCount=F;Be.kGracefullyClosing=ce;to.exports={Agent:Be,globalAgent:new Be}});var xn=g((qb,ro)=>{"use strict";var{Readable:Pf}=require("stream"),Sn=class extends Pf{constructor(e,r){super({emitClose:!1,autoDestroy:!0,highWaterMark:r}),this.statusCode=null,this.statusMessage="",this.httpVersion="2.0",this.httpVersionMajor=2,this.httpVersionMinor=0,this.headers={},this.trailers={},this.req=null,this.aborted=!1,this.complete=!1,this.upgrade=null,this.rawHeaders=[],this.rawTrailers=[],this.socket=e,this._dumped=!1}get connection(){return this.socket}set connection(e){this.socket=e}_destroy(e,r){this.readableEnded||(this.aborted=!0),r(),this.req._request.destroy(e)}setTimeout(e,r){return this.req.setTimeout(e,r),this}_dump(){this._dumped||(this._dumped=!0,this.removeAllListeners("data"),this.resume())}_read(){this.req&&this.req._request.resume()}};ro.exports=Sn});var so=g((Nb,no)=>{"use strict";no.exports=(t,e,r)=>{for(let n of r)t.on(n,(...s)=>e.emit(n,...s))}});var bt=g((vb,io)=>{"use strict";var be=(t,e,r)=>{io.exports[e]=class extends t{constructor(...s){super(typeof r=="string"?r:r(s)),this.name=`${super.name} [${e}]`,this.code=e}}};be(TypeError,"ERR_INVALID_ARG_TYPE",t=>{let e=t[0].includes(".")?"property":"argument",r=t[1],n=Array.isArray(r);return n&&(r=`${r.slice(0,-1).join(", ")} or ${r.slice(-1)}`),`The "${t[0]}" ${e} must be ${n?"one of":"of"} type ${r}. Received ${typeof t[2]}`});be(TypeError,"ERR_INVALID_PROTOCOL",t=>`Protocol "${t[0]}" not supported. Expected "${t[1]}"`);be(Error,"ERR_HTTP_HEADERS_SENT",t=>`Cannot ${t[0]} headers after they are sent to the client`);be(TypeError,"ERR_INVALID_HTTP_TOKEN",t=>`${t[0]} must be a valid HTTP token [${t[1]}]`);be(TypeError,"ERR_HTTP_INVALID_HEADER_VALUE",t=>`Invalid value "${t[0]} for header "${t[1]}"`);be(TypeError,"ERR_INVALID_CHAR",t=>`Invalid character in ${t[0]} [${t[1]}]`);be(Error,"ERR_HTTP2_NO_SOCKET_MANIPULATION","HTTP/2 sockets should not be directly manipulated (e.g. read and written)")});var ao=g((jb,oo)=>{"use strict";oo.exports=t=>{switch(t){case":method":case":scheme":case":authority":case":path":return!0;default:return!1}}});var Tn=g((Mb,co)=>{"use strict";var{ERR_INVALID_HTTP_TOKEN:Af}=bt(),kf=ao(),Of=/^[\^`\-\w!#$%&*+.|~]+$/;co.exports=t=>{if(typeof t!="string"||!Of.test(t)&&!kf(t))throw new Af("Header name",t)}});var Rn=g((Hb,uo)=>{"use strict";var{ERR_HTTP_INVALID_HEADER_VALUE:If,ERR_INVALID_CHAR:Lf}=bt(),qf=/[^\t\u0020-\u007E\u0080-\u00FF]/;uo.exports=(t,e)=>{if(typeof e>"u")throw new If(e,t);if(qf.test(e))throw new Lf("header content",t)}});var fo=g((Ub,ho)=>{"use strict";var{ERR_HTTP2_NO_SOCKET_MANIPULATION:lo}=bt(),Nf={has(t,e){let r=t.session===void 0?t:t.session.socket;return e in t||e in r},get(t,e){switch(e){case"on":case"once":case"end":case"emit":case"destroy":return t[e].bind(t);case"writable":case"destroyed":return t[e];case"readable":return t.destroyed?!1:t.readable;case"setTimeout":{let{session:r}=t;return r!==void 0?r.setTimeout.bind(r):t.setTimeout.bind(t)}case"write":case"read":case"pause":case"resume":throw new lo;default:{let r=t.session===void 0?t:t.session.socket,n=r[e];return typeof n=="function"?n.bind(r):n}}},getPrototypeOf(t){return t.session!==void 0?Reflect.getPrototypeOf(t.session.socket):Reflect.getPrototypeOf(t)},set(t,e,r){switch(e){case"writable":case"readable":case"destroyed":case"on":case"once":case"end":case"emit":case"destroy":return t[e]=r,!0;case"setTimeout":{let{session:n}=t;return n===void 0?t.setTimeout=r:n.setTimeout=r,!0}case"write":case"read":case"pause":case"resume":throw new lo;default:{let n=t.session===void 0?t:t.session.socket;return n[e]=r,!0}}}};ho.exports=Nf});var On=g((Db,bo)=>{"use strict";var{URL:Pn,urlToHttpOptions:po}=require("url"),Bf=require("http2"),{Writable:vf}=require("stream"),{Agent:jf,globalAgent:Mf}=_e(),Hf=xn(),Uf=so(),{ERR_INVALID_ARG_TYPE:ur,ERR_INVALID_PROTOCOL:Df,ERR_HTTP_HEADERS_SENT:mo}=bt(),Ff=Tn(),$f=Rn(),zf=fo(),{HTTP2_HEADER_STATUS:go,HTTP2_HEADER_METHOD:yo,HTTP2_HEADER_PATH:_o,HTTP2_HEADER_AUTHORITY:wt,HTTP2_METHOD_CONNECT:Gf}=Bf.constants,U=Symbol("headers"),ve=Symbol("origin"),Et=Symbol("session"),An=Symbol("options"),lr=Symbol("flushedHeaders"),je=Symbol("jobs"),Ct=Symbol("pendingAgentPromise"),kn=class extends vf{constructor(e,r,n){if(super({autoDestroy:!1,emitClose:!1}),typeof e=="string"?e=po(new Pn(e)):e instanceof Pn?e=po(e):e={...e},typeof r=="function"||r===void 0?(n=r,r=e):r=Object.assign(e,r),r.h2session){if(this[Et]=r.h2session,this[Et].destroyed)throw new Error("The session has been closed already");this.protocol=this[Et].socket.encrypted?"https:":"http:"}else if(r.agent===!1)this.agent=new jf({maxEmptySessions:0});else if(typeof r.agent>"u"||r.agent===null)this.agent=Mf;else if(typeof r.agent.request=="function")this.agent=r.agent;else throw new ur("options.agent",["http2wrapper.Agent-like Object","undefined","false"],r.agent);if(this.agent&&(this.protocol=this.agent.protocol),r.protocol&&r.protocol!==this.protocol)throw new Df(r.protocol,this.protocol);r.port||(r.port=r.defaultPort||this.agent&&this.agent.defaultPort||443),r.host=r.hostname||r.host||"localhost",delete r.hostname;let{timeout:s}=r;r.timeout=void 0,this[U]=Object.create(null),this[je]=[],this[Ct]=void 0,this.socket=null,this.connection=null,this.method=r.method||"GET",this.method==="CONNECT"&&(r.path==="/"||r.path===void 0)||(this.path=r.path),this.res=null,this.aborted=!1,this.reusedSocket=!1;let{headers:i}=r;if(i)for(let a in i)this.setHeader(a,i[a]);r.auth&&!("authorization"in this[U])&&(this[U].authorization="Basic "+Buffer.from(r.auth).toString("base64")),r.session=r.tlsSession,r.path=r.socketPath,this[An]=r,this[ve]=new Pn(`${this.protocol}//${r.servername||r.host}:${r.port}`);let o=r._reuseSocket;o&&(r.createConnection=(...a)=>o.destroyed?this.agent.createConnection(...a):o,this.agent.getSession(this[ve],this[An]).catch(()=>{})),s&&this.setTimeout(s),n&&this.once("response",n),this[lr]=!1}get method(){return this[U][yo]}set method(e){e&&(this[U][yo]=e.toUpperCase())}get path(){let e=this.method==="CONNECT"?wt:_o;return this[U][e]}set path(e){if(e){let r=this.method==="CONNECT"?wt:_o;this[U][r]=e}}get host(){return this[ve].hostname}set host(e){}get _mustNotHaveABody(){return this.method==="GET"||this.method==="HEAD"||this.method==="DELETE"}_write(e,r,n){if(this._mustNotHaveABody){n(new Error("The GET, HEAD and DELETE methods must NOT have a body"));return}this.flushHeaders();let s=()=>this._request.write(e,r,n);this._request?s():this[je].push(s)}_final(e){this.flushHeaders();let r=()=>{if(this._mustNotHaveABody||this.method==="CONNECT"){e();return}this._request.end(e)};this._request?r():this[je].push(r)}abort(){this.res&&this.res.complete||(this.aborted||process.nextTick(()=>this.emit("abort")),this.aborted=!0,this.destroy())}async _destroy(e,r){this.res&&this.res._dump(),this._request?this._request.destroy():process.nextTick(()=>{this.emit("close")});try{await this[Ct]}catch(n){this.aborted&&(e=n)}r(e)}async flushHeaders(){if(this[lr]||this.destroyed)return;this[lr]=!0;let e=this.method===Gf,r=n=>{if(this._request=n,this.destroyed){n.destroy();return}e||Uf(n,this,["timeout","continue"]),n.once("error",i=>{this.destroy(i)}),n.once("aborted",()=>{let{res:i}=this;i?(i.aborted=!0,i.emit("aborted"),i.destroy()):this.destroy(new Error("The server aborted the HTTP/2 stream"))});let s=(i,o,a)=>{let c=new Hf(this.socket,n.readableHighWaterMark);this.res=c,c.url=`${this[ve].origin}${this.path}`,c.req=this,c.statusCode=i[go],c.headers=i,c.rawHeaders=a,c.once("end",()=>{c.complete=!0,c.socket=null,c.connection=null}),e?(c.upgrade=!0,this.emit("connect",c,n,Buffer.alloc(0))?this.emit("close"):n.destroy()):(n.on("data",l=>{!c._dumped&&!c.push(l)&&n.pause()}),n.once("end",()=>{this.aborted||c.push(null)}),this.emit("response",c)||c._dump())};n.once("response",s),n.once("headers",i=>this.emit("information",{statusCode:i[go]})),n.once("trailers",(i,o,a)=>{let{res:c}=this;if(c===null){s(i,o,a);return}c.trailers=i,c.rawTrailers=a}),n.once("close",()=>{let{aborted:i,res:o}=this;if(o){i&&(o.aborted=!0,o.emit("aborted"),o.destroy());let a=()=>{o.emit("close"),this.destroy(),this.emit("close")};o.readable?o.once("end",a):a();return}if(!this.destroyed){this.destroy(new Error("The HTTP/2 stream has been early terminated")),this.emit("close");return}this.destroy(),this.emit("close")}),this.socket=new Proxy(n,zf);for(let i of this[je])i();this[je].length=0,this.emit("socket",this.socket)};if(!(wt in this[U])&&!e&&(this[U][wt]=this[ve].host),this[Et])try{r(this[Et].request(this[U]))}catch(n){this.destroy(n)}else{this.reusedSocket=!0;try{let n=this.agent.request(this[ve],this[An],this[U]);this[Ct]=n,r(await n),this[Ct]=!1}catch(n){this[Ct]=!1,this.destroy(n)}}}get connection(){return this.socket}set connection(e){this.socket=e}getHeaderNames(){return Object.keys(this[U])}hasHeader(e){if(typeof e!="string")throw new ur("name","string",e);return!!this[U][e.toLowerCase()]}getHeader(e){if(typeof e!="string")throw new ur("name","string",e);return this[U][e.toLowerCase()]}get headersSent(){return this[lr]}removeHeader(e){if(typeof e!="string")throw new ur("name","string",e);if(this.headersSent)throw new mo("remove");delete this[U][e.toLowerCase()]}setHeader(e,r){if(this.headersSent)throw new mo("set");Ff(e),$f(e,r);let n=e.toLowerCase();if(n==="connection"){if(r.toLowerCase()==="keep-alive")return;throw new Error(`Invalid 'connection' header: ${r}`)}n==="host"&&this.method==="CONNECT"?this[U][wt]=r:this[U][n]=r}setNoDelay(){}setSocketKeepAlive(){}setTimeout(e,r){let n=()=>this._request.setTimeout(e,r);return this._request?n():this[je].push(n),this}get maxHeadersCount(){if(!this.destroyed&&this._request)return this._request.session.localSettings.maxHeaderListSize}set maxHeadersCount(e){}};bo.exports=kn});var Eo=g((Fb,wo)=>{"use strict";var Vf=require("tls");wo.exports=(t={},e=Vf.connect)=>new Promise((r,n)=>{let s=!1,i,o=async()=>{await c,i.off("timeout",a),i.off("error",n),t.resolveSocket?(r({alpnProtocol:i.alpnProtocol,socket:i,timeout:s}),s&&(await Promise.resolve(),i.emit("timeout"))):(i.destroy(),r({alpnProtocol:i.alpnProtocol,timeout:s}))},a=async()=>{s=!0,o()},c=(async()=>{try{i=await e(t,o),i.on("error",n),i.once("timeout",a)}catch(l){n(l)}})()})});var So=g(($b,Co)=>{"use strict";var{isIP:Wf}=require("net"),Yf=require("assert"),Kf=t=>{if(t[0]==="["){let r=t.indexOf("]");return Yf(r!==-1),t.slice(1,r)}let e=t.indexOf(":");return e===-1?t:t.slice(0,e)};Co.exports=t=>{let e=Kf(t);return Wf(e)?"":e}});var Io=g((zb,St)=>{"use strict";var{URL:xo,urlToHttpOptions:To}=require("url"),Ro=require("http"),In=require("https"),Jf=Eo(),Qf=wn(),{Agent:Xf,globalAgent:Zf}=_e(),ed=On(),td=So(),Po=En(),Ao=new Qf({maxSize:100}),rd=new Map,nd=(t,e,r)=>{e._httpMessage={shouldKeepAlive:!0};let n=()=>{t.emit("free",e,r)};e.on("free",n);let s=()=>{t.removeSocket(e,r)};e.on("close",s);let i=()=>{let{freeSockets:a}=t;for(let c of Object.values(a))if(c.includes(e)){e.destroy();return}};e.on("timeout",i);let o=()=>{t.removeSocket(e,r),e.off("close",s),e.off("free",n),e.off("timeout",i),e.off("agentRemove",o)};e.on("agentRemove",o),t.emit("free",e,r)},ko=(t,e=new Map,r=void 0)=>async n=>{let s=`${n.host}:${n.port}:${n.ALPNProtocols.sort()}`;if(!t.has(s)){if(e.has(s))return{alpnProtocol:(await e.get(s)).alpnProtocol};let{path:i}=n;n.path=n.socketPath;let o=Jf(n,r);e.set(s,o);try{let a=await o;return t.set(s,a.alpnProtocol),e.delete(s),n.path=i,a}catch(a){throw e.delete(s),n.path=i,a}}return{alpnProtocol:t.get(s)}},Oo=ko(Ao,rd);St.exports=async(t,e,r)=>{if(typeof t=="string"?t=To(new xo(t)):t instanceof xo?t=To(t):t={...t},typeof e=="function"||e===void 0?(r=e,e=t):e=Object.assign(t,e),e.ALPNProtocols=e.ALPNProtocols||["h2","http/1.1"],!Array.isArray(e.ALPNProtocols)||e.ALPNProtocols.length===0)throw new Error("The `ALPNProtocols` option must be an Array with at least one entry");e.protocol=e.protocol||"https:";let n=e.protocol==="https:";e.host=e.hostname||e.host||"localhost",e.session=e.tlsSession,e.servername=e.servername||td(e.headers&&e.headers.host||e.host),e.port=e.port||(n?443:80),e._defaultAgent=n?In.globalAgent:Ro.globalAgent;let s=e.resolveProtocol||Oo,{agent:i}=e;if(i!==void 0&&i!==!1&&i.constructor.name!=="Object")throw new Error("The `options.agent` can be only an object `http`, `https` or `http2` properties");if(n){e.resolveSocket=!0;let{socket:o,alpnProtocol:a,timeout:c}=await s(e);if(c){o&&o.destroy();let f=new Error(`Timed out resolving ALPN: ${e.timeout} ms`);throw f.code="ETIMEDOUT",f.ms=e.timeout,f}o&&e.createConnection&&(o.destroy(),o=void 0),delete e.resolveSocket;let l=a==="h2";if(i&&(i=l?i.http2:i.https,e.agent=i),i===void 0&&(i=l?Zf:In.globalAgent),o)if(i===!1)o.destroy();else{let f=(l?Xf:In.Agent).prototype.createConnection;i.createConnection===f?l?e._reuseSocket=o:nd(i,o,e):o.destroy()}if(l)return Po(new ed(e,r))}else i&&(e.agent=i.http);return e.headers&&(e.headers={...e.headers},e.headers[":authority"]&&(e.headers.host||(e.headers.host=e.headers[":authority"]),delete e.headers[":authority"]),delete e.headers[":method"],delete e.headers[":scheme"],delete e.headers[":path"]),Po(Ro.request(e,r))};St.exports.protocolCache=Ao;St.exports.resolveProtocol=Oo;St.exports.createResolveProtocol=ko});var Ln=g((Gb,Lo)=>{"use strict";var sd=require("stream"),id=require("tls"),od=new id.TLSSocket(new sd.PassThrough)._handle._parentWrap.constructor;Lo.exports=od});var Nn=g((Vb,qo)=>{"use strict";var qn=class extends Error{constructor(e,r=""){super(`The proxy server rejected the request with status code ${e} (${r||"empty status message"})`),this.statusCode=e,this.statusMessage=r}};qo.exports=qn});var Bo=g((Wb,No)=>{"use strict";var ad=(t,e,r)=>{if(!r.some(s=>typeof s==="string"?typeof e===s:e instanceof s)){let s=r.map(i=>typeof i=="string"?i:i.name);throw new TypeError(`Expected '${t}' to be a type of ${s.join(" or ")}, got ${typeof e}`)}};No.exports=ad});var Bn=g((Yb,jo)=>{"use strict";var{URL:vo}=require("url"),hr=Bo();jo.exports=(t,e)=>{hr("proxyOptions",e,["object"]),hr("proxyOptions.headers",e.headers,["object","undefined"]),hr("proxyOptions.raw",e.raw,["boolean","undefined"]),hr("proxyOptions.url",e.url,[vo,"string"]);let r=new vo(e.url);t.proxyOptions={raw:!0,...e,headers:{...e.headers},url:r}}});var fr=g((Kb,Mo)=>{"use strict";Mo.exports=t=>{let{username:e,password:r}=t.proxyOptions.url;if(e||r){let n=`${e}:${r}`,s=`Basic ${Buffer.from(n).toString("base64")}`;return{"proxy-authorization":s,authorization:s}}return{}}});var $o=g((Jb,Fo)=>{"use strict";var cd=require("tls"),ud=require("http"),Ho=require("https"),ld=Ln(),{globalAgent:hd}=_e(),fd=Nn(),Uo=Bn(),dd=fr(),Do=(t,e,r)=>{(async()=>{try{let{proxyOptions:n}=t,{url:s,headers:i,raw:o}=n,a=await hd.request(s,n,{...dd(t),...i,":method":"CONNECT",":authority":`${e.host}:${e.port}`});a.once("error",r),a.once("response",c=>{let l=c[":status"];if(l!==200){r(new fd(l,""));return}let f=t instanceof Ho.Agent;if(o&&f){e.socket=a;let p=cd.connect(e);p.once("close",()=>{a.destroy()}),r(null,p);return}let m=new ld(a);m.encrypted=!1,m._handle.getpeername=p=>{p.family=void 0,p.address=void 0,p.port=void 0},r(null,m)})}catch(n){r(n)}})()},vn=class extends ud.Agent{constructor(e){super(e),Uo(this,e.proxyOptions)}createConnection(e,r){Do(this,e,r)}},jn=class extends Ho.Agent{constructor(e){super(e),Uo(this,e.proxyOptions)}createConnection(e,r){Do(this,e,r)}};Fo.exports={HttpOverHttp2:vn,HttpsOverHttp2:jn}});var Hn=g((Qb,zo)=>{"use strict";var{Agent:pd}=_e(),md=Ln(),gd=Nn(),yd=Bn(),Mn=class extends pd{constructor(e){super(e),yd(this,e.proxyOptions)}async createConnection(e,r){let n=`${e.hostname}:${e.port||443}`,[s,i,o]=await this._getProxyStream(n);if(i!==200)throw new gd(i,o);if(this.proxyOptions.raw)r.socket=s;else{let a=new md(s);return a.encrypted=!1,a._handle.getpeername=c=>{c.family=void 0,c.address=void 0,c.port=void 0},a}return super.createConnection(e,r)}};zo.exports=Mn});var Vo=g((Xb,Go)=>{"use strict";var{globalAgent:_d}=_e(),bd=Hn(),wd=fr(),Ed=t=>new Promise((e,r)=>{t.once("error",r),t.once("response",n=>{t.off("error",r),e(n[":status"])})}),Un=class extends bd{async _getProxyStream(e){let{proxyOptions:r}=this,n={...wd(this),...r.headers,":method":"CONNECT",":authority":e},s=await _d.request(r.url,r,n),i=await Ed(s);return[s,i,""]}};Go.exports=Un});var Yo=g((Zb,Wo)=>{"use strict";var Cd=require("http"),Sd=require("https"),xd=Hn(),Td=fr(),Rd=t=>new Promise((e,r)=>{let n=(s,i,o)=>{i.unshift(o),t.off("error",r),e([i,s.statusCode,s.statusMessage])};t.once("error",r),t.once("connect",n)}),dr=class extends xd{async _getProxyStream(e){let{proxyOptions:r}=this,{url:n,headers:s}=this.proxyOptions,o=(n.protocol==="https:"?Sd:Cd).request({...r,hostname:n.hostname,port:n.port,path:e,headers:{...Td(this),...s,host:e},method:"CONNECT"}).end();return Rd(o)}};Wo.exports={Http2OverHttp:dr,Http2OverHttps:dr}});var Jo=g((ew,Ko)=>{"use strict";var Pd=require("http2"),{Agent:Ad,globalAgent:kd}=_e(),Dn=On(),Od=xn(),Id=Io(),{HttpOverHttp2:Ld,HttpsOverHttp2:qd}=$o(),Nd=Vo(),{Http2OverHttp:Bd,Http2OverHttps:vd}=Yo(),jd=Tn(),Md=Rn(),Hd=(t,e,r)=>new Dn(t,e,r),Ud=(t,e,r)=>{let n=new Dn(t,e,r);return n.end(),n};Ko.exports={...Pd,ClientRequest:Dn,IncomingMessage:Od,Agent:Ad,globalAgent:kd,request:Hd,get:Ud,auto:Id,proxies:{HttpOverHttp2:Ld,HttpsOverHttp2:qd,Http2OverHttp2:Nd,Http2OverHttp:Bd,Http2OverHttps:vd},validateHeaderName:jd,validateHeaderValue:Md}});var Wn=g((R0,ga)=>{ga.exports=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}});var ue=g(Ee=>{var Yn,pp=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Ee.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};Ee.getSymbolTotalCodewords=function(e){return pp[e]};Ee.getBCHDigit=function(t){let e=0;for(;t!==0;)e++,t>>>=1;return e};Ee.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');Yn=e};Ee.isKanjiModeEnabled=function(){return typeof Yn<"u"};Ee.toSJIS=function(e){return Yn(e)}});var Cr=g(Y=>{Y.L={bit:1};Y.M={bit:0};Y.Q={bit:3};Y.H={bit:2};function mp(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return Y.L;case"m":case"medium":return Y.M;case"q":case"quartile":return Y.Q;case"h":case"high":return Y.H;default:throw new Error("Unknown EC Level: "+t)}}Y.isValid=function(e){return e&&typeof e.bit<"u"&&e.bit>=0&&e.bit<4};Y.from=function(e,r){if(Y.isValid(e))return e;try{return mp(e)}catch{return r}}});var ba=g((k0,_a)=>{function ya(){this.buffer=[],this.length=0}ya.prototype={get:function(t){let e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let r=0;r<e;r++)this.putBit((t>>>e-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){let e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};_a.exports=ya});var Ea=g((O0,wa)=>{function Rt(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}Rt.prototype.set=function(t,e,r,n){let s=t*this.size+e;this.data[s]=r,n&&(this.reservedBit[s]=!0)};Rt.prototype.get=function(t,e){return this.data[t*this.size+e]};Rt.prototype.xor=function(t,e,r){this.data[t*this.size+e]^=r};Rt.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};wa.exports=Rt});var Ca=g(Sr=>{var gp=ue().getSymbolSize;Sr.getRowColCoords=function(e){if(e===1)return[];let r=Math.floor(e/7)+2,n=gp(e),s=n===145?26:Math.ceil((n-13)/(2*r-2))*2,i=[n-7];for(let o=1;o<r-1;o++)i[o]=i[o-1]-s;return i.push(6),i.reverse()};Sr.getPositions=function(e){let r=[],n=Sr.getRowColCoords(e),s=n.length;for(let i=0;i<s;i++)for(let o=0;o<s;o++)i===0&&o===0||i===0&&o===s-1||i===s-1&&o===0||r.push([n[i],n[o]]);return r}});var Ta=g(xa=>{var yp=ue().getSymbolSize,Sa=7;xa.getPositions=function(e){let r=yp(e);return[[0,0],[r-Sa,0],[0,r-Sa]]}});var Ra=g(O=>{O.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var Ce={N1:3,N2:3,N3:40,N4:10};O.isValid=function(e){return e!=null&&e!==""&&!isNaN(e)&&e>=0&&e<=7};O.from=function(e){return O.isValid(e)?parseInt(e,10):void 0};O.getPenaltyN1=function(e){let r=e.size,n=0,s=0,i=0,o=null,a=null;for(let c=0;c<r;c++){s=i=0,o=a=null;for(let l=0;l<r;l++){let f=e.get(c,l);f===o?s++:(s>=5&&(n+=Ce.N1+(s-5)),o=f,s=1),f=e.get(l,c),f===a?i++:(i>=5&&(n+=Ce.N1+(i-5)),a=f,i=1)}s>=5&&(n+=Ce.N1+(s-5)),i>=5&&(n+=Ce.N1+(i-5))}return n};O.getPenaltyN2=function(e){let r=e.size,n=0;for(let s=0;s<r-1;s++)for(let i=0;i<r-1;i++){let o=e.get(s,i)+e.get(s,i+1)+e.get(s+1,i)+e.get(s+1,i+1);(o===4||o===0)&&n++}return n*Ce.N2};O.getPenaltyN3=function(e){let r=e.size,n=0,s=0,i=0;for(let o=0;o<r;o++){s=i=0;for(let a=0;a<r;a++)s=s<<1&2047|e.get(o,a),a>=10&&(s===1488||s===93)&&n++,i=i<<1&2047|e.get(a,o),a>=10&&(i===1488||i===93)&&n++}return n*Ce.N3};O.getPenaltyN4=function(e){let r=0,n=e.data.length;for(let i=0;i<n;i++)r+=e.data[i];return Math.abs(Math.ceil(r*100/n/5)-10)*Ce.N4};function _p(t,e,r){switch(t){case O.Patterns.PATTERN000:return(e+r)%2===0;case O.Patterns.PATTERN001:return e%2===0;case O.Patterns.PATTERN010:return r%3===0;case O.Patterns.PATTERN011:return(e+r)%3===0;case O.Patterns.PATTERN100:return(Math.floor(e/2)+Math.floor(r/3))%2===0;case O.Patterns.PATTERN101:return e*r%2+e*r%3===0;case O.Patterns.PATTERN110:return(e*r%2+e*r%3)%2===0;case O.Patterns.PATTERN111:return(e*r%3+(e+r)%2)%2===0;default:throw new Error("bad maskPattern:"+t)}}O.applyMask=function(e,r){let n=r.size;for(let s=0;s<n;s++)for(let i=0;i<n;i++)r.isReserved(i,s)||r.xor(i,s,_p(e,i,s))};O.getBestMask=function(e,r){let n=Object.keys(O.Patterns).length,s=0,i=1/0;for(let o=0;o<n;o++){r(o),O.applyMask(o,e);let a=O.getPenaltyN1(e)+O.getPenaltyN2(e)+O.getPenaltyN3(e)+O.getPenaltyN4(e);O.applyMask(o,e),a<i&&(i=a,s=o)}return s}});var Jn=g(Kn=>{var le=Cr(),xr=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Tr=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Kn.getBlocksCount=function(e,r){switch(r){case le.L:return xr[(e-1)*4+0];case le.M:return xr[(e-1)*4+1];case le.Q:return xr[(e-1)*4+2];case le.H:return xr[(e-1)*4+3];default:return}};Kn.getTotalCodewordsCount=function(e,r){switch(r){case le.L:return Tr[(e-1)*4+0];case le.M:return Tr[(e-1)*4+1];case le.Q:return Tr[(e-1)*4+2];case le.H:return Tr[(e-1)*4+3];default:return}}});var Pa=g(Pr=>{var Pt=new Uint8Array(512),Rr=new Uint8Array(256);(function(){let e=1;for(let r=0;r<255;r++)Pt[r]=e,Rr[e]=r,e<<=1,e&256&&(e^=285);for(let r=255;r<512;r++)Pt[r]=Pt[r-255]})();Pr.log=function(e){if(e<1)throw new Error("log("+e+")");return Rr[e]};Pr.exp=function(e){return Pt[e]};Pr.mul=function(e,r){return e===0||r===0?0:Pt[Rr[e]+Rr[r]]}});var Aa=g(At=>{var Qn=Pa();At.mul=function(e,r){let n=new Uint8Array(e.length+r.length-1);for(let s=0;s<e.length;s++)for(let i=0;i<r.length;i++)n[s+i]^=Qn.mul(e[s],r[i]);return n};At.mod=function(e,r){let n=new Uint8Array(e);for(;n.length-r.length>=0;){let s=n[0];for(let o=0;o<r.length;o++)n[o]^=Qn.mul(r[o],s);let i=0;for(;i<n.length&&n[i]===0;)i++;n=n.slice(i)}return n};At.generateECPolynomial=function(e){let r=new Uint8Array([1]);for(let n=0;n<e;n++)r=At.mul(r,new Uint8Array([1,Qn.exp(n)]));return r}});var Ia=g((j0,Oa)=>{var ka=Aa();function Xn(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}Xn.prototype.initialize=function(e){this.degree=e,this.genPoly=ka.generateECPolynomial(this.degree)};Xn.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");let r=new Uint8Array(e.length+this.degree);r.set(e);let n=ka.mod(r,this.genPoly),s=this.degree-n.length;if(s>0){let i=new Uint8Array(this.degree);return i.set(n,s),i}return n};Oa.exports=Xn});var Zn=g(La=>{La.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}});var es=g(se=>{var qa="[0-9]+",bp="[A-Z $%*+\\-./:]+",kt="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";kt=kt.replace(/u/g,"\\u");var wp="(?:(?![A-Z0-9 $%*+\\-./:]|"+kt+`)(?:.|[\r
]))+`;se.KANJI=new RegExp(kt,"g");se.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");se.BYTE=new RegExp(wp,"g");se.NUMERIC=new RegExp(qa,"g");se.ALPHANUMERIC=new RegExp(bp,"g");var Ep=new RegExp("^"+kt+"$"),Cp=new RegExp("^"+qa+"$"),Sp=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");se.testKanji=function(e){return Ep.test(e)};se.testNumeric=function(e){return Cp.test(e)};se.testAlphanumeric=function(e){return Sp.test(e)}});var he=g(B=>{var xp=Zn(),ts=es();B.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]};B.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]};B.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]};B.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]};B.MIXED={bit:-1};B.getCharCountIndicator=function(e,r){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!xp.isValid(r))throw new Error("Invalid version: "+r);return r>=1&&r<10?e.ccBits[0]:r<27?e.ccBits[1]:e.ccBits[2]};B.getBestModeForData=function(e){return ts.testNumeric(e)?B.NUMERIC:ts.testAlphanumeric(e)?B.ALPHANUMERIC:ts.testKanji(e)?B.KANJI:B.BYTE};B.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")};B.isValid=function(e){return e&&e.bit&&e.ccBits};function Tp(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"numeric":return B.NUMERIC;case"alphanumeric":return B.ALPHANUMERIC;case"kanji":return B.KANJI;case"byte":return B.BYTE;default:throw new Error("Unknown mode: "+t)}}B.from=function(e,r){if(B.isValid(e))return e;try{return Tp(e)}catch{return r}}});var Ma=g(Se=>{var Ar=ue(),Rp=Jn(),Na=Cr(),fe=he(),rs=Zn(),va=7973,Ba=Ar.getBCHDigit(va);function Pp(t,e,r){for(let n=1;n<=40;n++)if(e<=Se.getCapacity(n,r,t))return n}function ja(t,e){return fe.getCharCountIndicator(t,e)+4}function Ap(t,e){let r=0;return t.forEach(function(n){let s=ja(n.mode,e);r+=s+n.getBitsLength()}),r}function kp(t,e){for(let r=1;r<=40;r++)if(Ap(t,r)<=Se.getCapacity(r,e,fe.MIXED))return r}Se.from=function(e,r){return rs.isValid(e)?parseInt(e,10):r};Se.getCapacity=function(e,r,n){if(!rs.isValid(e))throw new Error("Invalid QR Code version");typeof n>"u"&&(n=fe.BYTE);let s=Ar.getSymbolTotalCodewords(e),i=Rp.getTotalCodewordsCount(e,r),o=(s-i)*8;if(n===fe.MIXED)return o;let a=o-ja(n,e);switch(n){case fe.NUMERIC:return Math.floor(a/10*3);case fe.ALPHANUMERIC:return Math.floor(a/11*2);case fe.KANJI:return Math.floor(a/13);case fe.BYTE:default:return Math.floor(a/8)}};Se.getBestVersionForData=function(e,r){let n,s=Na.from(r,Na.M);if(Array.isArray(e)){if(e.length>1)return kp(e,s);if(e.length===0)return 1;n=e[0]}else n=e;return Pp(n.mode,n.getLength(),s)};Se.getEncodedBits=function(e){if(!rs.isValid(e)||e<7)throw new Error("Invalid QR Code version");let r=e<<12;for(;Ar.getBCHDigit(r)-Ba>=0;)r^=va<<Ar.getBCHDigit(r)-Ba;return e<<12|r}});var Fa=g(Da=>{var ns=ue(),Ua=1335,Op=21522,Ha=ns.getBCHDigit(Ua);Da.getEncodedBits=function(e,r){let n=e.bit<<3|r,s=n<<10;for(;ns.getBCHDigit(s)-Ha>=0;)s^=Ua<<ns.getBCHDigit(s)-Ha;return(n<<10|s)^Op}});var za=g(($0,$a)=>{var Ip=he();function He(t){this.mode=Ip.NUMERIC,this.data=t.toString()}He.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};He.prototype.getLength=function(){return this.data.length};He.prototype.getBitsLength=function(){return He.getBitsLength(this.data.length)};He.prototype.write=function(e){let r,n,s;for(r=0;r+3<=this.data.length;r+=3)n=this.data.substr(r,3),s=parseInt(n,10),e.put(s,10);let i=this.data.length-r;i>0&&(n=this.data.substr(r),s=parseInt(n,10),e.put(s,i*3+1))};$a.exports=He});var Va=g((z0,Ga)=>{var Lp=he(),ss=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Ue(t){this.mode=Lp.ALPHANUMERIC,this.data=t}Ue.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};Ue.prototype.getLength=function(){return this.data.length};Ue.prototype.getBitsLength=function(){return Ue.getBitsLength(this.data.length)};Ue.prototype.write=function(e){let r;for(r=0;r+2<=this.data.length;r+=2){let n=ss.indexOf(this.data[r])*45;n+=ss.indexOf(this.data[r+1]),e.put(n,11)}this.data.length%2&&e.put(ss.indexOf(this.data[r]),6)};Ga.exports=Ue});var Ya=g((G0,Wa)=>{"use strict";Wa.exports=function(e){for(var r=[],n=e.length,s=0;s<n;s++){var i=e.charCodeAt(s);if(i>=55296&&i<=56319&&n>s+1){var o=e.charCodeAt(s+1);o>=56320&&o<=57343&&(i=(i-55296)*1024+o-56320+65536,s+=1)}if(i<128){r.push(i);continue}if(i<2048){r.push(i>>6|192),r.push(i&63|128);continue}if(i<55296||i>=57344&&i<65536){r.push(i>>12|224),r.push(i>>6&63|128),r.push(i&63|128);continue}if(i>=65536&&i<=1114111){r.push(i>>18|240),r.push(i>>12&63|128),r.push(i>>6&63|128),r.push(i&63|128);continue}r.push(239,191,189)}return new Uint8Array(r).buffer}});var Ja=g((V0,Ka)=>{var qp=Ya(),Np=he();function De(t){this.mode=Np.BYTE,typeof t=="string"&&(t=qp(t)),this.data=new Uint8Array(t)}De.getBitsLength=function(e){return e*8};De.prototype.getLength=function(){return this.data.length};De.prototype.getBitsLength=function(){return De.getBitsLength(this.data.length)};De.prototype.write=function(t){for(let e=0,r=this.data.length;e<r;e++)t.put(this.data[e],8)};Ka.exports=De});var Xa=g((W0,Qa)=>{var Bp=he(),vp=ue();function Fe(t){this.mode=Bp.KANJI,this.data=t}Fe.getBitsLength=function(e){return e*13};Fe.prototype.getLength=function(){return this.data.length};Fe.prototype.getBitsLength=function(){return Fe.getBitsLength(this.data.length)};Fe.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let r=vp.toSJIS(this.data[e]);if(r>=33088&&r<=40956)r-=33088;else if(r>=57408&&r<=60351)r-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);r=(r>>>8&255)*192+(r&255),t.put(r,13)}};Qa.exports=Fe});var Za=g((Y0,is)=>{"use strict";var Ot={single_source_shortest_paths:function(t,e,r){var n={},s={};s[e]=0;var i=Ot.PriorityQueue.make();i.push(e,0);for(var o,a,c,l,f,m,p,y,_;!i.empty();){o=i.pop(),a=o.value,l=o.cost,f=t[a]||{};for(c in f)f.hasOwnProperty(c)&&(m=f[c],p=l+m,y=s[c],_=typeof s[c]>"u",(_||y>p)&&(s[c]=p,i.push(c,p),n[c]=a))}if(typeof r<"u"&&typeof s[r]>"u"){var d=["Could not find a path from ",e," to ",r,"."].join("");throw new Error(d)}return n},extract_shortest_path_from_predecessor_list:function(t,e){for(var r=[],n=e,s;n;)r.push(n),s=t[n],n=t[n];return r.reverse(),r},find_path:function(t,e,r){var n=Ot.single_source_shortest_paths(t,e,r);return Ot.extract_shortest_path_from_predecessor_list(n,r)},PriorityQueue:{make:function(t){var e=Ot.PriorityQueue,r={},n;t=t||{};for(n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);return r.queue=[],r.sorter=t.sorter||e.default_sorter,r},default_sorter:function(t,e){return t.cost-e.cost},push:function(t,e){var r={value:t,cost:e};this.queue.push(r),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};typeof is<"u"&&(is.exports=Ot)});var ac=g($e=>{var P=he(),rc=za(),nc=Va(),sc=Ja(),ic=Xa(),It=es(),kr=ue(),jp=Za();function ec(t){return unescape(encodeURIComponent(t)).length}function Lt(t,e,r){let n=[],s;for(;(s=t.exec(r))!==null;)n.push({data:s[0],index:s.index,mode:e,length:s[0].length});return n}function oc(t){let e=Lt(It.NUMERIC,P.NUMERIC,t),r=Lt(It.ALPHANUMERIC,P.ALPHANUMERIC,t),n,s;return kr.isKanjiModeEnabled()?(n=Lt(It.BYTE,P.BYTE,t),s=Lt(It.KANJI,P.KANJI,t)):(n=Lt(It.BYTE_KANJI,P.BYTE,t),s=[]),e.concat(r,n,s).sort(function(o,a){return o.index-a.index}).map(function(o){return{data:o.data,mode:o.mode,length:o.length}})}function os(t,e){switch(e){case P.NUMERIC:return rc.getBitsLength(t);case P.ALPHANUMERIC:return nc.getBitsLength(t);case P.KANJI:return ic.getBitsLength(t);case P.BYTE:return sc.getBitsLength(t)}}function Mp(t){return t.reduce(function(e,r){let n=e.length-1>=0?e[e.length-1]:null;return n&&n.mode===r.mode?(e[e.length-1].data+=r.data,e):(e.push(r),e)},[])}function Hp(t){let e=[];for(let r=0;r<t.length;r++){let n=t[r];switch(n.mode){case P.NUMERIC:e.push([n,{data:n.data,mode:P.ALPHANUMERIC,length:n.length},{data:n.data,mode:P.BYTE,length:n.length}]);break;case P.ALPHANUMERIC:e.push([n,{data:n.data,mode:P.BYTE,length:n.length}]);break;case P.KANJI:e.push([n,{data:n.data,mode:P.BYTE,length:ec(n.data)}]);break;case P.BYTE:e.push([{data:n.data,mode:P.BYTE,length:ec(n.data)}])}}return e}function Up(t,e){let r={},n={start:{}},s=["start"];for(let i=0;i<t.length;i++){let o=t[i],a=[];for(let c=0;c<o.length;c++){let l=o[c],f=""+i+c;a.push(f),r[f]={node:l,lastCount:0},n[f]={};for(let m=0;m<s.length;m++){let p=s[m];r[p]&&r[p].node.mode===l.mode?(n[p][f]=os(r[p].lastCount+l.length,l.mode)-os(r[p].lastCount,l.mode),r[p].lastCount+=l.length):(r[p]&&(r[p].lastCount=l.length),n[p][f]=os(l.length,l.mode)+4+P.getCharCountIndicator(l.mode,e))}}s=a}for(let i=0;i<s.length;i++)n[s[i]].end=0;return{map:n,table:r}}function tc(t,e){let r,n=P.getBestModeForData(t);if(r=P.from(e,n),r!==P.BYTE&&r.bit<n.bit)throw new Error('"'+t+'" cannot be encoded with mode '+P.toString(r)+`.
 Suggested mode is: `+P.toString(n));switch(r===P.KANJI&&!kr.isKanjiModeEnabled()&&(r=P.BYTE),r){case P.NUMERIC:return new rc(t);case P.ALPHANUMERIC:return new nc(t);case P.KANJI:return new ic(t);case P.BYTE:return new sc(t)}}$e.fromArray=function(e){return e.reduce(function(r,n){return typeof n=="string"?r.push(tc(n,null)):n.data&&r.push(tc(n.data,n.mode)),r},[])};$e.fromString=function(e,r){let n=oc(e,kr.isKanjiModeEnabled()),s=Hp(n),i=Up(s,r),o=jp.find_path(i.map,"start","end"),a=[];for(let c=1;c<o.length-1;c++)a.push(i.table[o[c]].node);return $e.fromArray(Mp(a))};$e.rawSplit=function(e){return $e.fromArray(oc(e,kr.isKanjiModeEnabled()))}});var fs=g(cc=>{var Ir=ue(),as=Cr(),Dp=ba(),Fp=Ea(),$p=Ca(),zp=Ta(),ls=Ra(),hs=Jn(),Gp=Ia(),Or=Ma(),Vp=Fa(),Wp=he(),cs=ac();function Yp(t,e){let r=t.size,n=zp.getPositions(e);for(let s=0;s<n.length;s++){let i=n[s][0],o=n[s][1];for(let a=-1;a<=7;a++)if(!(i+a<=-1||r<=i+a))for(let c=-1;c<=7;c++)o+c<=-1||r<=o+c||(a>=0&&a<=6&&(c===0||c===6)||c>=0&&c<=6&&(a===0||a===6)||a>=2&&a<=4&&c>=2&&c<=4?t.set(i+a,o+c,!0,!0):t.set(i+a,o+c,!1,!0))}}function Kp(t){let e=t.size;for(let r=8;r<e-8;r++){let n=r%2===0;t.set(r,6,n,!0),t.set(6,r,n,!0)}}function Jp(t,e){let r=$p.getPositions(e);for(let n=0;n<r.length;n++){let s=r[n][0],i=r[n][1];for(let o=-2;o<=2;o++)for(let a=-2;a<=2;a++)o===-2||o===2||a===-2||a===2||o===0&&a===0?t.set(s+o,i+a,!0,!0):t.set(s+o,i+a,!1,!0)}}function Qp(t,e){let r=t.size,n=Or.getEncodedBits(e),s,i,o;for(let a=0;a<18;a++)s=Math.floor(a/3),i=a%3+r-8-3,o=(n>>a&1)===1,t.set(s,i,o,!0),t.set(i,s,o,!0)}function us(t,e,r){let n=t.size,s=Vp.getEncodedBits(e,r),i,o;for(i=0;i<15;i++)o=(s>>i&1)===1,i<6?t.set(i,8,o,!0):i<8?t.set(i+1,8,o,!0):t.set(n-15+i,8,o,!0),i<8?t.set(8,n-i-1,o,!0):i<9?t.set(8,15-i-1+1,o,!0):t.set(8,15-i-1,o,!0);t.set(n-8,8,1,!0)}function Xp(t,e){let r=t.size,n=-1,s=r-1,i=7,o=0;for(let a=r-1;a>0;a-=2)for(a===6&&a--;;){for(let c=0;c<2;c++)if(!t.isReserved(s,a-c)){let l=!1;o<e.length&&(l=(e[o]>>>i&1)===1),t.set(s,a-c,l),i--,i===-1&&(o++,i=7)}if(s+=n,s<0||r<=s){s-=n,n=-n;break}}}function Zp(t,e,r){let n=new Dp;r.forEach(function(c){n.put(c.mode.bit,4),n.put(c.getLength(),Wp.getCharCountIndicator(c.mode,t)),c.write(n)});let s=Ir.getSymbolTotalCodewords(t),i=hs.getTotalCodewordsCount(t,e),o=(s-i)*8;for(n.getLengthInBits()+4<=o&&n.put(0,4);n.getLengthInBits()%8!==0;)n.putBit(0);let a=(o-n.getLengthInBits())/8;for(let c=0;c<a;c++)n.put(c%2?17:236,8);return em(n,t,e)}function em(t,e,r){let n=Ir.getSymbolTotalCodewords(e),s=hs.getTotalCodewordsCount(e,r),i=n-s,o=hs.getBlocksCount(e,r),a=n%o,c=o-a,l=Math.floor(n/o),f=Math.floor(i/o),m=f+1,p=l-f,y=new Gp(p),_=0,d=new Array(o),C=new Array(o),w=0,T=new Uint8Array(t.buffer);for(let j=0;j<o;j++){let tt=j<c?f:m;d[j]=T.slice(_,_+tt),C[j]=y.encode(d[j]),_+=tt,w=Math.max(w,tt)}let S=new Uint8Array(n),x=0,R,k;for(R=0;R<w;R++)for(k=0;k<o;k++)R<d[k].length&&(S[x++]=d[k][R]);for(R=0;R<p;R++)for(k=0;k<o;k++)S[x++]=C[k][R];return S}function tm(t,e,r,n){let s;if(Array.isArray(t))s=cs.fromArray(t);else if(typeof t=="string"){let l=e;if(!l){let f=cs.rawSplit(t);l=Or.getBestVersionForData(f,r)}s=cs.fromString(t,l||40)}else throw new Error("Invalid data");let i=Or.getBestVersionForData(s,r);if(!i)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=i;else if(e<i)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+i+`.
`);let o=Zp(e,r,s),a=Ir.getSymbolSize(e),c=new Fp(a);return Yp(c,e),Kp(c),Jp(c,e),us(c,r,0),e>=7&&Qp(c,e),Xp(c,o),isNaN(n)&&(n=ls.getBestMask(c,us.bind(null,c,r))),ls.applyMask(n,c),us(c,r,n),{modules:c,version:e,errorCorrectionLevel:r,maskPattern:n,segments:s}}cc.create=function(e,r){if(typeof e>"u"||e==="")throw new Error("No input text");let n=as.M,s,i;return typeof r<"u"&&(n=as.from(r.errorCorrectionLevel,as.M),s=Or.from(r.version),i=ls.from(r.maskPattern),r.toSJISFunc&&Ir.setToSJISFunction(r.toSJISFunc)),tm(e,s,n,i)}});var ds=g((Q0,lc)=>{"use strict";var rm=require("util"),uc=require("stream"),X=lc.exports=function(){uc.call(this),this._buffers=[],this._buffered=0,this._reads=[],this._paused=!1,this._encoding="utf8",this.writable=!0};rm.inherits(X,uc);X.prototype.read=function(t,e){this._reads.push({length:Math.abs(t),allowLess:t<0,func:e}),process.nextTick(function(){this._process(),this._paused&&this._reads&&this._reads.length>0&&(this._paused=!1,this.emit("drain"))}.bind(this))};X.prototype.write=function(t,e){if(!this.writable)return this.emit("error",new Error("Stream not writable")),!1;let r;return Buffer.isBuffer(t)?r=t:r=Buffer.from(t,e||this._encoding),this._buffers.push(r),this._buffered+=r.length,this._process(),this._reads&&this._reads.length===0&&(this._paused=!0),this.writable&&!this._paused};X.prototype.end=function(t,e){t&&this.write(t,e),this.writable=!1,this._buffers&&(this._buffers.length===0?this._end():(this._buffers.push(null),this._process()))};X.prototype.destroySoon=X.prototype.end;X.prototype._end=function(){this._reads.length>0&&this.emit("error",new Error("Unexpected end of input")),this.destroy()};X.prototype.destroy=function(){this._buffers&&(this.writable=!1,this._reads=null,this._buffers=null,this.emit("close"))};X.prototype._processReadAllowingLess=function(t){this._reads.shift();let e=this._buffers[0];e.length>t.length?(this._buffered-=t.length,this._buffers[0]=e.slice(t.length),t.func.call(this,e.slice(0,t.length))):(this._buffered-=e.length,this._buffers.shift(),t.func.call(this,e))};X.prototype._processRead=function(t){this._reads.shift();let e=0,r=0,n=Buffer.alloc(t.length);for(;e<t.length;){let s=this._buffers[r++],i=Math.min(s.length,t.length-e);s.copy(n,e,0,i),e+=i,i!==s.length&&(this._buffers[--r]=s.slice(i))}r>0&&this._buffers.splice(0,r),this._buffered-=t.length,t.func.call(this,n)};X.prototype._process=function(){try{for(;this._buffered>0&&this._reads&&this._reads.length>0;){let t=this._reads[0];if(t.allowLess)this._processReadAllowingLess(t);else if(this._buffered>=t.length)this._processRead(t);else break}this._buffers&&!this.writable&&this._end()}catch(t){this.emit("error",t)}}});var ms=g(ps=>{"use strict";var de=[{x:[0],y:[0]},{x:[4],y:[0]},{x:[0,4],y:[4]},{x:[2,6],y:[0,4]},{x:[0,2,4,6],y:[2,6]},{x:[1,3,5,7],y:[0,2,4,6]},{x:[0,1,2,3,4,5,6,7],y:[1,3,5,7]}];ps.getImagePasses=function(t,e){let r=[],n=t%8,s=e%8,i=(t-n)/8,o=(e-s)/8;for(let a=0;a<de.length;a++){let c=de[a],l=i*c.x.length,f=o*c.y.length;for(let m=0;m<c.x.length&&c.x[m]<n;m++)l++;for(let m=0;m<c.y.length&&c.y[m]<s;m++)f++;l>0&&f>0&&r.push({width:l,height:f,index:a})}return r};ps.getInterlaceIterator=function(t){return function(e,r,n){let s=e%de[n].x.length,i=(e-s)/de[n].x.length*8+de[n].x[s],o=r%de[n].y.length,a=(r-o)/de[n].y.length*8+de[n].y[o];return i*4+a*t*4}}});var gs=g((Z0,hc)=>{"use strict";hc.exports=function(e,r,n){let s=e+r-n,i=Math.abs(s-e),o=Math.abs(s-r),a=Math.abs(s-n);return i<=o&&i<=a?e:o<=a?r:n}});var ys=g((eE,dc)=>{"use strict";var nm=ms(),sm=gs();function fc(t,e,r){let n=t*e;return r!==8&&(n=Math.ceil(n/(8/r))),n}var ze=dc.exports=function(t,e){let r=t.width,n=t.height,s=t.interlace,i=t.bpp,o=t.depth;if(this.read=e.read,this.write=e.write,this.complete=e.complete,this._imageIndex=0,this._images=[],s){let a=nm.getImagePasses(r,n);for(let c=0;c<a.length;c++)this._images.push({byteWidth:fc(a[c].width,i,o),height:a[c].height,lineIndex:0})}else this._images.push({byteWidth:fc(r,i,o),height:n,lineIndex:0});o===8?this._xComparison=i:o===16?this._xComparison=i*2:this._xComparison=1};ze.prototype.start=function(){this.read(this._images[this._imageIndex].byteWidth+1,this._reverseFilterLine.bind(this))};ze.prototype._unFilterType1=function(t,e,r){let n=this._xComparison,s=n-1;for(let i=0;i<r;i++){let o=t[1+i],a=i>s?e[i-n]:0;e[i]=o+a}};ze.prototype._unFilterType2=function(t,e,r){let n=this._lastLine;for(let s=0;s<r;s++){let i=t[1+s],o=n?n[s]:0;e[s]=i+o}};ze.prototype._unFilterType3=function(t,e,r){let n=this._xComparison,s=n-1,i=this._lastLine;for(let o=0;o<r;o++){let a=t[1+o],c=i?i[o]:0,l=o>s?e[o-n]:0,f=Math.floor((l+c)/2);e[o]=a+f}};ze.prototype._unFilterType4=function(t,e,r){let n=this._xComparison,s=n-1,i=this._lastLine;for(let o=0;o<r;o++){let a=t[1+o],c=i?i[o]:0,l=o>s?e[o-n]:0,f=o>s&&i?i[o-n]:0,m=sm(l,c,f);e[o]=a+m}};ze.prototype._reverseFilterLine=function(t){let e=t[0],r,n=this._images[this._imageIndex],s=n.byteWidth;if(e===0)r=t.slice(1,s+1);else switch(r=Buffer.alloc(s),e){case 1:this._unFilterType1(t,r,s);break;case 2:this._unFilterType2(t,r,s);break;case 3:this._unFilterType3(t,r,s);break;case 4:this._unFilterType4(t,r,s);break;default:throw new Error("Unrecognised filter type - "+e)}this.write(r),n.lineIndex++,n.lineIndex>=n.height?(this._lastLine=null,this._imageIndex++,n=this._images[this._imageIndex]):this._lastLine=r,n?this.read(n.byteWidth+1,this._reverseFilterLine.bind(this)):(this._lastLine=null,this.complete())}});var gc=g((tE,mc)=>{"use strict";var im=require("util"),pc=ds(),om=ys(),am=mc.exports=function(t){pc.call(this);let e=[],r=this;this._filter=new om(t,{read:this.read.bind(this),write:function(n){e.push(n)},complete:function(){r.emit("complete",Buffer.concat(e))}}),this._filter.start()};im.inherits(am,pc)});var Ge=g((rE,yc)=>{"use strict";yc.exports={PNG_SIGNATURE:[137,80,78,71,13,10,26,10],TYPE_IHDR:1229472850,TYPE_IEND:1229278788,TYPE_IDAT:1229209940,TYPE_PLTE:1347179589,TYPE_tRNS:1951551059,TYPE_gAMA:1732332865,COLORTYPE_GRAYSCALE:0,COLORTYPE_PALETTE:1,COLORTYPE_COLOR:2,COLORTYPE_ALPHA:4,COLORTYPE_PALETTE_COLOR:3,COLORTYPE_COLOR_ALPHA:6,COLORTYPE_TO_BPP_MAP:{0:1,2:3,3:1,4:2,6:4},GAMMA_DIVISION:1e5}});var ws=g((nE,_c)=>{"use strict";var _s=[];(function(){for(let t=0;t<256;t++){let e=t;for(let r=0;r<8;r++)e&1?e=3988292384^e>>>1:e=e>>>1;_s[t]=e}})();var bs=_c.exports=function(){this._crc=-1};bs.prototype.write=function(t){for(let e=0;e<t.length;e++)this._crc=_s[(this._crc^t[e])&255]^this._crc>>>8;return!0};bs.prototype.crc32=function(){return this._crc^-1};bs.crc32=function(t){let e=-1;for(let r=0;r<t.length;r++)e=_s[(e^t[r])&255]^e>>>8;return e^-1}});var Es=g((sE,bc)=>{"use strict";var v=Ge(),cm=ws(),M=bc.exports=function(t,e){this._options=t,t.checkCRC=t.checkCRC!==!1,this._hasIHDR=!1,this._hasIEND=!1,this._emittedHeadersFinished=!1,this._palette=[],this._colorType=0,this._chunks={},this._chunks[v.TYPE_IHDR]=this._handleIHDR.bind(this),this._chunks[v.TYPE_IEND]=this._handleIEND.bind(this),this._chunks[v.TYPE_IDAT]=this._handleIDAT.bind(this),this._chunks[v.TYPE_PLTE]=this._handlePLTE.bind(this),this._chunks[v.TYPE_tRNS]=this._handleTRNS.bind(this),this._chunks[v.TYPE_gAMA]=this._handleGAMA.bind(this),this.read=e.read,this.error=e.error,this.metadata=e.metadata,this.gamma=e.gamma,this.transColor=e.transColor,this.palette=e.palette,this.parsed=e.parsed,this.inflateData=e.inflateData,this.finished=e.finished,this.simpleTransparency=e.simpleTransparency,this.headersFinished=e.headersFinished||function(){}};M.prototype.start=function(){this.read(v.PNG_SIGNATURE.length,this._parseSignature.bind(this))};M.prototype._parseSignature=function(t){let e=v.PNG_SIGNATURE;for(let r=0;r<e.length;r++)if(t[r]!==e[r]){this.error(new Error("Invalid file signature"));return}this.read(8,this._parseChunkBegin.bind(this))};M.prototype._parseChunkBegin=function(t){let e=t.readUInt32BE(0),r=t.readUInt32BE(4),n="";for(let i=4;i<8;i++)n+=String.fromCharCode(t[i]);let s=!!(t[4]&32);if(!this._hasIHDR&&r!==v.TYPE_IHDR){this.error(new Error("Expected IHDR on beggining"));return}if(this._crc=new cm,this._crc.write(Buffer.from(n)),this._chunks[r])return this._chunks[r](e);if(!s){this.error(new Error("Unsupported critical chunk type "+n));return}this.read(e+4,this._skipChunk.bind(this))};M.prototype._skipChunk=function(){this.read(8,this._parseChunkBegin.bind(this))};M.prototype._handleChunkEnd=function(){this.read(4,this._parseChunkEnd.bind(this))};M.prototype._parseChunkEnd=function(t){let e=t.readInt32BE(0),r=this._crc.crc32();if(this._options.checkCRC&&r!==e){this.error(new Error("Crc error - "+e+" - "+r));return}this._hasIEND||this.read(8,this._parseChunkBegin.bind(this))};M.prototype._handleIHDR=function(t){this.read(t,this._parseIHDR.bind(this))};M.prototype._parseIHDR=function(t){this._crc.write(t);let e=t.readUInt32BE(0),r=t.readUInt32BE(4),n=t[8],s=t[9],i=t[10],o=t[11],a=t[12];if(n!==8&&n!==4&&n!==2&&n!==1&&n!==16){this.error(new Error("Unsupported bit depth "+n));return}if(!(s in v.COLORTYPE_TO_BPP_MAP)){this.error(new Error("Unsupported color type"));return}if(i!==0){this.error(new Error("Unsupported compression method"));return}if(o!==0){this.error(new Error("Unsupported filter method"));return}if(a!==0&&a!==1){this.error(new Error("Unsupported interlace method"));return}this._colorType=s;let c=v.COLORTYPE_TO_BPP_MAP[this._colorType];this._hasIHDR=!0,this.metadata({width:e,height:r,depth:n,interlace:!!a,palette:!!(s&v.COLORTYPE_PALETTE),color:!!(s&v.COLORTYPE_COLOR),alpha:!!(s&v.COLORTYPE_ALPHA),bpp:c,colorType:s}),this._handleChunkEnd()};M.prototype._handlePLTE=function(t){this.read(t,this._parsePLTE.bind(this))};M.prototype._parsePLTE=function(t){this._crc.write(t);let e=Math.floor(t.length/3);for(let r=0;r<e;r++)this._palette.push([t[r*3],t[r*3+1],t[r*3+2],255]);this.palette(this._palette),this._handleChunkEnd()};M.prototype._handleTRNS=function(t){this.simpleTransparency(),this.read(t,this._parseTRNS.bind(this))};M.prototype._parseTRNS=function(t){if(this._crc.write(t),this._colorType===v.COLORTYPE_PALETTE_COLOR){if(this._palette.length===0){this.error(new Error("Transparency chunk must be after palette"));return}if(t.length>this._palette.length){this.error(new Error("More transparent colors than palette size"));return}for(let e=0;e<t.length;e++)this._palette[e][3]=t[e];this.palette(this._palette)}this._colorType===v.COLORTYPE_GRAYSCALE&&this.transColor([t.readUInt16BE(0)]),this._colorType===v.COLORTYPE_COLOR&&this.transColor([t.readUInt16BE(0),t.readUInt16BE(2),t.readUInt16BE(4)]),this._handleChunkEnd()};M.prototype._handleGAMA=function(t){this.read(t,this._parseGAMA.bind(this))};M.prototype._parseGAMA=function(t){this._crc.write(t),this.gamma(t.readUInt32BE(0)/v.GAMMA_DIVISION),this._handleChunkEnd()};M.prototype._handleIDAT=function(t){this._emittedHeadersFinished||(this._emittedHeadersFinished=!0,this.headersFinished()),this.read(-t,this._parseIDAT.bind(this,t))};M.prototype._parseIDAT=function(t,e){if(this._crc.write(e),this._colorType===v.COLORTYPE_PALETTE_COLOR&&this._palette.length===0)throw new Error("Expected palette not found");this.inflateData(e);let r=t-e.length;r>0?this._handleIDAT(r):this._handleChunkEnd()};M.prototype._handleIEND=function(t){this.read(t,this._parseIEND.bind(this))};M.prototype._parseIEND=function(t){this._crc.write(t),this._hasIEND=!0,this._handleChunkEnd(),this.finished&&this.finished()}});var Cs=g(Ec=>{"use strict";var wc=ms(),um=[function(){},function(t,e,r,n){if(n===e.length)throw new Error("Ran out of data");let s=e[n];t[r]=s,t[r+1]=s,t[r+2]=s,t[r+3]=255},function(t,e,r,n){if(n+1>=e.length)throw new Error("Ran out of data");let s=e[n];t[r]=s,t[r+1]=s,t[r+2]=s,t[r+3]=e[n+1]},function(t,e,r,n){if(n+2>=e.length)throw new Error("Ran out of data");t[r]=e[n],t[r+1]=e[n+1],t[r+2]=e[n+2],t[r+3]=255},function(t,e,r,n){if(n+3>=e.length)throw new Error("Ran out of data");t[r]=e[n],t[r+1]=e[n+1],t[r+2]=e[n+2],t[r+3]=e[n+3]}],lm=[function(){},function(t,e,r,n){let s=e[0];t[r]=s,t[r+1]=s,t[r+2]=s,t[r+3]=n},function(t,e,r){let n=e[0];t[r]=n,t[r+1]=n,t[r+2]=n,t[r+3]=e[1]},function(t,e,r,n){t[r]=e[0],t[r+1]=e[1],t[r+2]=e[2],t[r+3]=n},function(t,e,r){t[r]=e[0],t[r+1]=e[1],t[r+2]=e[2],t[r+3]=e[3]}];function hm(t,e){let r=[],n=0;function s(){if(n===t.length)throw new Error("Ran out of data");let i=t[n];n++;let o,a,c,l,f,m,p,y;switch(e){default:throw new Error("unrecognised depth");case 16:p=t[n],n++,r.push((i<<8)+p);break;case 4:p=i&15,y=i>>4,r.push(y,p);break;case 2:f=i&3,m=i>>2&3,p=i>>4&3,y=i>>6&3,r.push(y,p,m,f);break;case 1:o=i&1,a=i>>1&1,c=i>>2&1,l=i>>3&1,f=i>>4&1,m=i>>5&1,p=i>>6&1,y=i>>7&1,r.push(y,p,m,f,l,c,a,o);break}}return{get:function(i){for(;r.length<i;)s();let o=r.slice(0,i);return r=r.slice(i),o},resetAfterLine:function(){r.length=0},end:function(){if(n!==t.length)throw new Error("extra data found")}}}function fm(t,e,r,n,s,i){let o=t.width,a=t.height,c=t.index;for(let l=0;l<a;l++)for(let f=0;f<o;f++){let m=r(f,l,c);um[n](e,s,m,i),i+=n}return i}function dm(t,e,r,n,s,i){let o=t.width,a=t.height,c=t.index;for(let l=0;l<a;l++){for(let f=0;f<o;f++){let m=s.get(n),p=r(f,l,c);lm[n](e,m,p,i)}s.resetAfterLine()}}Ec.dataToBitMap=function(t,e){let r=e.width,n=e.height,s=e.depth,i=e.bpp,o=e.interlace,a;s!==8&&(a=hm(t,s));let c;s<=8?c=Buffer.alloc(r*n*4):c=new Uint16Array(r*n*4);let l=Math.pow(2,s)-1,f=0,m,p;if(o)m=wc.getImagePasses(r,n),p=wc.getInterlaceIterator(r,n);else{let y=0;p=function(){let _=y;return y+=4,_},m=[{width:r,height:n}]}for(let y=0;y<m.length;y++)s===8?f=fm(m[y],c,p,i,t,f):dm(m[y],c,p,i,a,l);if(s===8){if(f!==t.length)throw new Error("extra data found")}else a.end();return c}});var Ss=g((oE,Cc)=>{"use strict";function pm(t,e,r,n,s){let i=0;for(let o=0;o<n;o++)for(let a=0;a<r;a++){let c=s[t[i]];if(!c)throw new Error("index "+t[i]+" not in palette");for(let l=0;l<4;l++)e[i+l]=c[l];i+=4}}function mm(t,e,r,n,s){let i=0;for(let o=0;o<n;o++)for(let a=0;a<r;a++){let c=!1;if(s.length===1?s[0]===t[i]&&(c=!0):s[0]===t[i]&&s[1]===t[i+1]&&s[2]===t[i+2]&&(c=!0),c)for(let l=0;l<4;l++)e[i+l]=0;i+=4}}function gm(t,e,r,n,s){let i=255,o=Math.pow(2,s)-1,a=0;for(let c=0;c<n;c++)for(let l=0;l<r;l++){for(let f=0;f<4;f++)e[a+f]=Math.floor(t[a+f]*i/o+.5);a+=4}}Cc.exports=function(t,e){let r=e.depth,n=e.width,s=e.height,i=e.colorType,o=e.transColor,a=e.palette,c=t;return i===3?pm(t,c,n,s,a):(o&&mm(t,c,n,s,o),r!==8&&(r===16&&(c=Buffer.alloc(n*s*4)),gm(t,c,n,s,r))),c}});var Tc=g((aE,xc)=>{"use strict";var ym=require("util"),xs=require("zlib"),Sc=ds(),_m=gc(),bm=Es(),wm=Cs(),Em=Ss(),Z=xc.exports=function(t){Sc.call(this),this._parser=new bm(t,{read:this.read.bind(this),error:this._handleError.bind(this),metadata:this._handleMetaData.bind(this),gamma:this.emit.bind(this,"gamma"),palette:this._handlePalette.bind(this),transColor:this._handleTransColor.bind(this),finished:this._finished.bind(this),inflateData:this._inflateData.bind(this),simpleTransparency:this._simpleTransparency.bind(this),headersFinished:this._headersFinished.bind(this)}),this._options=t,this.writable=!0,this._parser.start()};ym.inherits(Z,Sc);Z.prototype._handleError=function(t){this.emit("error",t),this.writable=!1,this.destroy(),this._inflate&&this._inflate.destroy&&this._inflate.destroy(),this._filter&&(this._filter.destroy(),this._filter.on("error",function(){})),this.errord=!0};Z.prototype._inflateData=function(t){if(!this._inflate)if(this._bitmapInfo.interlace)this._inflate=xs.createInflate(),this._inflate.on("error",this.emit.bind(this,"error")),this._filter.on("complete",this._complete.bind(this)),this._inflate.pipe(this._filter);else{let r=((this._bitmapInfo.width*this._bitmapInfo.bpp*this._bitmapInfo.depth+7>>3)+1)*this._bitmapInfo.height,n=Math.max(r,xs.Z_MIN_CHUNK);this._inflate=xs.createInflate({chunkSize:n});let s=r,i=this.emit.bind(this,"error");this._inflate.on("error",function(a){s&&i(a)}),this._filter.on("complete",this._complete.bind(this));let o=this._filter.write.bind(this._filter);this._inflate.on("data",function(a){s&&(a.length>s&&(a=a.slice(0,s)),s-=a.length,o(a))}),this._inflate.on("end",this._filter.end.bind(this._filter))}this._inflate.write(t)};Z.prototype._handleMetaData=function(t){this._metaData=t,this._bitmapInfo=Object.create(t),this._filter=new _m(this._bitmapInfo)};Z.prototype._handleTransColor=function(t){this._bitmapInfo.transColor=t};Z.prototype._handlePalette=function(t){this._bitmapInfo.palette=t};Z.prototype._simpleTransparency=function(){this._metaData.alpha=!0};Z.prototype._headersFinished=function(){this.emit("metadata",this._metaData)};Z.prototype._finished=function(){this.errord||(this._inflate?this._inflate.end():this.emit("error","No Inflate block"))};Z.prototype._complete=function(t){if(this.errord)return;let e;try{let r=wm.dataToBitMap(t,this._bitmapInfo);e=Em(r,this._bitmapInfo),r=null}catch(r){this._handleError(r);return}this.emit("parsed",e)}});var Pc=g((cE,Rc)=>{"use strict";var K=Ge();Rc.exports=function(t,e,r,n){let s=[K.COLORTYPE_COLOR_ALPHA,K.COLORTYPE_ALPHA].indexOf(n.colorType)!==-1;if(n.colorType===n.inputColorType){let _=function(){let d=new ArrayBuffer(2);return new DataView(d).setInt16(0,256,!0),new Int16Array(d)[0]!==256}();if(n.bitDepth===8||n.bitDepth===16&&_)return t}let i=n.bitDepth!==16?t:new Uint16Array(t.buffer),o=255,a=K.COLORTYPE_TO_BPP_MAP[n.inputColorType];a===4&&!n.inputHasAlpha&&(a=3);let c=K.COLORTYPE_TO_BPP_MAP[n.colorType];n.bitDepth===16&&(o=65535,c*=2);let l=Buffer.alloc(e*r*c),f=0,m=0,p=n.bgColor||{};p.red===void 0&&(p.red=o),p.green===void 0&&(p.green=o),p.blue===void 0&&(p.blue=o);function y(){let _,d,C,w=o;switch(n.inputColorType){case K.COLORTYPE_COLOR_ALPHA:w=i[f+3],_=i[f],d=i[f+1],C=i[f+2];break;case K.COLORTYPE_COLOR:_=i[f],d=i[f+1],C=i[f+2];break;case K.COLORTYPE_ALPHA:w=i[f+1],_=i[f],d=_,C=_;break;case K.COLORTYPE_GRAYSCALE:_=i[f],d=_,C=_;break;default:throw new Error("input color type:"+n.inputColorType+" is not supported at present")}return n.inputHasAlpha&&(s||(w/=o,_=Math.min(Math.max(Math.round((1-w)*p.red+w*_),0),o),d=Math.min(Math.max(Math.round((1-w)*p.green+w*d),0),o),C=Math.min(Math.max(Math.round((1-w)*p.blue+w*C),0),o))),{red:_,green:d,blue:C,alpha:w}}for(let _=0;_<r;_++)for(let d=0;d<e;d++){let C=y(i,f);switch(n.colorType){case K.COLORTYPE_COLOR_ALPHA:case K.COLORTYPE_COLOR:n.bitDepth===8?(l[m]=C.red,l[m+1]=C.green,l[m+2]=C.blue,s&&(l[m+3]=C.alpha)):(l.writeUInt16BE(C.red,m),l.writeUInt16BE(C.green,m+2),l.writeUInt16BE(C.blue,m+4),s&&l.writeUInt16BE(C.alpha,m+6));break;case K.COLORTYPE_ALPHA:case K.COLORTYPE_GRAYSCALE:{let w=(C.red+C.green+C.blue)/3;n.bitDepth===8?(l[m]=w,s&&(l[m+1]=C.alpha)):(l.writeUInt16BE(w,m),s&&l.writeUInt16BE(C.alpha,m+2));break}default:throw new Error("unrecognised color Type "+n.colorType)}f+=a,m+=c}return l}});var Oc=g((uE,kc)=>{"use strict";var Ac=gs();function Cm(t,e,r,n,s){for(let i=0;i<r;i++)n[s+i]=t[e+i]}function Sm(t,e,r){let n=0,s=e+r;for(let i=e;i<s;i++)n+=Math.abs(t[i]);return n}function xm(t,e,r,n,s,i){for(let o=0;o<r;o++){let a=o>=i?t[e+o-i]:0,c=t[e+o]-a;n[s+o]=c}}function Tm(t,e,r,n){let s=0;for(let i=0;i<r;i++){let o=i>=n?t[e+i-n]:0,a=t[e+i]-o;s+=Math.abs(a)}return s}function Rm(t,e,r,n,s){for(let i=0;i<r;i++){let o=e>0?t[e+i-r]:0,a=t[e+i]-o;n[s+i]=a}}function Pm(t,e,r){let n=0,s=e+r;for(let i=e;i<s;i++){let o=e>0?t[i-r]:0,a=t[i]-o;n+=Math.abs(a)}return n}function Am(t,e,r,n,s,i){for(let o=0;o<r;o++){let a=o>=i?t[e+o-i]:0,c=e>0?t[e+o-r]:0,l=t[e+o]-(a+c>>1);n[s+o]=l}}function km(t,e,r,n){let s=0;for(let i=0;i<r;i++){let o=i>=n?t[e+i-n]:0,a=e>0?t[e+i-r]:0,c=t[e+i]-(o+a>>1);s+=Math.abs(c)}return s}function Om(t,e,r,n,s,i){for(let o=0;o<r;o++){let a=o>=i?t[e+o-i]:0,c=e>0?t[e+o-r]:0,l=e>0&&o>=i?t[e+o-(r+i)]:0,f=t[e+o]-Ac(a,c,l);n[s+o]=f}}function Im(t,e,r,n){let s=0;for(let i=0;i<r;i++){let o=i>=n?t[e+i-n]:0,a=e>0?t[e+i-r]:0,c=e>0&&i>=n?t[e+i-(r+n)]:0,l=t[e+i]-Ac(o,a,c);s+=Math.abs(l)}return s}var Lm={0:Cm,1:xm,2:Rm,3:Am,4:Om},qm={0:Sm,1:Tm,2:Pm,3:km,4:Im};kc.exports=function(t,e,r,n,s){let i;if(!("filterType"in n)||n.filterType===-1)i=[0,1,2,3,4];else if(typeof n.filterType=="number")i=[n.filterType];else throw new Error("unrecognised filter types");n.bitDepth===16&&(s*=2);let o=e*s,a=0,c=0,l=Buffer.alloc((o+1)*r),f=i[0];for(let m=0;m<r;m++){if(i.length>1){let p=1/0;for(let y=0;y<i.length;y++){let _=qm[i[y]](t,c,o,s);_<p&&(f=i[y],p=_)}}l[a]=f,a++,Lm[f](t,c,o,l,a,s),a+=o,c+=o}return l}});var Ts=g((lE,Ic)=>{"use strict";var D=Ge(),Nm=ws(),Bm=Pc(),vm=Oc(),jm=require("zlib"),pe=Ic.exports=function(t){if(this._options=t,t.deflateChunkSize=t.deflateChunkSize||32*1024,t.deflateLevel=t.deflateLevel!=null?t.deflateLevel:9,t.deflateStrategy=t.deflateStrategy!=null?t.deflateStrategy:3,t.inputHasAlpha=t.inputHasAlpha!=null?t.inputHasAlpha:!0,t.deflateFactory=t.deflateFactory||jm.createDeflate,t.bitDepth=t.bitDepth||8,t.colorType=typeof t.colorType=="number"?t.colorType:D.COLORTYPE_COLOR_ALPHA,t.inputColorType=typeof t.inputColorType=="number"?t.inputColorType:D.COLORTYPE_COLOR_ALPHA,[D.COLORTYPE_GRAYSCALE,D.COLORTYPE_COLOR,D.COLORTYPE_COLOR_ALPHA,D.COLORTYPE_ALPHA].indexOf(t.colorType)===-1)throw new Error("option color type:"+t.colorType+" is not supported at present");if([D.COLORTYPE_GRAYSCALE,D.COLORTYPE_COLOR,D.COLORTYPE_COLOR_ALPHA,D.COLORTYPE_ALPHA].indexOf(t.inputColorType)===-1)throw new Error("option input color type:"+t.inputColorType+" is not supported at present");if(t.bitDepth!==8&&t.bitDepth!==16)throw new Error("option bit depth:"+t.bitDepth+" is not supported at present")};pe.prototype.getDeflateOptions=function(){return{chunkSize:this._options.deflateChunkSize,level:this._options.deflateLevel,strategy:this._options.deflateStrategy}};pe.prototype.createDeflate=function(){return this._options.deflateFactory(this.getDeflateOptions())};pe.prototype.filterData=function(t,e,r){let n=Bm(t,e,r,this._options),s=D.COLORTYPE_TO_BPP_MAP[this._options.colorType];return vm(n,e,r,this._options,s)};pe.prototype._packChunk=function(t,e){let r=e?e.length:0,n=Buffer.alloc(r+12);return n.writeUInt32BE(r,0),n.writeUInt32BE(t,4),e&&e.copy(n,8),n.writeInt32BE(Nm.crc32(n.slice(4,n.length-4)),n.length-4),n};pe.prototype.packGAMA=function(t){let e=Buffer.alloc(4);return e.writeUInt32BE(Math.floor(t*D.GAMMA_DIVISION),0),this._packChunk(D.TYPE_gAMA,e)};pe.prototype.packIHDR=function(t,e){let r=Buffer.alloc(13);return r.writeUInt32BE(t,0),r.writeUInt32BE(e,4),r[8]=this._options.bitDepth,r[9]=this._options.colorType,r[10]=0,r[11]=0,r[12]=0,this._packChunk(D.TYPE_IHDR,r)};pe.prototype.packIDAT=function(t){return this._packChunk(D.TYPE_IDAT,t)};pe.prototype.packIEND=function(){return this._packChunk(D.TYPE_IEND,null)}});var Bc=g((hE,Nc)=>{"use strict";var Mm=require("util"),Lc=require("stream"),Hm=Ge(),Um=Ts(),qc=Nc.exports=function(t){Lc.call(this);let e=t||{};this._packer=new Um(e),this._deflate=this._packer.createDeflate(),this.readable=!0};Mm.inherits(qc,Lc);qc.prototype.pack=function(t,e,r,n){this.emit("data",Buffer.from(Hm.PNG_SIGNATURE)),this.emit("data",this._packer.packIHDR(e,r)),n&&this.emit("data",this._packer.packGAMA(n));let s=this._packer.filterData(t,e,r);this._deflate.on("error",this.emit.bind(this,"error")),this._deflate.on("data",function(i){this.emit("data",this._packer.packIDAT(i))}.bind(this)),this._deflate.on("end",function(){this.emit("data",this._packer.packIEND()),this.emit("end")}.bind(this)),this._deflate.end(s)}});var Dc=g((qt,Uc)=>{"use strict";var vc=require("assert").ok,Ve=require("zlib"),Dm=require("util"),jc=require("buffer").kMaxLength;function xe(t){if(!(this instanceof xe))return new xe(t);t&&t.chunkSize<Ve.Z_MIN_CHUNK&&(t.chunkSize=Ve.Z_MIN_CHUNK),Ve.Inflate.call(this,t),this._offset=this._offset===void 0?this._outOffset:this._offset,this._buffer=this._buffer||this._outBuffer,t&&t.maxLength!=null&&(this._maxLength=t.maxLength)}function Fm(t){return new xe(t)}function Mc(t,e){e&&process.nextTick(e),t._handle&&(t._handle.close(),t._handle=null)}xe.prototype._processChunk=function(t,e,r){if(typeof r=="function")return Ve.Inflate._processChunk.call(this,t,e,r);let n=this,s=t&&t.length,i=this._chunkSize-this._offset,o=this._maxLength,a=0,c=[],l=0,f;this.on("error",function(_){f=_});function m(_,d){if(n._hadError)return;let C=i-d;if(vc(C>=0,"have should not go down"),C>0){let w=n._buffer.slice(n._offset,n._offset+C);if(n._offset+=C,w.length>o&&(w=w.slice(0,o)),c.push(w),l+=w.length,o-=w.length,o===0)return!1}return(d===0||n._offset>=n._chunkSize)&&(i=n._chunkSize,n._offset=0,n._buffer=Buffer.allocUnsafe(n._chunkSize)),d===0?(a+=s-_,s=_,!0):!1}vc(this._handle,"zlib binding closed");let p;do p=this._handle.writeSync(e,t,a,s,this._buffer,this._offset,i),p=p||this._writeState;while(!this._hadError&&m(p[0],p[1]));if(this._hadError)throw f;if(l>=jc)throw Mc(this),new RangeError("Cannot create final Buffer. It would be larger than 0x"+jc.toString(16)+" bytes");let y=Buffer.concat(c,l);return Mc(this),y};Dm.inherits(xe,Ve.Inflate);function $m(t,e){if(typeof e=="string"&&(e=Buffer.from(e)),!(e instanceof Buffer))throw new TypeError("Not a string or buffer");let r=t._finishFlushFlag;return r==null&&(r=Ve.Z_FINISH),t._processChunk(e,r)}function Hc(t,e){return $m(new xe(e),t)}Uc.exports=qt=Hc;qt.Inflate=xe;qt.createInflate=Fm;qt.inflateSync=Hc});var Rs=g((fE,$c)=>{"use strict";var Fc=$c.exports=function(t){this._buffer=t,this._reads=[]};Fc.prototype.read=function(t,e){this._reads.push({length:Math.abs(t),allowLess:t<0,func:e})};Fc.prototype.process=function(){for(;this._reads.length>0&&this._buffer.length;){let t=this._reads[0];if(this._buffer.length&&(this._buffer.length>=t.length||t.allowLess)){this._reads.shift();let e=this._buffer;this._buffer=e.slice(t.length),t.func.call(this,e.slice(0,t.length))}else break}if(this._reads.length>0)return new Error("There are some read requests waitng on finished stream");if(this._buffer.length>0)return new Error("unrecognised content at end of stream")}});var Gc=g(zc=>{"use strict";var zm=Rs(),Gm=ys();zc.process=function(t,e){let r=[],n=new zm(t);return new Gm(e,{read:n.read.bind(n),write:function(i){r.push(i)},complete:function(){}}).start(),n.process(),Buffer.concat(r)}});var Kc=g((pE,Yc)=>{"use strict";var Vc=!0,Wc=require("zlib"),Vm=Dc();Wc.deflateSync||(Vc=!1);var Wm=Rs(),Ym=Gc(),Km=Es(),Jm=Cs(),Qm=Ss();Yc.exports=function(t,e){if(!Vc)throw new Error("To use the sync capability of this library in old node versions, please pin pngjs to v2.3.0");let r;function n(x){r=x}let s;function i(x){s=x}function o(x){s.transColor=x}function a(x){s.palette=x}function c(){s.alpha=!0}let l;function f(x){l=x}let m=[];function p(x){m.push(x)}let y=new Wm(t);if(new Km(e,{read:y.read.bind(y),error:n,metadata:i,gamma:f,palette:a,transColor:o,inflateData:p,simpleTransparency:c}).start(),y.process(),r)throw r;let d=Buffer.concat(m);m.length=0;let C;if(s.interlace)C=Wc.inflateSync(d);else{let R=((s.width*s.bpp*s.depth+7>>3)+1)*s.height;C=Vm(d,{chunkSize:R,maxLength:R})}if(d=null,!C||!C.length)throw new Error("bad png - invalid inflate data response");let w=Ym.process(C,s);d=null;let T=Jm.dataToBitMap(w,s);w=null;let S=Qm(T,s);return s.data=S,s.gamma=l||0,s}});var Zc=g((mE,Xc)=>{"use strict";var Jc=!0,Qc=require("zlib");Qc.deflateSync||(Jc=!1);var Xm=Ge(),Zm=Ts();Xc.exports=function(t,e){if(!Jc)throw new Error("To use the sync capability of this library in old node versions, please pin pngjs to v2.3.0");let r=e||{},n=new Zm(r),s=[];s.push(Buffer.from(Xm.PNG_SIGNATURE)),s.push(n.packIHDR(t.width,t.height)),t.gamma&&s.push(n.packGAMA(t.gamma));let i=n.filterData(t.data,t.width,t.height),o=Qc.deflateSync(i,n.getDeflateOptions());if(i=null,!o||!o.length)throw new Error("bad png - invalid compressed data response");return s.push(n.packIDAT(o)),s.push(n.packIEND()),Buffer.concat(s)}});var eu=g(Ps=>{"use strict";var eg=Kc(),tg=Zc();Ps.read=function(t,e){return eg(t,e||{})};Ps.write=function(t,e){return tg(t,e)}});var nu=g(ru=>{"use strict";var rg=require("util"),tu=require("stream"),ng=Tc(),sg=Bc(),ig=eu(),z=ru.PNG=function(t){tu.call(this),t=t||{},this.width=t.width|0,this.height=t.height|0,this.data=this.width>0&&this.height>0?Buffer.alloc(4*this.width*this.height):null,t.fill&&this.data&&this.data.fill(0),this.gamma=0,this.readable=this.writable=!0,this._parser=new ng(t),this._parser.on("error",this.emit.bind(this,"error")),this._parser.on("close",this._handleClose.bind(this)),this._parser.on("metadata",this._metadata.bind(this)),this._parser.on("gamma",this._gamma.bind(this)),this._parser.on("parsed",function(e){this.data=e,this.emit("parsed",e)}.bind(this)),this._packer=new sg(t),this._packer.on("data",this.emit.bind(this,"data")),this._packer.on("end",this.emit.bind(this,"end")),this._parser.on("close",this._handleClose.bind(this)),this._packer.on("error",this.emit.bind(this,"error"))};rg.inherits(z,tu);z.sync=ig;z.prototype.pack=function(){return!this.data||!this.data.length?(this.emit("error","No data provided"),this):(process.nextTick(function(){this._packer.pack(this.data,this.width,this.height,this.gamma)}.bind(this)),this)};z.prototype.parse=function(t,e){if(e){let r,n;r=function(s){this.removeListener("error",n),this.data=s,e(null,this)}.bind(this),n=function(s){this.removeListener("parsed",r),e(s,null)}.bind(this),this.once("parsed",r),this.once("error",n)}return this.end(t),this};z.prototype.write=function(t){return this._parser.write(t),!0};z.prototype.end=function(t){this._parser.end(t)};z.prototype._metadata=function(t){this.width=t.width,this.height=t.height,this.emit("metadata",t)};z.prototype._gamma=function(t){this.gamma=t};z.prototype._handleClose=function(){!this._parser.writable&&!this._packer.readable&&this.emit("close")};z.bitblt=function(t,e,r,n,s,i,o,a){if(r|=0,n|=0,s|=0,i|=0,o|=0,a|=0,r>t.width||n>t.height||r+s>t.width||n+i>t.height)throw new Error("bitblt reading outside image");if(o>e.width||a>e.height||o+s>e.width||a+i>e.height)throw new Error("bitblt writing outside image");for(let c=0;c<i;c++)t.data.copy(e.data,(a+c)*e.width+o<<2,(n+c)*t.width+r<<2,(n+c)*t.width+r+s<<2)};z.prototype.bitblt=function(t,e,r,n,s,i,o){return z.bitblt(this,t,e,r,n,s,i,o),this};z.adjustGamma=function(t){if(t.gamma){for(let e=0;e<t.height;e++)for(let r=0;r<t.width;r++){let n=t.width*e+r<<2;for(let s=0;s<3;s++){let i=t.data[n+s]/255;i=Math.pow(i,1/2.2/t.gamma),t.data[n+s]=Math.round(i*255)}}t.gamma=0}};z.prototype.adjustGamma=function(){z.adjustGamma(this)}});var Nt=g(Te=>{function su(t){if(typeof t=="number"&&(t=t.toString()),typeof t!="string")throw new Error("Color should be defined as hex string");let e=t.slice().replace("#","").split("");if(e.length<3||e.length===5||e.length>8)throw new Error("Invalid hex color: "+t);(e.length===3||e.length===4)&&(e=Array.prototype.concat.apply([],e.map(function(n){return[n,n]}))),e.length===6&&e.push("F","F");let r=parseInt(e.join(""),16);return{r:r>>24&255,g:r>>16&255,b:r>>8&255,a:r&255,hex:"#"+e.slice(0,6).join("")}}Te.getOptions=function(e){e||(e={}),e.color||(e.color={});let r=typeof e.margin>"u"||e.margin===null||e.margin<0?4:e.margin,n=e.width&&e.width>=21?e.width:void 0,s=e.scale||4;return{width:n,scale:n?4:s,margin:r,color:{dark:su(e.color.dark||"#000000ff"),light:su(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}};Te.getScale=function(e,r){return r.width&&r.width>=e+r.margin*2?r.width/(e+r.margin*2):r.scale};Te.getImageWidth=function(e,r){let n=Te.getScale(e,r);return Math.floor((e+r.margin*2)*n)};Te.qrToImageData=function(e,r,n){let s=r.modules.size,i=r.modules.data,o=Te.getScale(s,n),a=Math.floor((s+n.margin*2)*o),c=n.margin*o,l=[n.color.light,n.color.dark];for(let f=0;f<a;f++)for(let m=0;m<a;m++){let p=(f*a+m)*4,y=n.color.light;if(f>=c&&m>=c&&f<a-c&&m<a-c){let _=Math.floor((f-c)/o),d=Math.floor((m-c)/o);y=l[i[_*s+d]?1:0]}e[p++]=y.r,e[p++]=y.g,e[p++]=y.b,e[p]=y.a}}});var iu=g(ee=>{var og=require("fs"),ag=nu().PNG,As=Nt();ee.render=function(e,r){let n=As.getOptions(r),s=n.rendererOpts,i=As.getImageWidth(e.modules.size,n);s.width=i,s.height=i;let o=new ag(s);return As.qrToImageData(o.data,e,n),o};ee.renderToDataURL=function(e,r,n){typeof n>"u"&&(n=r,r=void 0),ee.renderToBuffer(e,r,function(s,i){s&&n(s);let o="data:image/png;base64,";o+=i.toString("base64"),n(null,o)})};ee.renderToBuffer=function(e,r,n){typeof n>"u"&&(n=r,r=void 0);let s=ee.render(e,r),i=[];s.on("error",n),s.on("data",function(o){i.push(o)}),s.on("end",function(){n(null,Buffer.concat(i))}),s.pack()};ee.renderToFile=function(e,r,n,s){typeof s>"u"&&(s=n,n=void 0);let i=!1,o=(...c)=>{i||(i=!0,s.apply(null,c))},a=og.createWriteStream(e);a.on("error",o),a.on("close",o),ee.renderToFileStream(a,r,n)};ee.renderToFileStream=function(e,r,n){ee.render(r,n).pack().pipe(e)}});var ou=g(Lr=>{var cg=Nt(),ug={WW:" ",WB:"\u2584",BB:"\u2588",BW:"\u2580"},lg={BB:" ",BW:"\u2584",WW:"\u2588",WB:"\u2580"};function hg(t,e,r){return t&&e?r.BB:t&&!e?r.BW:!t&&e?r.WB:r.WW}Lr.render=function(t,e,r){let n=cg.getOptions(e),s=ug;(n.color.dark.hex==="#ffffff"||n.color.light.hex==="#000000")&&(s=lg);let i=t.modules.size,o=t.modules.data,a="",c=Array(i+n.margin*2+1).join(s.WW);c=Array(n.margin/2+1).join(c+`
`);let l=Array(n.margin+1).join(s.WW);a+=c;for(let f=0;f<i;f+=2){a+=l;for(let m=0;m<i;m++){let p=o[f*i+m],y=o[(f+1)*i+m];a+=hg(p,y,s)}a+=l+`
`}return a+=c.slice(0,-1),typeof r=="function"&&r(null,a),a};Lr.renderToFile=function(e,r,n,s){typeof s>"u"&&(s=n,n=void 0);let i=require("fs"),o=Lr.render(r,n);i.writeFile(e,o,s)}});var cu=g(au=>{au.render=function(t,e,r){let n=t.modules.size,s=t.modules.data,i="\x1B[40m  \x1B[0m",o="\x1B[47m  \x1B[0m",a="",c=Array(n+3).join(o),l=Array(2).join(o);a+=c+`
`;for(let f=0;f<n;++f){a+=o;for(let m=0;m<n;m++)a+=s[f*n+m]?i:o;a+=l+`
`}return a+=c+`
`,typeof r=="function"&&r(null,a),a}});var fu=g(hu=>{var fg="\x1B[47m",dg="\x1B[40m",ks="\x1B[37m",Os="\x1B[30m",Re="\x1B[0m",pg=fg+Os,mg=dg+ks,gg=function(t,e,r){return{"00":Re+" "+t,"01":Re+e+"\u2584"+t,"02":Re+r+"\u2584"+t,10:Re+e+"\u2580"+t,11:" ",12:"\u2584",20:Re+r+"\u2580"+t,21:"\u2580",22:"\u2588"}},uu=function(t,e,r,n){let s=e+1;if(r>=s||n>=s||n<-1||r<-1)return"0";if(r>=e||n>=e||n<0||r<0)return"1";let i=n*e+r;return t[i]?"2":"1"},lu=function(t,e,r,n){return uu(t,e,r,n)+uu(t,e,r,n+1)};hu.render=function(t,e,r){let n=t.modules.size,s=t.modules.data,i=!!(e&&e.inverse),o=e&&e.inverse?mg:pg,l=gg(o,i?Os:ks,i?ks:Os),f=Re+`
`+o,m=o;for(let p=-1;p<n+1;p+=2){for(let y=-1;y<n;y++)m+=l[lu(s,n,y,p)];m+=l[lu(s,n,n,p)]+f}return m+=Re,typeof r=="function"&&r(null,m),m}});var pu=g(du=>{var yg=cu(),_g=fu();du.render=function(t,e,r){return e&&e.small?_g.render(t,e,r):yg.render(t,e,r)}});var Ls=g(gu=>{var bg=Nt();function mu(t,e){let r=t.a/255,n=e+'="'+t.hex+'"';return r<1?n+" "+e+'-opacity="'+r.toFixed(2).slice(1)+'"':n}function Is(t,e,r){let n=t+e;return typeof r<"u"&&(n+=" "+r),n}function wg(t,e,r){let n="",s=0,i=!1,o=0;for(let a=0;a<t.length;a++){let c=Math.floor(a%e),l=Math.floor(a/e);!c&&!i&&(i=!0),t[a]?(o++,a>0&&c>0&&t[a-1]||(n+=i?Is("M",c+r,.5+l+r):Is("m",s,0),s=0,i=!1),c+1<e&&t[a+1]||(n+=Is("h",o),o=0)):s++}return n}gu.render=function(e,r,n){let s=bg.getOptions(r),i=e.modules.size,o=e.modules.data,a=i+s.margin*2,c=s.color.light.a?"<path "+mu(s.color.light,"fill")+' d="M0 0h'+a+"v"+a+'H0z"/>':"",l="<path "+mu(s.color.dark,"stroke")+' d="'+wg(o,i,s.margin)+'"/>',f='viewBox="0 0 '+a+" "+a+'"',p='<svg xmlns="http://www.w3.org/2000/svg" '+(s.width?'width="'+s.width+'" height="'+s.width+'" ':"")+f+' shape-rendering="crispEdges">'+c+l+`</svg>
`;return typeof n=="function"&&n(null,p),p}});var yu=g(qr=>{var Eg=Ls();qr.render=Eg.render;qr.renderToFile=function(e,r,n,s){typeof s>"u"&&(s=n,n=void 0);let i=require("fs"),a='<?xml version="1.0" encoding="utf-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">'+qr.render(r,n);i.writeFile(e,a,s)}});var _u=g(Nr=>{var qs=Nt();function Cg(t,e,r){t.clearRect(0,0,e.width,e.height),e.style||(e.style={}),e.height=r,e.width=r,e.style.height=r+"px",e.style.width=r+"px"}function Sg(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}Nr.render=function(e,r,n){let s=n,i=r;typeof s>"u"&&(!r||!r.getContext)&&(s=r,r=void 0),r||(i=Sg()),s=qs.getOptions(s);let o=qs.getImageWidth(e.modules.size,s),a=i.getContext("2d"),c=a.createImageData(o,o);return qs.qrToImageData(c.data,e,s),Cg(a,i,o),a.putImageData(c,0,0),i};Nr.renderToDataURL=function(e,r,n){let s=n;typeof s>"u"&&(!r||!r.getContext)&&(s=r,r=void 0),s||(s={});let i=Nr.render(e,r,s),o=s.type||"image/png",a=s.rendererOpts||{};return i.toDataURL(o,a.quality)}});var wu=g(Bt=>{var xg=Wn(),Ns=fs(),bu=_u(),Tg=Ls();function Bs(t,e,r,n,s){let i=[].slice.call(arguments,1),o=i.length,a=typeof i[o-1]=="function";if(!a&&!xg())throw new Error("Callback required as last argument");if(a){if(o<2)throw new Error("Too few arguments provided");o===2?(s=r,r=e,e=n=void 0):o===3&&(e.getContext&&typeof s>"u"?(s=n,n=void 0):(s=n,n=r,r=e,e=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(r=e,e=n=void 0):o===2&&!e.getContext&&(n=r,r=e,e=void 0),new Promise(function(c,l){try{let f=Ns.create(r,n);c(t(f,e,n))}catch(f){l(f)}})}try{let c=Ns.create(r,n);s(null,t(c,e,n))}catch(c){s(c)}}Bt.create=Ns.create;Bt.toCanvas=Bs.bind(null,bu.render);Bt.toDataURL=Bs.bind(null,bu.renderToDataURL);Bt.toString=Bs.bind(null,function(t,e,r){return Tg.render(t,r)})});var xu=g(me=>{var Eu=Wn(),vs=fs(),Rg=iu(),Cu=ou(),Pg=pu(),Su=yu();function vt(t,e,r){if(typeof t>"u")throw new Error("String required as first argument");if(typeof r>"u"&&(r=e,e={}),typeof r!="function")if(Eu())e=r||{},r=null;else throw new Error("Callback required as last argument");return{opts:e,cb:r}}function Ag(t){return t.slice((t.lastIndexOf(".")-1>>>0)+2).toLowerCase()}function Br(t){switch(t){case"svg":return Su;case"txt":case"utf8":return Cu;case"png":case"image/png":default:return Rg}}function kg(t){switch(t){case"svg":return Su;case"terminal":return Pg;case"utf8":default:return Cu}}function jt(t,e,r){if(!r.cb)return new Promise(function(n,s){try{let i=vs.create(e,r.opts);return t(i,r.opts,function(o,a){return o?s(o):n(a)})}catch(i){s(i)}});try{let n=vs.create(e,r.opts);return t(n,r.opts,r.cb)}catch(n){r.cb(n)}}me.create=vs.create;me.toCanvas=wu().toCanvas;me.toString=function(e,r,n){let s=vt(e,r,n),i=s.opts?s.opts.type:void 0,o=kg(i);return jt(o.render,e,s)};me.toDataURL=function(e,r,n){let s=vt(e,r,n),i=Br(s.opts.type);return jt(i.renderToDataURL,e,s)};me.toBuffer=function(e,r,n){let s=vt(e,r,n),i=Br(s.opts.type);return jt(i.renderToBuffer,e,s)};me.toFile=function(e,r,n,s){if(typeof e!="string"||!(typeof r=="string"||typeof r=="object"))throw new Error("Invalid argument");if(arguments.length<3&&!Eu())throw new Error("Too few arguments provided");let i=vt(r,n,s),o=i.opts.type||Ag(e),c=Br(o).renderToFile.bind(null,e);return jt(c,r,i)};me.toFileStream=function(e,r,n){if(arguments.length<2)throw new Error("Too few arguments provided");let s=vt(r,n,e.emit.bind(e,"error")),o=Br("png").renderToFileStream.bind(null,e);jt(o,r,s)}});var Ru=g((kE,Tu)=>{Tu.exports=xu()});var Iu=g((YE,Ou)=>{Ou.exports=ku;ku.sync=qg;var Pu=require("fs");function Lg(t,e){var r=e.pathExt!==void 0?e.pathExt:process.env.PATHEXT;if(!r||(r=r.split(";"),r.indexOf("")!==-1))return!0;for(var n=0;n<r.length;n++){var s=r[n].toLowerCase();if(s&&t.substr(-s.length).toLowerCase()===s)return!0}return!1}function Au(t,e,r){return!t.isSymbolicLink()&&!t.isFile()?!1:Lg(e,r)}function ku(t,e,r){Pu.stat(t,function(n,s){r(n,n?!1:Au(s,t,e))})}function qg(t,e){return Au(Pu.statSync(t),t,e)}});var vu=g((KE,Bu)=>{Bu.exports=qu;qu.sync=Ng;var Lu=require("fs");function qu(t,e,r){Lu.stat(t,function(n,s){r(n,n?!1:Nu(s,e))})}function Ng(t,e){return Nu(Lu.statSync(t),e)}function Nu(t,e){return t.isFile()&&Bg(t,e)}function Bg(t,e){var r=t.mode,n=t.uid,s=t.gid,i=e.uid!==void 0?e.uid:process.getuid&&process.getuid(),o=e.gid!==void 0?e.gid:process.getgid&&process.getgid(),a=parseInt("100",8),c=parseInt("010",8),l=parseInt("001",8),f=a|c,m=r&l||r&c&&s===o||r&a&&n===i||r&f&&i===0;return m}});var Mu=g((QE,ju)=>{var JE=require("fs"),vr;process.platform==="win32"||global.TESTING_WINDOWS?vr=Iu():vr=vu();ju.exports=js;js.sync=vg;function js(t,e,r){if(typeof e=="function"&&(r=e,e={}),!r){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(n,s){js(t,e||{},function(i,o){i?s(i):n(o)})})}vr(t,e||{},function(n,s){n&&(n.code==="EACCES"||e&&e.ignoreErrors)&&(n=null,s=!1),r(n,s)})}function vg(t,e){try{return vr.sync(t,e||{})}catch(r){if(e&&e.ignoreErrors||r.code==="EACCES")return!1;throw r}}});var Gu=g((XE,zu)=>{var We=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",Hu=require("path"),jg=We?";":":",Uu=Mu(),Du=t=>Object.assign(new Error(`not found: ${t}`),{code:"ENOENT"}),Fu=(t,e)=>{let r=e.colon||jg,n=t.match(/\//)||We&&t.match(/\\/)?[""]:[...We?[process.cwd()]:[],...(e.path||process.env.PATH||"").split(r)],s=We?e.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",i=We?s.split(r):[""];return We&&t.indexOf(".")!==-1&&i[0]!==""&&i.unshift(""),{pathEnv:n,pathExt:i,pathExtExe:s}},$u=(t,e,r)=>{typeof e=="function"&&(r=e,e={}),e||(e={});let{pathEnv:n,pathExt:s,pathExtExe:i}=Fu(t,e),o=[],a=l=>new Promise((f,m)=>{if(l===n.length)return e.all&&o.length?f(o):m(Du(t));let p=n[l],y=/^".*"$/.test(p)?p.slice(1,-1):p,_=Hu.join(y,t),d=!y&&/^\.[\\\/]/.test(t)?t.slice(0,2)+_:_;f(c(d,l,0))}),c=(l,f,m)=>new Promise((p,y)=>{if(m===s.length)return p(a(f+1));let _=s[m];Uu(l+_,{pathExt:i},(d,C)=>{if(!d&&C)if(e.all)o.push(l+_);else return p(l+_);return p(c(l,f,m+1))})});return r?a(0).then(l=>r(null,l),r):a(0)},Mg=(t,e)=>{e=e||{};let{pathEnv:r,pathExt:n,pathExtExe:s}=Fu(t,e),i=[];for(let o=0;o<r.length;o++){let a=r[o],c=/^".*"$/.test(a)?a.slice(1,-1):a,l=Hu.join(c,t),f=!c&&/^\.[\\\/]/.test(t)?t.slice(0,2)+l:l;for(let m=0;m<n.length;m++){let p=f+n[m];try{if(Uu.sync(p,{pathExt:s}))if(e.all)i.push(p);else return p}catch{}}}if(e.all&&i.length)return i;if(e.nothrow)return null;throw Du(t)};zu.exports=$u;$u.sync=Mg});var Hs=g((ZE,Ms)=>{"use strict";var Vu=(t={})=>{let e=t.env||process.env;return(t.platform||process.platform)!=="win32"?"PATH":Object.keys(e).reverse().find(n=>n.toUpperCase()==="PATH")||"Path"};Ms.exports=Vu;Ms.exports.default=Vu});var Ju=g((eC,Ku)=>{"use strict";var Wu=require("path"),Hg=Gu(),Ug=Hs();function Yu(t,e){let r=t.options.env||process.env,n=process.cwd(),s=t.options.cwd!=null,i=s&&process.chdir!==void 0&&!process.chdir.disabled;if(i)try{process.chdir(t.options.cwd)}catch{}let o;try{o=Hg.sync(t.command,{path:r[Ug({env:r})],pathExt:e?Wu.delimiter:void 0})}catch{}finally{i&&process.chdir(n)}return o&&(o=Wu.resolve(s?t.options.cwd:"",o)),o}function Dg(t){return Yu(t)||Yu(t,!0)}Ku.exports=Dg});var Qu=g((tC,Ds)=>{"use strict";var Us=/([()\][%!^"`<>&|;, *?])/g;function Fg(t){return t=t.replace(Us,"^$1"),t}function $g(t,e){return t=`${t}`,t=t.replace(/(\\*)"/g,'$1$1\\"'),t=t.replace(/(\\*)$/,"$1$1"),t=`"${t}"`,t=t.replace(Us,"^$1"),e&&(t=t.replace(Us,"^$1")),t}Ds.exports.command=Fg;Ds.exports.argument=$g});var Zu=g((rC,Xu)=>{"use strict";Xu.exports=/^#!(.*)/});var tl=g((nC,el)=>{"use strict";var zg=Zu();el.exports=(t="")=>{let e=t.match(zg);if(!e)return null;let[r,n]=e[0].replace(/#! ?/,"").split(" "),s=r.split("/").pop();return s==="env"?n:n?`${s} ${n}`:s}});var nl=g((sC,rl)=>{"use strict";var Fs=require("fs"),Gg=tl();function Vg(t){let r=Buffer.alloc(150),n;try{n=Fs.openSync(t,"r"),Fs.readSync(n,r,0,150,0),Fs.closeSync(n)}catch{}return Gg(r.toString())}rl.exports=Vg});var al=g((iC,ol)=>{"use strict";var Wg=require("path"),sl=Ju(),il=Qu(),Yg=nl(),Kg=process.platform==="win32",Jg=/\.(?:com|exe)$/i,Qg=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function Xg(t){t.file=sl(t);let e=t.file&&Yg(t.file);return e?(t.args.unshift(t.file),t.command=e,sl(t)):t.file}function Zg(t){if(!Kg)return t;let e=Xg(t),r=!Jg.test(e);if(t.options.forceShell||r){let n=Qg.test(e);t.command=Wg.normalize(t.command),t.command=il.command(t.command),t.args=t.args.map(i=>il.argument(i,n));let s=[t.command].concat(t.args).join(" ");t.args=["/d","/s","/c",`"${s}"`],t.command=process.env.comspec||"cmd.exe",t.options.windowsVerbatimArguments=!0}return t}function ey(t,e,r){e&&!Array.isArray(e)&&(r=e,e=null),e=e?e.slice(0):[],r=Object.assign({},r);let n={command:t,args:e,options:r,file:void 0,original:{command:t,args:e}};return r.shell?n:Zg(n)}ol.exports=ey});var ll=g((oC,ul)=>{"use strict";var $s=process.platform==="win32";function zs(t,e){return Object.assign(new Error(`${e} ${t.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${e} ${t.command}`,path:t.command,spawnargs:t.args})}function ty(t,e){if(!$s)return;let r=t.emit;t.emit=function(n,s){if(n==="exit"){let i=cl(s,e,"spawn");if(i)return r.call(t,"error",i)}return r.apply(t,arguments)}}function cl(t,e){return $s&&t===1&&!e.file?zs(e.original,"spawn"):null}function ry(t,e){return $s&&t===1&&!e.file?zs(e.original,"spawnSync"):null}ul.exports={hookChildProcess:ty,verifyENOENT:cl,verifyENOENTSync:ry,notFoundError:zs}});var dl=g((aC,Ye)=>{"use strict";var hl=require("child_process"),Gs=al(),Vs=ll();function fl(t,e,r){let n=Gs(t,e,r),s=hl.spawn(n.command,n.args,n.options);return Vs.hookChildProcess(s,n),s}function ny(t,e,r){let n=Gs(t,e,r),s=hl.spawnSync(n.command,n.args,n.options);return s.error=s.error||Vs.verifyENOENTSync(s.status,n),s}Ye.exports=fl;Ye.exports.spawn=fl;Ye.exports.sync=ny;Ye.exports._parse=Gs;Ye.exports._enoent=Vs});var ml=g((cC,pl)=>{"use strict";pl.exports=t=>{let e=typeof t=="string"?`
`:10,r=typeof t=="string"?"\r":13;return t[t.length-1]===e&&(t=t.slice(0,t.length-1)),t[t.length-1]===r&&(t=t.slice(0,t.length-1)),t}});var _l=g((uC,Ht)=>{"use strict";var Mt=require("path"),gl=Hs(),yl=t=>{t={cwd:process.cwd(),path:process.env[gl()],execPath:process.execPath,...t};let e,r=Mt.resolve(t.cwd),n=[];for(;e!==r;)n.push(Mt.join(r,"node_modules/.bin")),e=r,r=Mt.resolve(r,"..");let s=Mt.resolve(t.cwd,t.execPath,"..");return n.push(s),n.concat(t.path).join(Mt.delimiter)};Ht.exports=yl;Ht.exports.default=yl;Ht.exports.env=t=>{t={env:process.env,...t};let e={...t.env},r=gl({env:e});return t.path=e[r],e[r]=Ht.exports(t),e}});var wl=g((lC,Ws)=>{"use strict";var bl=(t,e)=>{for(let r of Reflect.ownKeys(e))Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r));return t};Ws.exports=bl;Ws.exports.default=bl});var Cl=g((hC,Mr)=>{"use strict";var sy=wl(),jr=new WeakMap,El=(t,e={})=>{if(typeof t!="function")throw new TypeError("Expected a function");let r,n=0,s=t.displayName||t.name||"<anonymous>",i=function(...o){if(jr.set(i,++n),n===1)r=t.apply(this,o),t=null;else if(e.throw===!0)throw new Error(`Function \`${s}\` can only be called once`);return r};return sy(i,t),jr.set(i,n),i};Mr.exports=El;Mr.exports.default=El;Mr.exports.callCount=t=>{if(!jr.has(t))throw new Error(`The given function \`${t.name}\` is not wrapped by the \`onetime\` package`);return jr.get(t)}});var Sl=g(Hr=>{"use strict";Object.defineProperty(Hr,"__esModule",{value:!0});Hr.SIGNALS=void 0;var iy=[{name:"SIGHUP",number:1,action:"terminate",description:"Terminal closed",standard:"posix"},{name:"SIGINT",number:2,action:"terminate",description:"User interruption with CTRL-C",standard:"ansi"},{name:"SIGQUIT",number:3,action:"core",description:"User interruption with CTRL-\\",standard:"posix"},{name:"SIGILL",number:4,action:"core",description:"Invalid machine instruction",standard:"ansi"},{name:"SIGTRAP",number:5,action:"core",description:"Debugger breakpoint",standard:"posix"},{name:"SIGABRT",number:6,action:"core",description:"Aborted",standard:"ansi"},{name:"SIGIOT",number:6,action:"core",description:"Aborted",standard:"bsd"},{name:"SIGBUS",number:7,action:"core",description:"Bus error due to misaligned, non-existing address or paging error",standard:"bsd"},{name:"SIGEMT",number:7,action:"terminate",description:"Command should be emulated but is not implemented",standard:"other"},{name:"SIGFPE",number:8,action:"core",description:"Floating point arithmetic error",standard:"ansi"},{name:"SIGKILL",number:9,action:"terminate",description:"Forced termination",standard:"posix",forced:!0},{name:"SIGUSR1",number:10,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGSEGV",number:11,action:"core",description:"Segmentation fault",standard:"ansi"},{name:"SIGUSR2",number:12,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGPIPE",number:13,action:"terminate",description:"Broken pipe or socket",standard:"posix"},{name:"SIGALRM",number:14,action:"terminate",description:"Timeout or timer",standard:"posix"},{name:"SIGTERM",number:15,action:"terminate",description:"Termination",standard:"ansi"},{name:"SIGSTKFLT",number:16,action:"terminate",description:"Stack is empty or overflowed",standard:"other"},{name:"SIGCHLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"posix"},{name:"SIGCLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"other"},{name:"SIGCONT",number:18,action:"unpause",description:"Unpaused",standard:"posix",forced:!0},{name:"SIGSTOP",number:19,action:"pause",description:"Paused",standard:"posix",forced:!0},{name:"SIGTSTP",number:20,action:"pause",description:'Paused using CTRL-Z or "suspend"',standard:"posix"},{name:"SIGTTIN",number:21,action:"pause",description:"Background process cannot read terminal input",standard:"posix"},{name:"SIGBREAK",number:21,action:"terminate",description:"User interruption with CTRL-BREAK",standard:"other"},{name:"SIGTTOU",number:22,action:"pause",description:"Background process cannot write to terminal output",standard:"posix"},{name:"SIGURG",number:23,action:"ignore",description:"Socket received out-of-band data",standard:"bsd"},{name:"SIGXCPU",number:24,action:"core",description:"Process timed out",standard:"bsd"},{name:"SIGXFSZ",number:25,action:"core",description:"File too big",standard:"bsd"},{name:"SIGVTALRM",number:26,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGPROF",number:27,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGWINCH",number:28,action:"ignore",description:"Terminal window size changed",standard:"bsd"},{name:"SIGIO",number:29,action:"terminate",description:"I/O is available",standard:"other"},{name:"SIGPOLL",number:29,action:"terminate",description:"Watched event",standard:"other"},{name:"SIGINFO",number:29,action:"ignore",description:"Request for process information",standard:"other"},{name:"SIGPWR",number:30,action:"terminate",description:"Device running out of power",standard:"systemv"},{name:"SIGSYS",number:31,action:"core",description:"Invalid system call",standard:"other"},{name:"SIGUNUSED",number:31,action:"terminate",description:"Invalid system call",standard:"other"}];Hr.SIGNALS=iy});var Ys=g(Ke=>{"use strict";Object.defineProperty(Ke,"__esModule",{value:!0});Ke.SIGRTMAX=Ke.getRealtimeSignals=void 0;var oy=function(){let t=Tl-xl+1;return Array.from({length:t},ay)};Ke.getRealtimeSignals=oy;var ay=function(t,e){return{name:`SIGRT${e+1}`,number:xl+e,action:"terminate",description:"Application-specific signal (realtime)",standard:"posix"}},xl=34,Tl=64;Ke.SIGRTMAX=Tl});var Rl=g(Ur=>{"use strict";Object.defineProperty(Ur,"__esModule",{value:!0});Ur.getSignals=void 0;var cy=require("os"),uy=Sl(),ly=Ys(),hy=function(){let t=(0,ly.getRealtimeSignals)();return[...uy.SIGNALS,...t].map(fy)};Ur.getSignals=hy;var fy=function({name:t,number:e,description:r,action:n,forced:s=!1,standard:i}){let{signals:{[t]:o}}=cy.constants,a=o!==void 0;return{name:t,number:a?o:e,description:r,supported:a,action:n,forced:s,standard:i}}});var Al=g(Je=>{"use strict";Object.defineProperty(Je,"__esModule",{value:!0});Je.signalsByNumber=Je.signalsByName=void 0;var dy=require("os"),Pl=Rl(),py=Ys(),my=function(){return(0,Pl.getSignals)().reduce(gy,{})},gy=function(t,{name:e,number:r,description:n,supported:s,action:i,forced:o,standard:a}){return{...t,[e]:{name:e,number:r,description:n,supported:s,action:i,forced:o,standard:a}}},yy=my();Je.signalsByName=yy;var _y=function(){let t=(0,Pl.getSignals)(),e=py.SIGRTMAX+1,r=Array.from({length:e},(n,s)=>by(s,t));return Object.assign({},...r)},by=function(t,e){let r=wy(t,e);if(r===void 0)return{};let{name:n,description:s,supported:i,action:o,forced:a,standard:c}=r;return{[t]:{name:n,number:t,description:s,supported:i,action:o,forced:a,standard:c}}},wy=function(t,e){let r=e.find(({name:n})=>dy.constants.signals[n]===t);return r!==void 0?r:e.find(n=>n.number===t)},Ey=_y();Je.signalsByNumber=Ey});var Ol=g((gC,kl)=>{"use strict";var{signalsByName:Cy}=Al(),Sy=({timedOut:t,timeout:e,errorCode:r,signal:n,signalDescription:s,exitCode:i,isCanceled:o})=>t?`timed out after ${e} milliseconds`:o?"was canceled":r!==void 0?`failed with ${r}`:n!==void 0?`was killed with ${n} (${s})`:i!==void 0?`failed with exit code ${i}`:"failed",xy=({stdout:t,stderr:e,all:r,error:n,signal:s,exitCode:i,command:o,escapedCommand:a,timedOut:c,isCanceled:l,killed:f,parsed:{options:{timeout:m}}})=>{i=i===null?void 0:i,s=s===null?void 0:s;let p=s===void 0?void 0:Cy[s].description,y=n&&n.code,d=`Command ${Sy({timedOut:c,timeout:m,errorCode:y,signal:s,signalDescription:p,exitCode:i,isCanceled:l})}: ${o}`,C=Object.prototype.toString.call(n)==="[object Error]",w=C?`${d}
${n.message}`:d,T=[w,e,t].filter(Boolean).join(`
`);return C?(n.originalMessage=n.message,n.message=T):n=new Error(T),n.shortMessage=w,n.command=o,n.escapedCommand=a,n.exitCode=i,n.signal=s,n.signalDescription=p,n.stdout=t,n.stderr=e,r!==void 0&&(n.all=r),"bufferedData"in n&&delete n.bufferedData,n.failed=!0,n.timedOut=!!c,n.isCanceled=l,n.killed=f&&!c,n};kl.exports=xy});var Ll=g((yC,Ks)=>{"use strict";var Dr=["stdin","stdout","stderr"],Ty=t=>Dr.some(e=>t[e]!==void 0),Il=t=>{if(!t)return;let{stdio:e}=t;if(e===void 0)return Dr.map(n=>t[n]);if(Ty(t))throw new Error(`It's not possible to provide \`stdio\` in combination with one of ${Dr.map(n=>`\`${n}\``).join(", ")}`);if(typeof e=="string")return e;if(!Array.isArray(e))throw new TypeError(`Expected \`stdio\` to be of type \`string\` or \`Array\`, got \`${typeof e}\``);let r=Math.max(e.length,Dr.length);return Array.from({length:r},(n,s)=>e[s])};Ks.exports=Il;Ks.exports.node=t=>{let e=Il(t);return e==="ipc"?"ipc":e===void 0||typeof e=="string"?[e,e,e,"ipc"]:e.includes("ipc")?e:[...e,"ipc"]}});var ql=g((_C,Fr)=>{Fr.exports=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"];process.platform!=="win32"&&Fr.exports.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT");process.platform==="linux"&&Fr.exports.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT","SIGUNUSED")});var Ml=g((bC,Ze)=>{var q=global.process,Pe=function(t){return t&&typeof t=="object"&&typeof t.removeListener=="function"&&typeof t.emit=="function"&&typeof t.reallyExit=="function"&&typeof t.listeners=="function"&&typeof t.kill=="function"&&typeof t.pid=="number"&&typeof t.on=="function"};Pe(q)?(Nl=require("assert"),Qe=ql(),Bl=/^win/i.test(q.platform),Ut=require("events"),typeof Ut!="function"&&(Ut=Ut.EventEmitter),q.__signal_exit_emitter__?H=q.__signal_exit_emitter__:(H=q.__signal_exit_emitter__=new Ut,H.count=0,H.emitted={}),H.infinite||(H.setMaxListeners(1/0),H.infinite=!0),Ze.exports=function(t,e){if(!Pe(global.process))return function(){};Nl.equal(typeof t,"function","a callback must be provided for exit handler"),Xe===!1&&Js();var r="exit";e&&e.alwaysLast&&(r="afterexit");var n=function(){H.removeListener(r,t),H.listeners("exit").length===0&&H.listeners("afterexit").length===0&&$r()};return H.on(r,t),n},$r=function(){!Xe||!Pe(global.process)||(Xe=!1,Qe.forEach(function(e){try{q.removeListener(e,zr[e])}catch{}}),q.emit=Gr,q.reallyExit=Qs,H.count-=1)},Ze.exports.unload=$r,Ae=function(e,r,n){H.emitted[e]||(H.emitted[e]=!0,H.emit(e,r,n))},zr={},Qe.forEach(function(t){zr[t]=function(){if(Pe(global.process)){var r=q.listeners(t);r.length===H.count&&($r(),Ae("exit",null,t),Ae("afterexit",null,t),Bl&&t==="SIGHUP"&&(t="SIGINT"),q.kill(q.pid,t))}}}),Ze.exports.signals=function(){return Qe},Xe=!1,Js=function(){Xe||!Pe(global.process)||(Xe=!0,H.count+=1,Qe=Qe.filter(function(e){try{return q.on(e,zr[e]),!0}catch{return!1}}),q.emit=jl,q.reallyExit=vl)},Ze.exports.load=Js,Qs=q.reallyExit,vl=function(e){Pe(global.process)&&(q.exitCode=e||0,Ae("exit",q.exitCode,null),Ae("afterexit",q.exitCode,null),Qs.call(q,q.exitCode))},Gr=q.emit,jl=function(e,r){if(e==="exit"&&Pe(global.process)){r!==void 0&&(q.exitCode=r);var n=Gr.apply(this,arguments);return Ae("exit",q.exitCode,null),Ae("afterexit",q.exitCode,null),n}else return Gr.apply(this,arguments)}):Ze.exports=function(){return function(){}};var Nl,Qe,Bl,Ut,H,$r,Ae,zr,Xe,Js,Qs,vl,Gr,jl});var Ul=g((wC,Hl)=>{"use strict";var Ry=require("os"),Py=Ml(),Ay=1e3*5,ky=(t,e="SIGTERM",r={})=>{let n=t(e);return Oy(t,e,r,n),n},Oy=(t,e,r,n)=>{if(!Iy(e,r,n))return;let s=qy(r),i=setTimeout(()=>{t("SIGKILL")},s);i.unref&&i.unref()},Iy=(t,{forceKillAfterTimeout:e},r)=>Ly(t)&&e!==!1&&r,Ly=t=>t===Ry.constants.signals.SIGTERM||typeof t=="string"&&t.toUpperCase()==="SIGTERM",qy=({forceKillAfterTimeout:t=!0})=>{if(t===!0)return Ay;if(!Number.isFinite(t)||t<0)throw new TypeError(`Expected the \`forceKillAfterTimeout\` option to be a non-negative integer, got \`${t}\` (${typeof t})`);return t},Ny=(t,e)=>{t.kill()&&(e.isCanceled=!0)},By=(t,e,r)=>{t.kill(e),r(Object.assign(new Error("Timed out"),{timedOut:!0,signal:e}))},vy=(t,{timeout:e,killSignal:r="SIGTERM"},n)=>{if(e===0||e===void 0)return n;let s,i=new Promise((a,c)=>{s=setTimeout(()=>{By(t,r,c)},e)}),o=n.finally(()=>{clearTimeout(s)});return Promise.race([i,o])},jy=({timeout:t})=>{if(t!==void 0&&(!Number.isFinite(t)||t<0))throw new TypeError(`Expected the \`timeout\` option to be a non-negative integer, got \`${t}\` (${typeof t})`)},My=async(t,{cleanup:e,detached:r},n)=>{if(!e||r)return n;let s=Py(()=>{t.kill()});return n.finally(()=>{s()})};Hl.exports={spawnedKill:ky,spawnedCancel:Ny,setupTimeout:vy,validateTimeout:jy,setExitHandler:My}});var Fl=g((EC,Dl)=>{"use strict";var te=t=>t!==null&&typeof t=="object"&&typeof t.pipe=="function";te.writable=t=>te(t)&&t.writable!==!1&&typeof t._write=="function"&&typeof t._writableState=="object";te.readable=t=>te(t)&&t.readable!==!1&&typeof t._read=="function"&&typeof t._readableState=="object";te.duplex=t=>te.writable(t)&&te.readable(t);te.transform=t=>te.duplex(t)&&typeof t._transform=="function";Dl.exports=te});var zl=g((CC,$l)=>{"use strict";var{PassThrough:Hy}=require("stream");$l.exports=function(){var t=[],e=new Hy({objectMode:!0});return e.setMaxListeners(0),e.add=r,e.isEmpty=n,e.on("unpipe",s),Array.prototype.slice.call(arguments).forEach(r),e;function r(i){return Array.isArray(i)?(i.forEach(r),this):(t.push(i),i.once("end",s.bind(null,i)),i.once("error",e.emit.bind(e,"error")),i.pipe(e,{end:!1}),this)}function n(){return t.length==0}function s(i){t=t.filter(function(o){return o!==i}),!t.length&&e.readable&&e.end()}}});var Yl=g((SC,Wl)=>{"use strict";var Vl=Fl(),Gl=Xt(),Uy=zl(),Dy=(t,e)=>{e===void 0||t.stdin===void 0||(Vl(e)?e.pipe(t.stdin):t.stdin.end(e))},Fy=(t,{all:e})=>{if(!e||!t.stdout&&!t.stderr)return;let r=Uy();return t.stdout&&r.add(t.stdout),t.stderr&&r.add(t.stderr),r},Xs=async(t,e)=>{if(t){t.destroy();try{return await e}catch(r){return r.bufferedData}}},Zs=(t,{encoding:e,buffer:r,maxBuffer:n})=>{if(!(!t||!r))return e?Gl(t,{encoding:e,maxBuffer:n}):Gl.buffer(t,{maxBuffer:n})},$y=async({stdout:t,stderr:e,all:r},{encoding:n,buffer:s,maxBuffer:i},o)=>{let a=Zs(t,{encoding:n,buffer:s,maxBuffer:i}),c=Zs(e,{encoding:n,buffer:s,maxBuffer:i}),l=Zs(r,{encoding:n,buffer:s,maxBuffer:i*2});try{return await Promise.all([o,a,c,l])}catch(f){return Promise.all([{error:f,signal:f.signal,timedOut:f.timedOut},Xs(t,a),Xs(e,c),Xs(r,l)])}},zy=({input:t})=>{if(Vl(t))throw new TypeError("The `input` option cannot be a stream in sync mode")};Wl.exports={handleInput:Dy,makeAllStream:Fy,getSpawnedResult:$y,validateInputSync:zy}});var Jl=g((xC,Kl)=>{"use strict";var Gy=(async()=>{})().constructor.prototype,Vy=["then","catch","finally"].map(t=>[t,Reflect.getOwnPropertyDescriptor(Gy,t)]),Wy=(t,e)=>{for(let[r,n]of Vy){let s=typeof e=="function"?(...i)=>Reflect.apply(n.value,e(),i):n.value.bind(e);Reflect.defineProperty(t,r,{...n,value:s})}return t},Yy=t=>new Promise((e,r)=>{t.on("exit",(n,s)=>{e({exitCode:n,signal:s})}),t.on("error",n=>{r(n)}),t.stdin&&t.stdin.on("error",n=>{r(n)})});Kl.exports={mergePromise:Wy,getSpawnedPromise:Yy}});var Zl=g((TC,Xl)=>{"use strict";var Ql=(t,e=[])=>Array.isArray(e)?[t,...e]:[t],Ky=/^[\w.-]+$/,Jy=/"/g,Qy=t=>typeof t!="string"||Ky.test(t)?t:`"${t.replace(Jy,'\\"')}"`,Xy=(t,e)=>Ql(t,e).join(" "),Zy=(t,e)=>Ql(t,e).map(r=>Qy(r)).join(" "),e_=/ +/g,t_=t=>{let e=[];for(let r of t.trim().split(e_)){let n=e[e.length-1];n&&n.endsWith("\\")?e[e.length-1]=`${n.slice(0,-1)} ${r}`:e.push(r)}return e};Xl.exports={joinCommand:Xy,getEscapedCommand:Zy,parseCommand:t_}});var oh=g((RC,et)=>{"use strict";var r_=require("path"),ei=require("child_process"),n_=dl(),s_=ml(),i_=_l(),o_=Cl(),Vr=Ol(),th=Ll(),{spawnedKill:a_,spawnedCancel:c_,setupTimeout:u_,validateTimeout:l_,setExitHandler:h_}=Ul(),{handleInput:f_,getSpawnedResult:d_,makeAllStream:p_,validateInputSync:m_}=Yl(),{mergePromise:eh,getSpawnedPromise:g_}=Jl(),{joinCommand:rh,parseCommand:nh,getEscapedCommand:sh}=Zl(),y_=1e3*1e3*100,__=({env:t,extendEnv:e,preferLocal:r,localDir:n,execPath:s})=>{let i=e?{...process.env,...t}:t;return r?i_.env({env:i,cwd:n,execPath:s}):i},ih=(t,e,r={})=>{let n=n_._parse(t,e,r);return t=n.command,e=n.args,r=n.options,r={maxBuffer:y_,buffer:!0,stripFinalNewline:!0,extendEnv:!0,preferLocal:!1,localDir:r.cwd||process.cwd(),execPath:process.execPath,encoding:"utf8",reject:!0,cleanup:!0,all:!1,windowsHide:!0,...r},r.env=__(r),r.stdio=th(r),process.platform==="win32"&&r_.basename(t,".exe")==="cmd"&&e.unshift("/q"),{file:t,args:e,options:r,parsed:n}},Dt=(t,e,r)=>typeof e!="string"&&!Buffer.isBuffer(e)?r===void 0?void 0:"":t.stripFinalNewline?s_(e):e,Wr=(t,e,r)=>{let n=ih(t,e,r),s=rh(t,e),i=sh(t,e);l_(n.options);let o;try{o=ei.spawn(n.file,n.args,n.options)}catch(y){let _=new ei.ChildProcess,d=Promise.reject(Vr({error:y,stdout:"",stderr:"",all:"",command:s,escapedCommand:i,parsed:n,timedOut:!1,isCanceled:!1,killed:!1}));return eh(_,d)}let a=g_(o),c=u_(o,n.options,a),l=h_(o,n.options,c),f={isCanceled:!1};o.kill=a_.bind(null,o.kill.bind(o)),o.cancel=c_.bind(null,o,f);let p=o_(async()=>{let[{error:y,exitCode:_,signal:d,timedOut:C},w,T,S]=await d_(o,n.options,l),x=Dt(n.options,w),R=Dt(n.options,T),k=Dt(n.options,S);if(y||_!==0||d!==null){let j=Vr({error:y,exitCode:_,signal:d,stdout:x,stderr:R,all:k,command:s,escapedCommand:i,parsed:n,timedOut:C,isCanceled:f.isCanceled,killed:o.killed});if(!n.options.reject)return j;throw j}return{command:s,escapedCommand:i,exitCode:0,stdout:x,stderr:R,all:k,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}});return f_(o,n.options.input),o.all=p_(o,n.options),eh(o,p)};et.exports=Wr;et.exports.sync=(t,e,r)=>{let n=ih(t,e,r),s=rh(t,e),i=sh(t,e);m_(n.options);let o;try{o=ei.spawnSync(n.file,n.args,n.options)}catch(l){throw Vr({error:l,stdout:"",stderr:"",all:"",command:s,escapedCommand:i,parsed:n,timedOut:!1,isCanceled:!1,killed:!1})}let a=Dt(n.options,o.stdout,o.error),c=Dt(n.options,o.stderr,o.error);if(o.error||o.status!==0||o.signal!==null){let l=Vr({stdout:a,stderr:c,error:o.error,signal:o.signal,exitCode:o.status,command:s,escapedCommand:i,parsed:n,timedOut:o.error&&o.error.code==="ETIMEDOUT",isCanceled:!1,killed:o.signal!==null});if(!n.options.reject)return l;throw l}return{command:s,escapedCommand:i,exitCode:0,stdout:a,stderr:c,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}};et.exports.command=(t,e)=>{let[r,...n]=nh(t);return Wr(r,n,e)};et.exports.commandSync=(t,e)=>{let[r,...n]=nh(t);return Wr.sync(r,n,e)};et.exports.node=(t,e,r={})=>{e&&!Array.isArray(e)&&typeof e=="object"&&(r=e,e=[]);let n=th.node(r),s=process.execArgv.filter(a=>!a.startsWith("--inspect")),{nodePath:i=process.execPath,nodeOptions:o=s}=r;return Wr(i,[...o,t,...Array.isArray(e)?e:[]],{...r,stdin:void 0,stdout:void 0,stderr:void 0,stdio:n,shell:!1})}});var E_={};gh(E_,{default:()=>lh});module.exports=yh(E_);function Gt(t){return t.replace("http://","https://").replace(/^\/\//,"https://")}var si=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function _h(t){return si.includes(t)}var bh=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Blob","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","WeakRef","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","FormData","URLSearchParams","HTMLElement","NaN",...si];function wh(t){return bh.includes(t)}var Eh=["null","undefined","string","number","bigint","boolean","symbol"];function Ch(t){return Eh.includes(t)}function ke(t){return e=>typeof e===t}var{toString:Sh}=Object.prototype,rt=t=>{let e=Sh.call(t).slice(8,-1);if(/HTML\w+Element/.test(e)&&u.domElement(t))return"HTMLElement";if(wh(e))return e},A=t=>e=>rt(e)===t;function u(t){if(t===null)return"null";switch(typeof t){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(t)?"NaN":"number";case"boolean":return"boolean";case"function":return"Function";case"bigint":return"bigint";case"symbol":return"symbol";default:}if(u.observable(t))return"Observable";if(u.array(t))return"Array";if(u.buffer(t))return"Buffer";let e=rt(t);if(e)return e;if(t instanceof String||t instanceof Boolean||t instanceof Number)throw new TypeError("Please don't use object wrappers for primitive types");return"Object"}u.undefined=ke("undefined");u.string=ke("string");var xh=ke("number");u.number=t=>xh(t)&&!u.nan(t);u.positiveNumber=t=>u.number(t)&&t>0;u.negativeNumber=t=>u.number(t)&&t<0;u.bigint=ke("bigint");u.function_=ke("function");u.null_=t=>t===null;u.class_=t=>u.function_(t)&&t.toString().startsWith("class ");u.boolean=t=>t===!0||t===!1;u.symbol=ke("symbol");u.numericString=t=>u.string(t)&&!u.emptyStringOrWhitespace(t)&&!Number.isNaN(Number(t));u.array=(t,e)=>Array.isArray(t)?u.function_(e)?t.every(r=>e(r)):!0:!1;u.buffer=t=>t?.constructor?.isBuffer?.(t)??!1;u.blob=t=>A("Blob")(t);u.nullOrUndefined=t=>u.null_(t)||u.undefined(t);u.object=t=>!u.null_(t)&&(typeof t=="object"||u.function_(t));u.iterable=t=>u.function_(t?.[Symbol.iterator]);u.asyncIterable=t=>u.function_(t?.[Symbol.asyncIterator]);u.generator=t=>u.iterable(t)&&u.function_(t?.next)&&u.function_(t?.throw);u.asyncGenerator=t=>u.asyncIterable(t)&&u.function_(t.next)&&u.function_(t.throw);u.nativePromise=t=>A("Promise")(t);var Th=t=>u.function_(t?.then)&&u.function_(t?.catch);u.promise=t=>u.nativePromise(t)||Th(t);u.generatorFunction=A("GeneratorFunction");u.asyncGeneratorFunction=t=>rt(t)==="AsyncGeneratorFunction";u.asyncFunction=t=>rt(t)==="AsyncFunction";u.boundFunction=t=>u.function_(t)&&!t.hasOwnProperty("prototype");u.regExp=A("RegExp");u.date=A("Date");u.error=A("Error");u.map=t=>A("Map")(t);u.set=t=>A("Set")(t);u.weakMap=t=>A("WeakMap")(t);u.weakSet=t=>A("WeakSet")(t);u.weakRef=t=>A("WeakRef")(t);u.int8Array=A("Int8Array");u.uint8Array=A("Uint8Array");u.uint8ClampedArray=A("Uint8ClampedArray");u.int16Array=A("Int16Array");u.uint16Array=A("Uint16Array");u.int32Array=A("Int32Array");u.uint32Array=A("Uint32Array");u.float32Array=A("Float32Array");u.float64Array=A("Float64Array");u.bigInt64Array=A("BigInt64Array");u.bigUint64Array=A("BigUint64Array");u.arrayBuffer=A("ArrayBuffer");u.sharedArrayBuffer=A("SharedArrayBuffer");u.dataView=A("DataView");u.enumCase=(t,e)=>Object.values(e).includes(t);u.directInstanceOf=(t,e)=>Object.getPrototypeOf(t)===e.prototype;u.urlInstance=t=>A("URL")(t);u.urlString=t=>{if(!u.string(t))return!1;try{return new URL(t),!0}catch{return!1}};u.truthy=t=>!!t;u.falsy=t=>!t;u.nan=t=>Number.isNaN(t);u.primitive=t=>u.null_(t)||Ch(typeof t);u.integer=t=>Number.isInteger(t);u.safeInteger=t=>Number.isSafeInteger(t);u.plainObject=t=>{if(typeof t!="object"||t===null)return!1;let e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};u.typedArray=t=>_h(rt(t));var Rh=t=>u.safeInteger(t)&&t>=0;u.arrayLike=t=>!u.nullOrUndefined(t)&&!u.function_(t)&&Rh(t.length);u.tupleLike=(t,e)=>u.array(e)&&u.array(t)&&e.length===t.length?e.every((r,n)=>r(t[n])):!1;u.inRange=(t,e)=>{if(u.number(e))return t>=Math.min(0,e)&&t<=Math.max(e,0);if(u.array(e)&&e.length===2)return t>=Math.min(...e)&&t<=Math.max(...e);throw new TypeError(`Invalid range: ${JSON.stringify(e)}`)};var Ph=1,Ah=["innerHTML","ownerDocument","style","attributes","nodeValue"];u.domElement=t=>u.object(t)&&t.nodeType===Ph&&u.string(t.nodeName)&&!u.plainObject(t)&&Ah.every(e=>e in t);u.observable=t=>t?t===t[Symbol.observable]?.()||t===t["@@observable"]?.():!1;u.nodeStream=t=>u.object(t)&&u.function_(t.pipe)&&!u.observable(t);u.infinite=t=>t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY;var ii=t=>e=>u.integer(e)&&Math.abs(e%2)===t;u.evenInteger=ii(0);u.oddInteger=ii(1);u.emptyArray=t=>u.array(t)&&t.length===0;u.nonEmptyArray=t=>u.array(t)&&t.length>0;u.emptyString=t=>u.string(t)&&t.length===0;var kh=t=>u.string(t)&&!/\S/.test(t);u.emptyStringOrWhitespace=t=>u.emptyString(t)||kh(t);u.nonEmptyString=t=>u.string(t)&&t.length>0;u.nonEmptyStringAndNotWhitespace=t=>u.string(t)&&!u.emptyStringOrWhitespace(t);u.emptyObject=t=>u.object(t)&&!u.map(t)&&!u.set(t)&&Object.keys(t).length===0;u.nonEmptyObject=t=>u.object(t)&&!u.map(t)&&!u.set(t)&&Object.keys(t).length>0;u.emptySet=t=>u.set(t)&&t.size===0;u.nonEmptySet=t=>u.set(t)&&t.size>0;u.emptyMap=t=>u.map(t)&&t.size===0;u.nonEmptyMap=t=>u.map(t)&&t.size>0;u.propertyKey=t=>u.any([u.string,u.number,u.symbol],t);u.formData=t=>A("FormData")(t);u.urlSearchParams=t=>A("URLSearchParams")(t);var oi=(t,e,r)=>{if(!u.function_(e))throw new TypeError(`Invalid predicate: ${JSON.stringify(e)}`);if(r.length===0)throw new TypeError("Invalid number of values");return t.call(r,e)};u.any=(t,...e)=>(u.array(t)?t:[t]).some(n=>oi(Array.prototype.some,n,e));u.all=(t,...e)=>oi(Array.prototype.every,t,e);var E=(t,e,r,n={})=>{if(!t){let{multipleValues:s}=n,i=s?`received values of types ${[...new Set(r.map(o=>`\`${u(o)}\``))].join(", ")}`:`received value of type \`${u(r)}\``;throw new TypeError(`Expected value which is \`${e}\`, ${i}.`)}},b={undefined:t=>E(u.undefined(t),"undefined",t),string:t=>E(u.string(t),"string",t),number:t=>E(u.number(t),"number",t),positiveNumber:t=>E(u.positiveNumber(t),"positive number",t),negativeNumber:t=>E(u.negativeNumber(t),"negative number",t),bigint:t=>E(u.bigint(t),"bigint",t),function_:t=>E(u.function_(t),"Function",t),null_:t=>E(u.null_(t),"null",t),class_:t=>E(u.class_(t),"Class",t),boolean:t=>E(u.boolean(t),"boolean",t),symbol:t=>E(u.symbol(t),"symbol",t),numericString:t=>E(u.numericString(t),"string with a number",t),array:(t,e)=>{E(u.array(t),"Array",t),e&&t.forEach(e)},buffer:t=>E(u.buffer(t),"Buffer",t),blob:t=>E(u.blob(t),"Blob",t),nullOrUndefined:t=>E(u.nullOrUndefined(t),"null or undefined",t),object:t=>E(u.object(t),"Object",t),iterable:t=>E(u.iterable(t),"Iterable",t),asyncIterable:t=>E(u.asyncIterable(t),"AsyncIterable",t),generator:t=>E(u.generator(t),"Generator",t),asyncGenerator:t=>E(u.asyncGenerator(t),"AsyncGenerator",t),nativePromise:t=>E(u.nativePromise(t),"native Promise",t),promise:t=>E(u.promise(t),"Promise",t),generatorFunction:t=>E(u.generatorFunction(t),"GeneratorFunction",t),asyncGeneratorFunction:t=>E(u.asyncGeneratorFunction(t),"AsyncGeneratorFunction",t),asyncFunction:t=>E(u.asyncFunction(t),"AsyncFunction",t),boundFunction:t=>E(u.boundFunction(t),"Function",t),regExp:t=>E(u.regExp(t),"RegExp",t),date:t=>E(u.date(t),"Date",t),error:t=>E(u.error(t),"Error",t),map:t=>E(u.map(t),"Map",t),set:t=>E(u.set(t),"Set",t),weakMap:t=>E(u.weakMap(t),"WeakMap",t),weakSet:t=>E(u.weakSet(t),"WeakSet",t),weakRef:t=>E(u.weakRef(t),"WeakRef",t),int8Array:t=>E(u.int8Array(t),"Int8Array",t),uint8Array:t=>E(u.uint8Array(t),"Uint8Array",t),uint8ClampedArray:t=>E(u.uint8ClampedArray(t),"Uint8ClampedArray",t),int16Array:t=>E(u.int16Array(t),"Int16Array",t),uint16Array:t=>E(u.uint16Array(t),"Uint16Array",t),int32Array:t=>E(u.int32Array(t),"Int32Array",t),uint32Array:t=>E(u.uint32Array(t),"Uint32Array",t),float32Array:t=>E(u.float32Array(t),"Float32Array",t),float64Array:t=>E(u.float64Array(t),"Float64Array",t),bigInt64Array:t=>E(u.bigInt64Array(t),"BigInt64Array",t),bigUint64Array:t=>E(u.bigUint64Array(t),"BigUint64Array",t),arrayBuffer:t=>E(u.arrayBuffer(t),"ArrayBuffer",t),sharedArrayBuffer:t=>E(u.sharedArrayBuffer(t),"SharedArrayBuffer",t),dataView:t=>E(u.dataView(t),"DataView",t),enumCase:(t,e)=>E(u.enumCase(t,e),"EnumCase",t),urlInstance:t=>E(u.urlInstance(t),"URL",t),urlString:t=>E(u.urlString(t),"string with a URL",t),truthy:t=>E(u.truthy(t),"truthy",t),falsy:t=>E(u.falsy(t),"falsy",t),nan:t=>E(u.nan(t),"NaN",t),primitive:t=>E(u.primitive(t),"primitive",t),integer:t=>E(u.integer(t),"integer",t),safeInteger:t=>E(u.safeInteger(t),"integer",t),plainObject:t=>E(u.plainObject(t),"plain object",t),typedArray:t=>E(u.typedArray(t),"TypedArray",t),arrayLike:t=>E(u.arrayLike(t),"array-like",t),tupleLike:(t,e)=>E(u.tupleLike(t,e),"tuple-like",t),domElement:t=>E(u.domElement(t),"HTMLElement",t),observable:t=>E(u.observable(t),"Observable",t),nodeStream:t=>E(u.nodeStream(t),"Node.js Stream",t),infinite:t=>E(u.infinite(t),"infinite number",t),emptyArray:t=>E(u.emptyArray(t),"empty array",t),nonEmptyArray:t=>E(u.nonEmptyArray(t),"non-empty array",t),emptyString:t=>E(u.emptyString(t),"empty string",t),emptyStringOrWhitespace:t=>E(u.emptyStringOrWhitespace(t),"empty string or whitespace",t),nonEmptyString:t=>E(u.nonEmptyString(t),"non-empty string",t),nonEmptyStringAndNotWhitespace:t=>E(u.nonEmptyStringAndNotWhitespace(t),"non-empty string and not whitespace",t),emptyObject:t=>E(u.emptyObject(t),"empty object",t),nonEmptyObject:t=>E(u.nonEmptyObject(t),"non-empty object",t),emptySet:t=>E(u.emptySet(t),"empty set",t),nonEmptySet:t=>E(u.nonEmptySet(t),"non-empty set",t),emptyMap:t=>E(u.emptyMap(t),"empty map",t),nonEmptyMap:t=>E(u.nonEmptyMap(t),"non-empty map",t),propertyKey:t=>E(u.propertyKey(t),"PropertyKey",t),formData:t=>E(u.formData(t),"FormData",t),urlSearchParams:t=>E(u.urlSearchParams(t),"URLSearchParams",t),evenInteger:t=>E(u.evenInteger(t),"even integer",t),oddInteger:t=>E(u.oddInteger(t),"odd integer",t),directInstanceOf:(t,e)=>E(u.directInstanceOf(t,e),"T",t),inRange:(t,e)=>E(u.inRange(t,e),"in range",t),any:(t,...e)=>E(u.any(t,...e),"predicate returns truthy for any value",e,{multipleValues:!0}),all:(t,...e)=>E(u.all(t,...e),"predicate returns truthy for all values",e,{multipleValues:!0})};Object.defineProperties(u,{class:{value:u.class_},function:{value:u.function_},null:{value:u.null_}});Object.defineProperties(b,{class:{value:b.class_},function:{value:b.function_},null:{value:b.null_}});var h=u;var ca=require("node:events");var Kr=class extends Error{constructor(e){super(e||"Promise was canceled"),this.name="CancelError"}get isCanceled(){return!0}},Oe=class t{static fn(e){return(...r)=>new t((n,s,i)=>{r.push(i),e(...r).then(n,s)})}constructor(e){this._cancelHandlers=[],this._isPending=!0,this._isCanceled=!1,this._rejectOnCancel=!0,this._promise=new Promise((r,n)=>{this._reject=n;let s=a=>{(!this._isCanceled||!o.shouldReject)&&(this._isPending=!1,r(a))},i=a=>{this._isPending=!1,n(a)},o=a=>{if(!this._isPending)throw new Error("The `onCancel` handler was attached after the promise settled.");this._cancelHandlers.push(a)};Object.defineProperties(o,{shouldReject:{get:()=>this._rejectOnCancel,set:a=>{this._rejectOnCancel=a}}}),e(s,i,o)})}then(e,r){return this._promise.then(e,r)}catch(e){return this._promise.catch(e)}finally(e){return this._promise.finally(e)}cancel(e){if(!(!this._isPending||this._isCanceled)){if(this._isCanceled=!0,this._cancelHandlers.length>0)try{for(let r of this._cancelHandlers)r()}catch(r){this._reject(r);return}this._rejectOnCancel&&this._reject(new Kr(e))}}get isCanceled(){return this._isCanceled}};Object.setPrototypeOf(Oe.prototype,Promise.prototype);function Oh(t){return h.object(t)&&"_onResponse"in t}var L=class extends Error{constructor(e,r,n){if(super(e),Object.defineProperty(this,"input",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stack",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"response",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Error.captureStackTrace(this,this.constructor),this.name="RequestError",this.code=r.code??"ERR_GOT_REQUEST_ERROR",this.input=r.input,Oh(n)?(Object.defineProperty(this,"request",{enumerable:!1,value:n}),Object.defineProperty(this,"response",{enumerable:!1,value:n.response}),this.options=n.options):this.options=n,this.timings=this.request?.timings,h.string(r.stack)&&h.string(this.stack)){let s=this.stack.indexOf(this.message)+this.message.length,i=this.stack.slice(s).split(`
`).reverse(),o=r.stack.slice(r.stack.indexOf(r.message)+r.message.length).split(`
`).reverse();for(;o.length>0&&o[0]===i[0];)i.shift();this.stack=`${this.stack.slice(0,s)}${i.reverse().join(`
`)}${o.reverse().join(`
`)}`}}},Vt=class extends L{constructor(e){super(`Redirected ${e.options.maxRedirects} times. Aborting.`,{},e),this.name="MaxRedirectsError",this.code="ERR_TOO_MANY_REDIRECTS"}},ie=class extends L{constructor(e){super(`Response code ${e.statusCode} (${e.statusMessage})`,{},e.request),this.name="HTTPError",this.code="ERR_NON_2XX_3XX_RESPONSE"}},Wt=class extends L{constructor(e,r){super(e.message,e,r),this.name="CacheError",this.code=this.code==="ERR_GOT_REQUEST_ERROR"?"ERR_CACHE_ACCESS":this.code}},nt=class extends L{constructor(e,r){super(e.message,e,r),this.name="UploadError",this.code=this.code==="ERR_GOT_REQUEST_ERROR"?"ERR_UPLOAD":this.code}},Yt=class extends L{constructor(e,r,n){super(e.message,e,n),Object.defineProperty(this,"timings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"event",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="TimeoutError",this.event=e.event,this.timings=r}},st=class extends L{constructor(e,r){super(e.message,e,r),this.name="ReadError",this.code=this.code==="ERR_GOT_REQUEST_ERROR"?"ERR_READING_RESPONSE_STREAM":this.code}},Kt=class extends L{constructor(e){super("Retrying",{},e),this.name="RetryError",this.code="ERR_RETRYING"}},Jt=class extends L{constructor(e){super("This operation was aborted.",{},e),this.code="ERR_ABORTED",this.name="AbortError"}};var Gn=N(require("node:process"),1),_r=require("node:buffer"),ia=require("node:stream"),br=require("node:url"),Tt=N(require("node:http"),1);var ci=require("events"),ui=require("util"),li=N(ai(),1),Lh=t=>{if(t.timings)return t.timings;let e={start:Date.now(),socket:void 0,lookup:void 0,connect:void 0,secureConnect:void 0,upload:void 0,response:void 0,end:void 0,error:void 0,abort:void 0,phases:{wait:void 0,dns:void 0,tcp:void 0,tls:void 0,request:void 0,firstByte:void 0,download:void 0,total:void 0}};t.timings=e;let r=o=>{o.once(ci.errorMonitor,()=>{e.error=Date.now(),e.phases.total=e.error-e.start})};r(t);let n=()=>{e.abort=Date.now(),e.phases.total=e.abort-e.start};t.prependOnceListener("abort",n);let s=o=>{if(e.socket=Date.now(),e.phases.wait=e.socket-e.start,ui.types.isProxy(o))return;let a=()=>{e.lookup=Date.now(),e.phases.dns=e.lookup-e.socket};o.prependOnceListener("lookup",a),(0,li.default)(o,{connect:()=>{e.connect=Date.now(),e.lookup===void 0&&(o.removeListener("lookup",a),e.lookup=e.connect,e.phases.dns=e.lookup-e.socket),e.phases.tcp=e.connect-e.lookup},secureConnect:()=>{e.secureConnect=Date.now(),e.phases.tls=e.secureConnect-e.connect}})};t.socket?s(t.socket):t.prependOnceListener("socket",s);let i=()=>{e.upload=Date.now(),e.phases.request=e.upload-(e.secureConnect??e.connect)};return t.writableFinished?i():t.prependOnceListener("finish",i),t.prependOnceListener("response",o=>{e.response=Date.now(),e.phases.firstByte=e.response-e.upload,o.timings=e,r(o),o.prependOnceListener("end",()=>{t.off("abort",n),o.off("aborted",n),!e.phases.total&&(e.end=Date.now(),e.phases.download=e.end-e.response,e.phases.total=e.end-e.start)}),o.prependOnceListener("aborted",n)}),e},hi=Lh;var Si=N(require("node:events"),1),ot=N(require("node:url"),1),xi=N(require("node:crypto"),1),tr=N(require("node:stream"),1);var qh="text/plain",Nh="us-ascii",Zr=(t,e)=>e.some(r=>r instanceof RegExp?r.test(t):r===t),Bh=new Set(["https:","http:","file:"]),vh=t=>{try{let{protocol:e}=new URL(t);return e.endsWith(":")&&!Bh.has(e)}catch{return!1}},jh=(t,{stripHash:e})=>{let r=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(t);if(!r)throw new Error(`Invalid URL: ${t}`);let{type:n,data:s,hash:i}=r.groups,o=n.split(";");i=e?"":i;let a=!1;o[o.length-1]==="base64"&&(o.pop(),a=!0);let c=o.shift()?.toLowerCase()??"",f=[...o.map(m=>{let[p,y=""]=m.split("=").map(_=>_.trim());return p==="charset"&&(y=y.toLowerCase(),y===Nh)?"":`${p}${y?`=${y}`:""}`}).filter(Boolean)];return a&&f.push("base64"),(f.length>0||c&&c!==qh)&&f.unshift(c),`data:${f.join(";")},${a?s.trim():s}${i?`#${i}`:""}`};function en(t,e){if(e={defaultProtocol:"http",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,removeExplicitPort:!1,sortQueryParameters:!0,...e},typeof e.defaultProtocol=="string"&&!e.defaultProtocol.endsWith(":")&&(e.defaultProtocol=`${e.defaultProtocol}:`),t=t.trim(),/^data:/i.test(t))return jh(t,e);if(vh(t))return t;let r=t.startsWith("//");!r&&/^\.*\//.test(t)||(t=t.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,e.defaultProtocol));let s=new URL(t);if(e.forceHttp&&e.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(e.forceHttp&&s.protocol==="https:"&&(s.protocol="http:"),e.forceHttps&&s.protocol==="http:"&&(s.protocol="https:"),e.stripAuthentication&&(s.username="",s.password=""),e.stripHash?s.hash="":e.stripTextFragment&&(s.hash=s.hash.replace(/#?:~:text.*?$/i,"")),s.pathname){let o=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g,a=0,c="";for(;;){let f=o.exec(s.pathname);if(!f)break;let m=f[0],p=f.index,y=s.pathname.slice(a,p);c+=y.replace(/\/{2,}/g,"/"),c+=m,a=p+m.length}let l=s.pathname.slice(a,s.pathname.length);c+=l.replace(/\/{2,}/g,"/"),s.pathname=c}if(s.pathname)try{s.pathname=decodeURI(s.pathname)}catch{}if(e.removeDirectoryIndex===!0&&(e.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(e.removeDirectoryIndex)&&e.removeDirectoryIndex.length>0){let o=s.pathname.split("/"),a=o[o.length-1];Zr(a,e.removeDirectoryIndex)&&(o=o.slice(0,-1),s.pathname=o.slice(1).join("/")+"/")}if(s.hostname&&(s.hostname=s.hostname.replace(/\.$/,""),e.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(s.hostname)&&(s.hostname=s.hostname.replace(/^www\./,""))),Array.isArray(e.removeQueryParameters))for(let o of[...s.searchParams.keys()])Zr(o,e.removeQueryParameters)&&s.searchParams.delete(o);if(!Array.isArray(e.keepQueryParameters)&&e.removeQueryParameters===!0&&(s.search=""),Array.isArray(e.keepQueryParameters)&&e.keepQueryParameters.length>0)for(let o of[...s.searchParams.keys()])Zr(o,e.keepQueryParameters)||s.searchParams.delete(o);if(e.sortQueryParameters){s.searchParams.sort();try{s.search=decodeURIComponent(s.search)}catch{}}e.removeTrailingSlash&&(s.pathname=s.pathname.replace(/\/$/,"")),e.removeExplicitPort&&s.port&&(s.port="");let i=t;return t=s.toString(),!e.removeSingleSlash&&s.pathname==="/"&&!i.endsWith("/")&&s.hash===""&&(t=t.replace(/\/$/,"")),(e.removeTrailingSlash||s.pathname==="/")&&s.hash===""&&e.removeSingleSlash&&(t=t.replace(/\/$/,"")),r&&!e.normalizeProtocol&&(t=t.replace(/^http:\/\//,"//")),e.stripProtocol&&(t=t.replace(/^(?:https?:)?\/\//,"")),t}var Ti=N(Xt(),1),er=N(mi(),1);var gi=require("node:stream");function Ie(t){return Object.fromEntries(Object.entries(t).map(([e,r])=>[e.toLowerCase(),r]))}var Le=class extends gi.Readable{statusCode;headers;body;url;constructor({statusCode:e,headers:r,body:n,url:s}){if(typeof e!="number")throw new TypeError("Argument `statusCode` should be a number");if(typeof r!="object")throw new TypeError("Argument `headers` should be an object");if(!(n instanceof Uint8Array))throw new TypeError("Argument `body` should be a buffer");if(typeof s!="string")throw new TypeError("Argument `url` should be a string");super({read(){this.push(n),this.push(null)}}),this.statusCode=e,this.headers=Ie(r),this.body=n,this.url=s}};var at=N(Ei(),1);var Zh=["aborted","complete","headers","httpVersion","httpVersionMinor","httpVersionMajor","method","rawHeaders","rawTrailers","setTimeout","socket","statusCode","statusMessage","trailers","url"];function on(t,e){if(e._readableState.autoDestroy)throw new Error("The second stream must have the `autoDestroy` option set to `false`");let r=new Set([...Object.keys(t),...Zh]),n={};for(let s of r)s in e||(n[s]={get(){let i=t[s];return typeof i=="function"?i.bind(t):i},set(i){t[s]=i},enumerable:!0,configurable:!1});return Object.defineProperties(e,n),t.once("aborted",()=>{e.destroy(),e.emit("aborted")}),t.once("close",()=>{t.complete&&e.readable?e.once("end",()=>{e.emit("close")}):e.emit("close")}),e}var Zt=class extends Error{constructor(e){super(e.message),Object.assign(this,e)}},re=class extends Error{constructor(e){super(e.message),Object.assign(this,e)}};var cn=class{constructor(e,r){this.hooks=new Map,this.request=()=>(n,s)=>{let i;if(typeof n=="string")i=an(ot.default.parse(n)),n={};else if(n instanceof ot.default.URL)i=an(ot.default.parse(n.toString())),n={};else{let[p,...y]=(n.path??"").split("?"),_=y.length>0?`?${y.join("?")}`:"";i=an({...n,pathname:p,search:_})}n={headers:{},method:"GET",cache:!0,strictTtl:!1,automaticFailover:!1,...n,...rf(i)},n.headers=Object.fromEntries(ef(n.headers).map(([p,y])=>[p.toLowerCase(),y]));let o=new Si.default,a=en(ot.default.format(i),{stripWWW:!1,removeTrailingSlash:!1,stripAuthentication:!1}),c=`${n.method}:${a}`;n.body&&n.method!==void 0&&["POST","PATCH","PUT"].includes(n.method)&&(n.body instanceof tr.default.Readable?n.cache=!1:c+=`:${xi.default.createHash("md5").update(n.body).digest("hex")}`);let l=!1,f=!1,m=p=>{f=!0;let y=!1,_=()=>{},d=new Promise(w=>{_=()=>{y||(y=!0,w())}}),C=async w=>{if(l){w.status=w.statusCode;let S=er.default.fromObject(l.cachePolicy).revalidatedPolicy(p,w);if(!S.modified){w.resume(),await new Promise(R=>{w.once("end",R)});let x=Ci(S.policy.responseHeaders());w=new Le({statusCode:l.statusCode,headers:x,body:l.body,url:l.url}),w.cachePolicy=S.policy,w.fromCache=!0}}w.fromCache||(w.cachePolicy=new er.default(p,w,p),w.fromCache=!1);let T;p.cache&&w.cachePolicy.storable()?(T=tf(w),(async()=>{try{let S=Ti.default.buffer(w);await Promise.race([d,new Promise(j=>w.once("end",j)),new Promise(j=>w.once("close",j))]);let x=await S,R={url:w.url,statusCode:w.fromCache?l.statusCode:w.statusCode,body:x,cachePolicy:w.cachePolicy.toObject()},k=p.strictTtl?w.cachePolicy.timeToLive():void 0;if(p.maxTtl&&(k=k?Math.min(k,p.maxTtl):p.maxTtl),this.hooks.size>0)for(let j of this.hooks.keys())R=await this.runHook(j,R,w);await this.cache.set(c,R,k)}catch(S){o.emit("error",new re(S))}})()):p.cache&&l&&(async()=>{try{await this.cache.delete(c)}catch(S){o.emit("error",new re(S))}})(),o.emit("response",T??w),typeof s=="function"&&s(T??w)};try{let w=this.cacheRequest(p,C);w.once("error",_),w.once("abort",_),w.once("destroy",_),o.emit("request",w)}catch(w){o.emit("error",new Zt(w))}};return(async()=>{let p=async _=>{await Promise.resolve();let d=_.cache?await this.cache.get(c):void 0;if(d===void 0&&!_.forceRefresh){m(_);return}let C=er.default.fromObject(d.cachePolicy);if(C.satisfiesWithoutRevalidation(_)&&!_.forceRefresh){let w=Ci(C.responseHeaders()),T=new Le({statusCode:d.statusCode,headers:w,body:d.body,url:d.url});T.cachePolicy=C,T.fromCache=!0,o.emit("response",T),typeof s=="function"&&s(T)}else C.satisfiesWithoutRevalidation(_)&&Date.now()>=C.timeToLive()&&_.forceRefresh?(await this.cache.delete(c),_.headers=C.revalidationHeaders(_),m(_)):(l=d,_.headers=C.revalidationHeaders(_),m(_))},y=_=>o.emit("error",new re(_));if(this.cache instanceof at.default){let _=this.cache;_.once("error",y),o.on("error",()=>_.removeListener("error",y)),o.on("response",()=>_.removeListener("error",y))}try{await p(n)}catch(_){n.automaticFailover&&!f&&m(n),o.emit("error",new re(_))}})(),o},this.addHook=(n,s)=>{this.hooks.has(n)||this.hooks.set(n,s)},this.removeHook=n=>this.hooks.delete(n),this.getHook=n=>this.hooks.get(n),this.runHook=async(n,...s)=>this.hooks.get(n)?.(...s),r instanceof at.default?this.cache=r:typeof r=="string"?this.cache=new at.default({uri:r,namespace:"cacheable-request"}):this.cache=new at.default({store:r,namespace:"cacheable-request"}),this.request=this.request.bind(this),this.cacheRequest=e}},ef=Object.entries,tf=t=>{let e=new tr.PassThrough({autoDestroy:!1});return on(t,e),t.pipe(e)},rf=t=>{let e={...t};return e.path=`${t.pathname||"/"}${t.search||""}`,delete e.pathname,delete e.search,e},an=t=>({protocol:t.protocol,auth:t.auth,hostname:t.hostname||t.host||"localhost",port:t.port,pathname:t.pathname,search:t.search}),Ci=t=>{let e=[];for(let r of Object.keys(t))e[r.toLowerCase()]=t[r];return e},Ri=cn;var oa=N(Oi(),1);var aa=N(Xt(),1);var G=t=>typeof t=="function";var cf=t=>G(t[Symbol.asyncIterator]);async function*uf(t){let e=t.getReader();for(;;){let{done:r,value:n}=await e.read();if(r)break;yield n}}var Ii=t=>{if(cf(t))return t;if(G(t.getReader))return uf(t);throw new TypeError("Unsupported data source: Expected either ReadableStream or async iterable.")};var Li="abcdefghijklmnopqrstuvwxyz0123456789";function qi(){let t=16,e="";for(;t--;)e+=Li[Math.random()*Li.length<<0];return e}var ln=t=>String(t).replace(/\r|\n/g,(e,r,n)=>e==="\r"&&n[r+1]!==`
`||e===`
`&&n[r-1]!=="\r"?`\r
`:e);var lf=t=>Object.prototype.toString.call(t).slice(8,-1).toLowerCase();function hn(t){if(lf(t)!=="object")return!1;let e=Object.getPrototypeOf(t);return e==null?!0:(e.constructor&&e.constructor.toString())===Object.toString()}function Ni(t,e){if(typeof e=="string"){for(let[r,n]of Object.entries(t))if(e.toLowerCase()===r.toLowerCase())return n}}var Bi=t=>new Proxy(t,{get:(e,r)=>Ni(e,r),has:(e,r)=>Ni(e,r)!==void 0});var qe=t=>!!(t&&G(t.constructor)&&t[Symbol.toStringTag]==="FormData"&&G(t.append)&&G(t.getAll)&&G(t.entries)&&G(t[Symbol.iterator]));var fn=t=>String(t).replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/"/g,"%22");var oe=t=>!!(t&&typeof t=="object"&&G(t.constructor)&&t[Symbol.toStringTag]==="File"&&G(t.stream)&&t.name!=null);var ct=function(t,e,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(t,r):s?s.value=r:e.set(t,r),r},I=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},ut,ae,lt,rr,ht,ye,ft,dt,nr,dn,vi,hf={enableAdditionalHeaders:!1},sr={writable:!1,configurable:!1},ir=class{constructor(e,r,n){if(ut.add(this),ae.set(this,`\r
`),lt.set(this,void 0),rr.set(this,void 0),ht.set(this,"-".repeat(2)),ye.set(this,new TextEncoder),ft.set(this,void 0),dt.set(this,void 0),nr.set(this,void 0),!qe(e))throw new TypeError("Expected first argument to be a FormData instance.");let s;if(hn(r)?n=r:s=r,s||(s=qi()),typeof s!="string")throw new TypeError("Expected boundary argument to be a string.");if(n&&!hn(n))throw new TypeError("Expected options argument to be an object.");ct(this,dt,Array.from(e.entries()),"f"),ct(this,nr,{...hf,...n},"f"),ct(this,lt,I(this,ye,"f").encode(I(this,ae,"f")),"f"),ct(this,rr,I(this,lt,"f").byteLength,"f"),this.boundary=`form-data-boundary-${s}`,this.contentType=`multipart/form-data; boundary=${this.boundary}`,ct(this,ft,I(this,ye,"f").encode(`${I(this,ht,"f")}${this.boundary}${I(this,ht,"f")}${I(this,ae,"f").repeat(2)}`),"f");let i={"Content-Type":this.contentType},o=I(this,ut,"m",vi).call(this);o&&(this.contentLength=o,i["Content-Length"]=o),this.headers=Bi(Object.freeze(i)),Object.defineProperties(this,{boundary:sr,contentType:sr,contentLength:sr,headers:sr})}getContentLength(){return this.contentLength==null?void 0:Number(this.contentLength)}*values(){for(let[e,r]of I(this,dt,"f")){let n=oe(r)?r:I(this,ye,"f").encode(ln(r));yield I(this,ut,"m",dn).call(this,e,n),yield n,yield I(this,lt,"f")}yield I(this,ft,"f")}async*encode(){for(let e of this.values())oe(e)?yield*Ii(e.stream()):yield e}[(ae=new WeakMap,lt=new WeakMap,rr=new WeakMap,ht=new WeakMap,ye=new WeakMap,ft=new WeakMap,dt=new WeakMap,nr=new WeakMap,ut=new WeakSet,dn=function(r,n){let s="";s+=`${I(this,ht,"f")}${this.boundary}${I(this,ae,"f")}`,s+=`Content-Disposition: form-data; name="${fn(r)}"`,oe(n)&&(s+=`; filename="${fn(n.name)}"${I(this,ae,"f")}`,s+=`Content-Type: ${n.type||"application/octet-stream"}`);let i=oe(n)?n.size:n.byteLength;return I(this,nr,"f").enableAdditionalHeaders===!0&&i!=null&&!isNaN(i)&&(s+=`${I(this,ae,"f")}Content-Length: ${oe(n)?n.size:n.byteLength}`),I(this,ye,"f").encode(`${s}${I(this,ae,"f").repeat(2)}`)},vi=function(){let r=0;for(let[n,s]of I(this,dt,"f")){let i=oe(s)?s:I(this,ye,"f").encode(ln(s)),o=oe(i)?i.size:i.byteLength;if(o==null||isNaN(o))return;r+=I(this,ut,"m",dn).call(this,n,i).byteLength,r+=o,r+=I(this,rr,"f")}return String(r+I(this,ft,"f").byteLength)},Symbol.iterator)](){return this.values()}[Symbol.asyncIterator](){return this.encode()}};var ji=require("node:buffer"),Mi=require("node:util");function pt(t){return h.nodeStream(t)&&h.function_(t.getBoundary)}async function pn(t,e){if(e&&"content-length"in e)return Number(e["content-length"]);if(!t)return 0;if(h.string(t))return ji.Buffer.byteLength(t);if(h.buffer(t))return t.length;if(pt(t))return(0,Mi.promisify)(t.getLength.bind(t))()}function mt(t,e,r){let n={};for(let s of r){let i=(...o)=>{e.emit(s,...o)};n[s]=i,t.on(s,i)}return()=>{for(let[s,i]of Object.entries(n))t.off(s,i)}}var Ui=N(require("node:net"),1);function mn(){let t=[];return{once(e,r,n){e.once(r,n),t.push({origin:e,event:r,fn:n})},unhandleAll(){for(let e of t){let{origin:r,event:n,fn:s}=e;r.removeListener(n,s)}t.length=0}}}var Hi=Symbol("reentry"),ff=()=>{},gt=class extends Error{constructor(e,r){super(`Timeout awaiting '${r}' for ${e}ms`),Object.defineProperty(this,"event",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="TimeoutError",this.code="ETIMEDOUT"}};function gn(t,e,r){if(Hi in t)return ff;t[Hi]=!0;let n=[],{once:s,unhandleAll:i}=mn(),o=(d,C,w)=>{let T=setTimeout(C,d,d,w);T.unref?.();let S=()=>{clearTimeout(T)};return n.push(S),S},{host:a,hostname:c}=r,l=(d,C)=>{t.destroy(new gt(d,C))},f=()=>{for(let d of n)d();i()};if(t.once("error",d=>{if(f(),t.listenerCount("error")===0)throw d}),typeof e.request<"u"){let d=o(e.request,l,"request");s(t,"response",C=>{s(C,"end",d)})}if(typeof e.socket<"u"){let{socket:d}=e,C=()=>{l(d,"socket")};t.setTimeout(d,C),n.push(()=>{t.removeListener("timeout",C)})}let m=typeof e.lookup<"u",p=typeof e.connect<"u",y=typeof e.secureConnect<"u",_=typeof e.send<"u";return(m||p||y||_)&&s(t,"socket",d=>{let{socketPath:C}=t;if(d.connecting){let w=!!(C??Ui.default.isIP(c??a??"")!==0);if(m&&!w&&typeof d.address().address>"u"){let T=o(e.lookup,l,"lookup");s(d,"lookup",T)}if(p){let T=()=>o(e.connect,l,"connect");w?s(d,"connect",T()):s(d,"lookup",S=>{S===null&&s(d,"connect",T())})}y&&r.protocol==="https:"&&s(d,"connect",()=>{let T=o(e.secureConnect,l,"secureConnect");s(d,"secureConnect",T)})}if(_){let w=()=>o(e.send,l,"send");d.connecting?s(d,"connect",()=>{s(t,"upload-complete",w())}):s(t,"upload-complete",w())}}),typeof e.response<"u"&&s(t,"upload-complete",()=>{let d=o(e.response,l,"response");s(t,"response",d)}),typeof e.read<"u"&&s(t,"response",d=>{let C=o(e.read,l,"read");s(d,"end",C)}),f}function yn(t){t=t;let e={protocol:t.protocol,hostname:h.string(t.hostname)&&t.hostname.startsWith("[")?t.hostname.slice(1,-1):t.hostname,host:t.host,hash:t.hash,search:t.search,pathname:t.pathname,href:t.href,path:`${t.pathname||""}${t.search||""}`};return h.string(t.port)&&t.port.length>0&&(e.port=Number(t.port)),(t.username||t.password)&&(e.auth=`${t.username||""}:${t.password||""}`),e}var yt=class{constructor(){Object.defineProperty(this,"weakMap",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"map",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.weakMap=new WeakMap,this.map=new Map}set(e,r){typeof e=="object"?this.weakMap.set(e,r):this.map.set(e,r)}get(e){return typeof e=="object"?this.weakMap.get(e):this.map.get(e)}has(e){return typeof e=="object"?this.weakMap.has(e):this.map.has(e)}};var df=({attemptCount:t,retryOptions:e,error:r,retryAfter:n,computedValue:s})=>{if(r.name==="RetryError")return 1;if(t>e.limit)return 0;let i=e.methods.includes(r.options.method),o=e.errorCodes.includes(r.code),a=r.response&&e.statusCodes.includes(r.response.statusCode);if(!i||!o&&!a)return 0;if(r.response){if(n)return n>s?0:n;if(r.response.statusCode===413)return 0}let c=Math.random()*e.noise;return Math.min(2**(t-1)*1e3,e.backoffLimit)+c},Di=df;var Zo=N(require("node:process"),1),xt=require("node:util"),ne=require("node:url"),ea=require("node:tls"),ta=N(require("node:http"),1),ra=N(require("node:https"),1);var J=require("node:dns"),ar=require("node:util"),Wi=N(require("node:os"),1),{Resolver:Fi}=J.promises,Ne=Symbol("cacheableLookupCreateConnection"),_n=Symbol("cacheableLookupInstance"),$i=Symbol("expires"),pf=typeof J.ALL=="number",zi=t=>{if(!(t&&typeof t.createConnection=="function"))throw new Error("Expected an Agent instance as the first argument")},mf=t=>{for(let e of t)e.family!==6&&(e.address=`::ffff:${e.address}`,e.family=6)},Gi=()=>{let t=!1,e=!1;for(let r of Object.values(Wi.default.networkInterfaces()))for(let n of r)if(!n.internal&&(n.family==="IPv6"?e=!0:t=!0,t&&e))return{has4:t,has6:e};return{has4:t,has6:e}},gf=t=>Symbol.iterator in t,or=t=>t.catch(e=>{if(e.code==="ENODATA"||e.code==="ENOTFOUND"||e.code==="ENOENT")return[];throw e}),Vi={ttl:!0},yf={all:!0},_f={all:!0,family:4},bf={all:!0,family:6},_t=class{constructor({cache:e=new Map,maxTtl:r=1/0,fallbackDuration:n=3600,errorTtl:s=.15,resolver:i=new Fi,lookup:o=J.lookup}={}){if(this.maxTtl=r,this.errorTtl=s,this._cache=e,this._resolver=i,this._dnsLookup=o&&(0,ar.promisify)(o),this.stats={cache:0,query:0},this._resolver instanceof Fi?(this._resolve4=this._resolver.resolve4.bind(this._resolver),this._resolve6=this._resolver.resolve6.bind(this._resolver)):(this._resolve4=(0,ar.promisify)(this._resolver.resolve4.bind(this._resolver)),this._resolve6=(0,ar.promisify)(this._resolver.resolve6.bind(this._resolver))),this._iface=Gi(),this._pending={},this._nextRemovalTime=!1,this._hostnamesToFallback=new Set,this.fallbackDuration=n,n>0){let a=setInterval(()=>{this._hostnamesToFallback.clear()},n*1e3);a.unref&&a.unref(),this._fallbackInterval=a}this.lookup=this.lookup.bind(this),this.lookupAsync=this.lookupAsync.bind(this)}set servers(e){this.clear(),this._resolver.setServers(e)}get servers(){return this._resolver.getServers()}lookup(e,r,n){if(typeof r=="function"?(n=r,r={}):typeof r=="number"&&(r={family:r}),!n)throw new Error("Callback must be a function.");this.lookupAsync(e,r).then(s=>{r.all?n(null,s):n(null,s.address,s.family,s.expires,s.ttl,s.source)},n)}async lookupAsync(e,r={}){typeof r=="number"&&(r={family:r});let n=await this.query(e);if(r.family===6){let s=n.filter(i=>i.family===6);r.hints&J.V4MAPPED&&(pf&&r.hints&J.ALL||s.length===0)?mf(n):n=s}else r.family===4&&(n=n.filter(s=>s.family===4));if(r.hints&J.ADDRCONFIG){let{_iface:s}=this;n=n.filter(i=>i.family===6?s.has6:s.has4)}if(n.length===0){let s=new Error(`cacheableLookup ENOTFOUND ${e}`);throw s.code="ENOTFOUND",s.hostname=e,s}return r.all?n:n[0]}async query(e){let r="cache",n=await this._cache.get(e);if(n&&this.stats.cache++,!n){let s=this._pending[e];if(s)this.stats.cache++,n=await s;else{r="query";let i=this.queryAndCache(e);this._pending[e]=i,this.stats.query++;try{n=await i}finally{delete this._pending[e]}}}return n=n.map(s=>({...s,source:r})),n}async _resolve(e){let[r,n]=await Promise.all([or(this._resolve4(e,Vi)),or(this._resolve6(e,Vi))]),s=0,i=0,o=0,a=Date.now();for(let c of r)c.family=4,c.expires=a+c.ttl*1e3,s=Math.max(s,c.ttl);for(let c of n)c.family=6,c.expires=a+c.ttl*1e3,i=Math.max(i,c.ttl);return r.length>0?n.length>0?o=Math.min(s,i):o=s:o=i,{entries:[...r,...n],cacheTtl:o}}async _lookup(e){try{let[r,n]=await Promise.all([or(this._dnsLookup(e,_f)),or(this._dnsLookup(e,bf))]);return{entries:[...r,...n],cacheTtl:0}}catch{return{entries:[],cacheTtl:0}}}async _set(e,r,n){if(this.maxTtl>0&&n>0){n=Math.min(n,this.maxTtl)*1e3,r[$i]=Date.now()+n;try{await this._cache.set(e,r,n)}catch(s){this.lookupAsync=async()=>{let i=new Error("Cache Error. Please recreate the CacheableLookup instance.");throw i.cause=s,i}}gf(this._cache)&&this._tick(n)}}async queryAndCache(e){if(this._hostnamesToFallback.has(e))return this._dnsLookup(e,yf);let r=await this._resolve(e);r.entries.length===0&&this._dnsLookup&&(r=await this._lookup(e),r.entries.length!==0&&this.fallbackDuration>0&&this._hostnamesToFallback.add(e));let n=r.entries.length===0?this.errorTtl:r.cacheTtl;return await this._set(e,r.entries,n),r.entries}_tick(e){let r=this._nextRemovalTime;(!r||e<r)&&(clearTimeout(this._removalTimeout),this._nextRemovalTime=e,this._removalTimeout=setTimeout(()=>{this._nextRemovalTime=!1;let n=1/0,s=Date.now();for(let[i,o]of this._cache){let a=o[$i];s>=a?this._cache.delete(i):a<n&&(n=a)}n!==1/0&&this._tick(n-s)},e),this._removalTimeout.unref&&this._removalTimeout.unref())}install(e){if(zi(e),Ne in e)throw new Error("CacheableLookup has been already installed");e[Ne]=e.createConnection,e[_n]=this,e.createConnection=(r,n)=>("lookup"in r||(r.lookup=this.lookup),e[Ne](r,n))}uninstall(e){if(zi(e),e[Ne]){if(e[_n]!==this)throw new Error("The agent is not owned by this CacheableLookup instance");e.createConnection=e[Ne],delete e[Ne],delete e[_n]}}updateInterfaceInfo(){let{_iface:e}=this;this._iface=Gi(),(e.has4&&!this._iface.has4||e.has6&&!this._iface.has6)&&this._cache.clear()}clear(e){if(e){this._cache.delete(e);return}this._cache.clear()}};var na=N(Jo(),1);function Fn(t){let e=[],r=t.split(",");for(let n of r){let[s,...i]=n.split(";"),o=s.trim();if(o[0]!=="<"||o[o.length-1]!==">")throw new Error(`Invalid format of the Link header reference: ${o}`);let a=o.slice(1,-1),c={};if(i.length===0)throw new Error(`Unexpected end of Link header parameters: ${i.join(";")}`);for(let l of i){let f=l.trim(),m=f.indexOf("=");if(m===-1)throw new Error(`Failed to parse Link header: ${t}`);let p=f.slice(0,m).trim(),y=f.slice(m+1).trim();c[p]=y}e.push({reference:a,parameters:c})}return e}var[Qo,Dd]=Zo.default.versions.node.split(".").map(Number);function Fd(t){for(let e in t){let r=t[e];b.any([h.string,h.number,h.boolean,h.null_,h.undefined],r)}}var $d=new Map,pr,zd=()=>pr||(pr=new _t,pr),Gd={request:void 0,agent:{http:void 0,https:void 0,http2:void 0},h2session:void 0,decompress:!0,timeout:{connect:void 0,lookup:void 0,read:void 0,request:void 0,response:void 0,secureConnect:void 0,send:void 0,socket:void 0},prefixUrl:"",body:void 0,form:void 0,json:void 0,cookieJar:void 0,ignoreInvalidCookies:!1,searchParams:void 0,dnsLookup:void 0,dnsCache:void 0,context:{},hooks:{init:[],beforeRequest:[],beforeError:[],beforeRedirect:[],beforeRetry:[],afterResponse:[]},followRedirect:!0,maxRedirects:10,cache:void 0,throwHttpErrors:!0,username:"",password:"",http2:!1,allowGetBody:!1,headers:{"user-agent":"got (https://github.com/sindresorhus/got)"},methodRewriting:!1,dnsLookupIpVersion:void 0,parseJson:JSON.parse,stringifyJson:JSON.stringify,retry:{limit:2,methods:["GET","PUT","HEAD","DELETE","OPTIONS","TRACE"],statusCodes:[408,413,429,500,502,503,504,521,522,524],errorCodes:["ETIMEDOUT","ECONNRESET","EADDRINUSE","ECONNREFUSED","EPIPE","ENOTFOUND","ENETUNREACH","EAI_AGAIN"],maxRetryAfter:void 0,calculateDelay:({computedValue:t})=>t,backoffLimit:Number.POSITIVE_INFINITY,noise:100},localAddress:void 0,method:"GET",createConnection:void 0,cacheOptions:{shared:void 0,cacheHeuristic:void 0,immutableMinTimeToLive:void 0,ignoreCargoCult:void 0},https:{alpnProtocols:void 0,rejectUnauthorized:void 0,checkServerIdentity:void 0,certificateAuthority:void 0,key:void 0,certificate:void 0,passphrase:void 0,pfx:void 0,ciphers:void 0,honorCipherOrder:void 0,minVersion:void 0,maxVersion:void 0,signatureAlgorithms:void 0,tlsSessionLifetime:void 0,dhparam:void 0,ecdhCurve:void 0,certificateRevocationLists:void 0},encoding:void 0,resolveBodyOnly:!1,isStream:!1,responseType:"text",url:void 0,pagination:{transform(t){return t.request.options.responseType==="json"?t.body:JSON.parse(t.body)},paginate({response:t}){let e=t.headers.link;if(typeof e!="string"||e.trim()==="")return!1;let n=Fn(e).find(s=>s.parameters.rel==="next"||s.parameters.rel==='"next"');return n?{url:new ne.URL(n.reference,t.url)}:!1},filter:()=>!0,shouldContinue:()=>!0,countLimit:Number.POSITIVE_INFINITY,backoff:0,requestLimit:1e4,stackAllItems:!1},setHost:!0,maxHeaderSize:void 0,signal:void 0,enableUnixSockets:!0},Vd=t=>{let{hooks:e,retry:r}=t,n={...t,context:{...t.context},cacheOptions:{...t.cacheOptions},https:{...t.https},agent:{...t.agent},headers:{...t.headers},retry:{...r,errorCodes:[...r.errorCodes],methods:[...r.methods],statusCodes:[...r.statusCodes]},timeout:{...t.timeout},hooks:{init:[...e.init],beforeRequest:[...e.beforeRequest],beforeError:[...e.beforeError],beforeRedirect:[...e.beforeRedirect],beforeRetry:[...e.beforeRetry],afterResponse:[...e.afterResponse]},searchParams:t.searchParams?new ne.URLSearchParams(t.searchParams):void 0,pagination:{...t.pagination}};return n.url!==void 0&&(n.prefixUrl=""),n},Wd=t=>{let{hooks:e,retry:r}=t,n={...t};return h.object(t.context)&&(n.context={...t.context}),h.object(t.cacheOptions)&&(n.cacheOptions={...t.cacheOptions}),h.object(t.https)&&(n.https={...t.https}),h.object(t.cacheOptions)&&(n.cacheOptions={...n.cacheOptions}),h.object(t.agent)&&(n.agent={...t.agent}),h.object(t.headers)&&(n.headers={...t.headers}),h.object(r)&&(n.retry={...r},h.array(r.errorCodes)&&(n.retry.errorCodes=[...r.errorCodes]),h.array(r.methods)&&(n.retry.methods=[...r.methods]),h.array(r.statusCodes)&&(n.retry.statusCodes=[...r.statusCodes])),h.object(t.timeout)&&(n.timeout={...t.timeout}),h.object(e)&&(n.hooks={...e},h.array(e.init)&&(n.hooks.init=[...e.init]),h.array(e.beforeRequest)&&(n.hooks.beforeRequest=[...e.beforeRequest]),h.array(e.beforeError)&&(n.hooks.beforeError=[...e.beforeError]),h.array(e.beforeRedirect)&&(n.hooks.beforeRedirect=[...e.beforeRedirect]),h.array(e.beforeRetry)&&(n.hooks.beforeRetry=[...e.beforeRetry]),h.array(e.afterResponse)&&(n.hooks.afterResponse=[...e.afterResponse])),h.object(t.pagination)&&(n.pagination={...t.pagination}),n},Yd=t=>{let e=[t.timeout.socket,t.timeout.connect,t.timeout.lookup,t.timeout.request,t.timeout.secureConnect].filter(r=>typeof r=="number");if(e.length>0)return Math.min(...e)},Xo=(t,e,r)=>{let n=t.hooks?.init;if(n)for(let s of n)s(e,r)},V=class t{constructor(e,r,n){if(Object.defineProperty(this,"_unixOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_internals",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_merging",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_init",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),b.any([h.string,h.urlInstance,h.object,h.undefined],e),b.any([h.object,h.undefined],r),b.any([h.object,h.undefined],n),e instanceof t||r instanceof t)throw new TypeError("The defaults must be passed as the third argument");this._internals=Vd(n?._internals??n??Gd),this._init=[...n?._init??[]],this._merging=!1,this._unixOptions=void 0;try{if(h.plainObject(e))try{this.merge(e),this.merge(r)}finally{this.url=e.url}else try{this.merge(r)}finally{if(r?.url!==void 0)if(e===void 0)this.url=r.url;else throw new TypeError("The `url` option is mutually exclusive with the `input` argument");else e!==void 0&&(this.url=e)}}catch(s){throw s.options=this,s}}merge(e){if(e){if(e instanceof t){for(let r of e._init)this.merge(r);return}e=Wd(e),Xo(this,e,this),Xo(e,e,this),this._merging=!0,"isStream"in e&&(this.isStream=e.isStream);try{let r=!1;for(let n in e)if(!(n==="mutableDefaults"||n==="handlers")&&n!=="url"){if(!(n in this))throw new Error(`Unexpected option: ${n}`);this[n]=e[n],r=!0}r&&this._init.push(e)}finally{this._merging=!1}}}get request(){return this._internals.request}set request(e){b.any([h.function_,h.undefined],e),this._internals.request=e}get agent(){return this._internals.agent}set agent(e){b.plainObject(e);for(let r in e){if(!(r in this._internals.agent))throw new TypeError(`Unexpected agent option: ${r}`);b.any([h.object,h.undefined],e[r])}this._merging?Object.assign(this._internals.agent,e):this._internals.agent={...e}}get h2session(){return this._internals.h2session}set h2session(e){this._internals.h2session=e}get decompress(){return this._internals.decompress}set decompress(e){b.boolean(e),this._internals.decompress=e}get timeout(){return this._internals.timeout}set timeout(e){b.plainObject(e);for(let r in e){if(!(r in this._internals.timeout))throw new Error(`Unexpected timeout option: ${r}`);b.any([h.number,h.undefined],e[r])}this._merging?Object.assign(this._internals.timeout,e):this._internals.timeout={...e}}get prefixUrl(){return this._internals.prefixUrl}set prefixUrl(e){if(b.any([h.string,h.urlInstance],e),e===""){this._internals.prefixUrl="";return}if(e=e.toString(),e.endsWith("/")||(e+="/"),this._internals.prefixUrl&&this._internals.url){let{href:r}=this._internals.url;this._internals.url.href=e+r.slice(this._internals.prefixUrl.length)}this._internals.prefixUrl=e}get body(){return this._internals.body}set body(e){b.any([h.string,h.buffer,h.nodeStream,h.generator,h.asyncGenerator,qe,h.undefined],e),h.nodeStream(e)&&b.truthy(e.readable),e!==void 0&&(b.undefined(this._internals.form),b.undefined(this._internals.json)),this._internals.body=e}get form(){return this._internals.form}set form(e){b.any([h.plainObject,h.undefined],e),e!==void 0&&(b.undefined(this._internals.body),b.undefined(this._internals.json)),this._internals.form=e}get json(){return this._internals.json}set json(e){e!==void 0&&(b.undefined(this._internals.body),b.undefined(this._internals.form)),this._internals.json=e}get url(){return this._internals.url}set url(e){if(b.any([h.string,h.urlInstance,h.undefined],e),e===void 0){this._internals.url=void 0;return}if(h.string(e)&&e.startsWith("/"))throw new Error("`url` must not start with a slash");let r=`${this.prefixUrl}${e.toString()}`,n=new ne.URL(r);if(this._internals.url=n,n.protocol==="unix:"&&(n.href=`http://unix${n.pathname}${n.search}`),n.protocol!=="http:"&&n.protocol!=="https:"){let s=new Error(`Unsupported protocol: ${n.protocol}`);throw s.code="ERR_UNSUPPORTED_PROTOCOL",s}if(this._internals.username&&(n.username=this._internals.username,this._internals.username=""),this._internals.password&&(n.password=this._internals.password,this._internals.password=""),this._internals.searchParams&&(n.search=this._internals.searchParams.toString(),this._internals.searchParams=void 0),n.hostname==="unix"){if(!this._internals.enableUnixSockets)throw new Error("Using UNIX domain sockets but option `enableUnixSockets` is not enabled");let s=/(?<socketPath>.+?):(?<path>.+)/.exec(`${n.pathname}${n.search}`);if(s?.groups){let{socketPath:i,path:o}=s.groups;this._unixOptions={socketPath:i,path:o,host:""}}else this._unixOptions=void 0;return}this._unixOptions=void 0}get cookieJar(){return this._internals.cookieJar}set cookieJar(e){if(b.any([h.object,h.undefined],e),e===void 0){this._internals.cookieJar=void 0;return}let{setCookie:r,getCookieString:n}=e;b.function_(r),b.function_(n),r.length===4&&n.length===0?(r=(0,xt.promisify)(r.bind(e)),n=(0,xt.promisify)(n.bind(e)),this._internals.cookieJar={setCookie:r,getCookieString:n}):this._internals.cookieJar=e}get signal(){return this._internals.signal}set signal(e){b.object(e),this._internals.signal=e}get ignoreInvalidCookies(){return this._internals.ignoreInvalidCookies}set ignoreInvalidCookies(e){b.boolean(e),this._internals.ignoreInvalidCookies=e}get searchParams(){return this._internals.url?this._internals.url.searchParams:(this._internals.searchParams===void 0&&(this._internals.searchParams=new ne.URLSearchParams),this._internals.searchParams)}set searchParams(e){b.any([h.string,h.object,h.undefined],e);let r=this._internals.url;if(e===void 0){this._internals.searchParams=void 0,r&&(r.search="");return}let n=this.searchParams,s;if(h.string(e))s=new ne.URLSearchParams(e);else if(e instanceof ne.URLSearchParams)s=e;else{Fd(e),s=new ne.URLSearchParams;for(let i in e){let o=e[i];o===null?s.append(i,""):o===void 0?n.delete(i):s.append(i,o)}}if(this._merging){for(let i of s.keys())n.delete(i);for(let[i,o]of s)n.append(i,o)}else r?r.search=n.toString():this._internals.searchParams=n}get searchParameters(){throw new Error("The `searchParameters` option does not exist. Use `searchParams` instead.")}set searchParameters(e){throw new Error("The `searchParameters` option does not exist. Use `searchParams` instead.")}get dnsLookup(){return this._internals.dnsLookup}set dnsLookup(e){b.any([h.function_,h.undefined],e),this._internals.dnsLookup=e}get dnsCache(){return this._internals.dnsCache}set dnsCache(e){b.any([h.object,h.boolean,h.undefined],e),e===!0?this._internals.dnsCache=zd():e===!1?this._internals.dnsCache=void 0:this._internals.dnsCache=e}get context(){return this._internals.context}set context(e){b.object(e),this._merging?Object.assign(this._internals.context,e):this._internals.context={...e}}get hooks(){return this._internals.hooks}set hooks(e){b.object(e);for(let r in e){if(!(r in this._internals.hooks))throw new Error(`Unexpected hook event: ${r}`);let n=r,s=e[n];if(b.any([h.array,h.undefined],s),s)for(let i of s)b.function_(i);if(this._merging)s&&this._internals.hooks[n].push(...s);else{if(!s)throw new Error(`Missing hook event: ${r}`);this._internals.hooks[r]=[...s]}}}get followRedirect(){return this._internals.followRedirect}set followRedirect(e){b.boolean(e),this._internals.followRedirect=e}get followRedirects(){throw new TypeError("The `followRedirects` option does not exist. Use `followRedirect` instead.")}set followRedirects(e){throw new TypeError("The `followRedirects` option does not exist. Use `followRedirect` instead.")}get maxRedirects(){return this._internals.maxRedirects}set maxRedirects(e){b.number(e),this._internals.maxRedirects=e}get cache(){return this._internals.cache}set cache(e){b.any([h.object,h.string,h.boolean,h.undefined],e),e===!0?this._internals.cache=$d:e===!1?this._internals.cache=void 0:this._internals.cache=e}get throwHttpErrors(){return this._internals.throwHttpErrors}set throwHttpErrors(e){b.boolean(e),this._internals.throwHttpErrors=e}get username(){let e=this._internals.url,r=e?e.username:this._internals.username;return decodeURIComponent(r)}set username(e){b.string(e);let r=this._internals.url,n=encodeURIComponent(e);r?r.username=n:this._internals.username=n}get password(){let e=this._internals.url,r=e?e.password:this._internals.password;return decodeURIComponent(r)}set password(e){b.string(e);let r=this._internals.url,n=encodeURIComponent(e);r?r.password=n:this._internals.password=n}get http2(){return this._internals.http2}set http2(e){b.boolean(e),this._internals.http2=e}get allowGetBody(){return this._internals.allowGetBody}set allowGetBody(e){b.boolean(e),this._internals.allowGetBody=e}get headers(){return this._internals.headers}set headers(e){b.plainObject(e),this._merging?Object.assign(this._internals.headers,Ie(e)):this._internals.headers=Ie(e)}get methodRewriting(){return this._internals.methodRewriting}set methodRewriting(e){b.boolean(e),this._internals.methodRewriting=e}get dnsLookupIpVersion(){return this._internals.dnsLookupIpVersion}set dnsLookupIpVersion(e){if(e!==void 0&&e!==4&&e!==6)throw new TypeError(`Invalid DNS lookup IP version: ${e}`);this._internals.dnsLookupIpVersion=e}get parseJson(){return this._internals.parseJson}set parseJson(e){b.function_(e),this._internals.parseJson=e}get stringifyJson(){return this._internals.stringifyJson}set stringifyJson(e){b.function_(e),this._internals.stringifyJson=e}get retry(){return this._internals.retry}set retry(e){if(b.plainObject(e),b.any([h.function_,h.undefined],e.calculateDelay),b.any([h.number,h.undefined],e.maxRetryAfter),b.any([h.number,h.undefined],e.limit),b.any([h.array,h.undefined],e.methods),b.any([h.array,h.undefined],e.statusCodes),b.any([h.array,h.undefined],e.errorCodes),b.any([h.number,h.undefined],e.noise),e.noise&&Math.abs(e.noise)>100)throw new Error(`The maximum acceptable retry noise is +/- 100ms, got ${e.noise}`);for(let n in e)if(!(n in this._internals.retry))throw new Error(`Unexpected retry option: ${n}`);this._merging?Object.assign(this._internals.retry,e):this._internals.retry={...e};let{retry:r}=this._internals;r.methods=[...new Set(r.methods.map(n=>n.toUpperCase()))],r.statusCodes=[...new Set(r.statusCodes)],r.errorCodes=[...new Set(r.errorCodes)]}get localAddress(){return this._internals.localAddress}set localAddress(e){b.any([h.string,h.undefined],e),this._internals.localAddress=e}get method(){return this._internals.method}set method(e){b.string(e),this._internals.method=e.toUpperCase()}get createConnection(){return this._internals.createConnection}set createConnection(e){b.any([h.function_,h.undefined],e),this._internals.createConnection=e}get cacheOptions(){return this._internals.cacheOptions}set cacheOptions(e){b.plainObject(e),b.any([h.boolean,h.undefined],e.shared),b.any([h.number,h.undefined],e.cacheHeuristic),b.any([h.number,h.undefined],e.immutableMinTimeToLive),b.any([h.boolean,h.undefined],e.ignoreCargoCult);for(let r in e)if(!(r in this._internals.cacheOptions))throw new Error(`Cache option \`${r}\` does not exist`);this._merging?Object.assign(this._internals.cacheOptions,e):this._internals.cacheOptions={...e}}get https(){return this._internals.https}set https(e){b.plainObject(e),b.any([h.boolean,h.undefined],e.rejectUnauthorized),b.any([h.function_,h.undefined],e.checkServerIdentity),b.any([h.string,h.object,h.array,h.undefined],e.certificateAuthority),b.any([h.string,h.object,h.array,h.undefined],e.key),b.any([h.string,h.object,h.array,h.undefined],e.certificate),b.any([h.string,h.undefined],e.passphrase),b.any([h.string,h.buffer,h.array,h.undefined],e.pfx),b.any([h.array,h.undefined],e.alpnProtocols),b.any([h.string,h.undefined],e.ciphers),b.any([h.string,h.buffer,h.undefined],e.dhparam),b.any([h.string,h.undefined],e.signatureAlgorithms),b.any([h.string,h.undefined],e.minVersion),b.any([h.string,h.undefined],e.maxVersion),b.any([h.boolean,h.undefined],e.honorCipherOrder),b.any([h.number,h.undefined],e.tlsSessionLifetime),b.any([h.string,h.undefined],e.ecdhCurve),b.any([h.string,h.buffer,h.array,h.undefined],e.certificateRevocationLists);for(let r in e)if(!(r in this._internals.https))throw new Error(`HTTPS option \`${r}\` does not exist`);this._merging?Object.assign(this._internals.https,e):this._internals.https={...e}}get encoding(){return this._internals.encoding}set encoding(e){if(e===null)throw new TypeError("To get a Buffer, set `options.responseType` to `buffer` instead");b.any([h.string,h.undefined],e),this._internals.encoding=e}get resolveBodyOnly(){return this._internals.resolveBodyOnly}set resolveBodyOnly(e){b.boolean(e),this._internals.resolveBodyOnly=e}get isStream(){return this._internals.isStream}set isStream(e){b.boolean(e),this._internals.isStream=e}get responseType(){return this._internals.responseType}set responseType(e){if(e===void 0){this._internals.responseType="text";return}if(e!=="text"&&e!=="buffer"&&e!=="json")throw new Error(`Invalid \`responseType\` option: ${e}`);this._internals.responseType=e}get pagination(){return this._internals.pagination}set pagination(e){b.object(e),this._merging?Object.assign(this._internals.pagination,e):this._internals.pagination=e}get auth(){throw new Error("Parameter `auth` is deprecated. Use `username` / `password` instead.")}set auth(e){throw new Error("Parameter `auth` is deprecated. Use `username` / `password` instead.")}get setHost(){return this._internals.setHost}set setHost(e){b.boolean(e),this._internals.setHost=e}get maxHeaderSize(){return this._internals.maxHeaderSize}set maxHeaderSize(e){b.any([h.number,h.undefined],e),this._internals.maxHeaderSize=e}get enableUnixSockets(){return this._internals.enableUnixSockets}set enableUnixSockets(e){b.boolean(e),this._internals.enableUnixSockets=e}toJSON(){return{...this._internals}}[Symbol.for("nodejs.util.inspect.custom")](e,r){return(0,xt.inspect)(this._internals,r)}createNativeRequestOptions(){let e=this._internals,r=e.url,n;r.protocol==="https:"?n=e.http2?e.agent:e.agent.https:n=e.agent.http;let{https:s}=e,{pfx:i}=s;return h.array(i)&&h.plainObject(i[0])&&(i=i.map(o=>({buf:o.buffer,passphrase:o.passphrase}))),{...e.cacheOptions,...this._unixOptions,ALPNProtocols:s.alpnProtocols,ca:s.certificateAuthority,cert:s.certificate,key:s.key,passphrase:s.passphrase,pfx:s.pfx,rejectUnauthorized:s.rejectUnauthorized,checkServerIdentity:s.checkServerIdentity??ea.checkServerIdentity,ciphers:s.ciphers,honorCipherOrder:s.honorCipherOrder,minVersion:s.minVersion,maxVersion:s.maxVersion,sigalgs:s.signatureAlgorithms,sessionTimeout:s.tlsSessionLifetime,dhparam:s.dhparam,ecdhCurve:s.ecdhCurve,crl:s.certificateRevocationLists,lookup:e.dnsLookup??e.dnsCache?.lookup,family:e.dnsLookupIpVersion,agent:n,setHost:e.setHost,method:e.method,maxHeaderSize:e.maxHeaderSize,localAddress:e.localAddress,headers:e.headers,createConnection:e.createConnection,timeout:e.http2?Yd(e):void 0,h2session:e.h2session}}getRequestFunction(){let e=this._internals.url,{request:r}=this._internals;return!r&&e?this.getFallbackRequestFunction():r}getFallbackRequestFunction(){let e=this._internals.url;if(e){if(e.protocol==="https:"){if(this._internals.http2){if(Qo<15||Qo===15&&Dd<10){let r=new Error("To use the `http2` option, install Node.js 15.10.0 or above");throw r.code="EUNSUPPORTED",r}return na.default.auto}return ra.default.request}return ta.default.request}}freeze(){let e=this._internals;Object.freeze(e),Object.freeze(e.hooks),Object.freeze(e.hooks.afterResponse),Object.freeze(e.hooks.beforeError),Object.freeze(e.hooks.beforeRedirect),Object.freeze(e.hooks.beforeRequest),Object.freeze(e.hooks.beforeRetry),Object.freeze(e.hooks.init),Object.freeze(e.https),Object.freeze(e.cacheOptions),Object.freeze(e.agent),Object.freeze(e.headers),Object.freeze(e.timeout),Object.freeze(e.retry),Object.freeze(e.retry.errorCodes),Object.freeze(e.retry.methods),Object.freeze(e.retry.statusCodes)}};var Me=t=>{let{statusCode:e}=t,r=t.request.options.followRedirect?299:399;return e>=200&&e<=r||e===304},mr=class extends L{constructor(e,r){let{options:n}=r.request;super(`${e.message} in "${n.url.toString()}"`,e,r.request),this.name="ParseError",this.code="ERR_BODY_PARSE_FAILURE"}},$n=(t,e,r,n)=>{let{rawBody:s}=t;try{if(e==="text")return s.toString(n);if(e==="json")return s.length===0?"":r(s.toString(n));if(e==="buffer")return s}catch(i){throw new mr(i,t)}throw new mr({message:`Unknown body type '${e}'`,name:"Error"},t)};function Kd(t){return t.writable&&!t.writableEnded}var sa=Kd;function gr(t){return t.protocol==="unix:"||t.hostname==="unix"}var{buffer:Jd}=aa.default,Qd=h.string(Gn.default.versions.brotli),Xd=new Set(["GET","HEAD"]),zn=new yt,Zd=new Set([300,301,302,303,304,307,308]),ep=["socket","connect","continue","information","upgrade"],yr=()=>{},we=class t extends ia.Duplex{constructor(e,r,n){super({autoDestroy:!1,highWaterMark:0}),Object.defineProperty(this,"constructor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_noPipe",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"response",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"requestUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"redirectUrls",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"retryCount",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_stopRetry",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_downloadedSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_uploadedSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_stopReading",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_pipedServerResponses",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_responseSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_bodySize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_unproxyEvents",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isFromCache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_cannotHaveBody",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_triggerRead",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_cancelTimeouts",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_removeListeners",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_nativeResponse",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_flushed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_aborted",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_requestInitialized",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._downloadedSize=0,this._uploadedSize=0,this._stopReading=!1,this._pipedServerResponses=new Set,this._cannotHaveBody=!1,this._unproxyEvents=yr,this._triggerRead=!1,this._cancelTimeouts=yr,this._removeListeners=yr,this._jobs=[],this._flushed=!1,this._requestInitialized=!1,this._aborted=!1,this.redirectUrls=[],this.retryCount=0,this._stopRetry=yr,this.on("pipe",i=>{i?.headers&&Object.assign(this.options.headers,i.headers)}),this.on("newListener",i=>{if(i==="retry"&&this.listenerCount("retry")>0)throw new Error("A retry listener has been attached already.")});try{if(this.options=new V(e,r,n),!this.options.url){if(this.options.prefixUrl==="")throw new TypeError("Missing `url` property");this.options.url=""}this.requestUrl=this.options.url}catch(i){let{options:o}=i;o&&(this.options=o),this.flush=async()=>{this.flush=async()=>{},this.destroy(i)};return}let{body:s}=this.options;if(h.nodeStream(s)&&s.once("error",i=>{this._flushed?this._beforeError(new nt(i,this)):this.flush=async()=>{this.flush=async()=>{},this._beforeError(new nt(i,this))}}),this.options.signal){let i=()=>{this.destroy(new Jt(this))};this.options.signal.aborted?i():(this.options.signal.addEventListener("abort",i),this._removeListeners=()=>{this.options.signal.removeEventListener("abort",i)})}}async flush(){if(!this._flushed){this._flushed=!0;try{if(await this._finalizeBody(),this.destroyed)return;if(await this._makeRequest(),this.destroyed){this._request?.destroy();return}for(let e of this._jobs)e();this._jobs.length=0,this._requestInitialized=!0}catch(e){this._beforeError(e)}}}_beforeError(e){if(this._stopReading)return;let{response:r,options:n}=this,s=this.retryCount+(e.name==="RetryError"?0:1);this._stopReading=!0,e instanceof L||(e=new L(e.message,e,this));let i=e;(async()=>{if(r?.readable&&!r.rawBody&&!this._request?.socket?.destroyed&&(r.setEncoding(this.readableEncoding),await this._setRawBody(r)&&(r.body=r.rawBody.toString())),this.listenerCount("retry")!==0){let o;try{let a;r&&"retry-after"in r.headers&&(a=Number(r.headers["retry-after"]),Number.isNaN(a)?(a=Date.parse(r.headers["retry-after"])-Date.now(),a<=0&&(a=1)):a*=1e3);let c=n.retry;o=await c.calculateDelay({attemptCount:s,retryOptions:c,error:i,retryAfter:a,computedValue:Di({attemptCount:s,retryOptions:c,error:i,retryAfter:a,computedValue:c.maxRetryAfter??n.timeout.request??Number.POSITIVE_INFINITY})})}catch(a){this._error(new L(a.message,a,this));return}if(o){if(await new Promise(a=>{let c=setTimeout(a,o);this._stopRetry=()=>{clearTimeout(c),a()}}),this.destroyed)return;try{for(let a of this.options.hooks.beforeRetry)await a(i,this.retryCount+1)}catch(a){this._error(new L(a.message,e,this));return}if(this.destroyed)return;this.destroy(),this.emit("retry",this.retryCount+1,e,a=>{let c=new t(n.url,a,n);return c.retryCount=this.retryCount+1,Gn.default.nextTick(()=>{c.flush()}),c});return}}this._error(i)})()}_read(){this._triggerRead=!0;let{response:e}=this;if(e&&!this._stopReading){e.readableLength&&(this._triggerRead=!1);let r;for(;(r=e.read())!==null;){this._downloadedSize+=r.length;let n=this.downloadProgress;n.percent<1&&this.emit("downloadProgress",n),this.push(r)}}}_write(e,r,n){let s=()=>{this._writeRequest(e,r,n)};this._requestInitialized?s():this._jobs.push(s)}_final(e){let r=()=>{if(!this._request||this._request.destroyed){e();return}this._request.end(n=>{this._request._writableState?.errored||(n||(this._bodySize=this._uploadedSize,this.emit("uploadProgress",this.uploadProgress),this._request.emit("upload-complete")),e(n))})};this._requestInitialized?r():this._jobs.push(r)}_destroy(e,r){if(this._stopReading=!0,this.flush=async()=>{},this._stopRetry(),this._cancelTimeouts(),this._removeListeners(),this.options){let{body:n}=this.options;h.nodeStream(n)&&n.destroy()}this._request&&this._request.destroy(),e!==null&&!h.undefined(e)&&!(e instanceof L)&&(e=new L(e.message,e,this)),r(e)}pipe(e,r){return e instanceof Tt.ServerResponse&&this._pipedServerResponses.add(e),super.pipe(e,r)}unpipe(e){return e instanceof Tt.ServerResponse&&this._pipedServerResponses.delete(e),super.unpipe(e),this}async _finalizeBody(){let{options:e}=this,{headers:r}=e,n=!h.undefined(e.form),s=!h.undefined(e.json),i=!h.undefined(e.body),o=Xd.has(e.method)&&!(e.method==="GET"&&e.allowGetBody);if(this._cannotHaveBody=o,n||s||i){if(o)throw new TypeError(`The \`${e.method}\` method cannot be used with a body`);let a=!h.string(r["content-type"]);if(i){if(qe(e.body)){let l=new ir(e.body);a&&(r["content-type"]=l.headers["Content-Type"]),"Content-Length"in l.headers&&(r["content-length"]=l.headers["Content-Length"]),e.body=l.encode()}pt(e.body)&&a&&(r["content-type"]=`multipart/form-data; boundary=${e.body.getBoundary()}`)}else if(n){a&&(r["content-type"]="application/x-www-form-urlencoded");let{form:l}=e;e.form=void 0,e.body=new br.URLSearchParams(l).toString()}else{a&&(r["content-type"]="application/json");let{json:l}=e;e.json=void 0,e.body=e.stringifyJson(l)}let c=await pn(e.body,e.headers);h.undefined(r["content-length"])&&h.undefined(r["transfer-encoding"])&&!o&&!h.undefined(c)&&(r["content-length"]=String(c))}e.responseType==="json"&&!("accept"in e.headers)&&(e.headers.accept="application/json"),this._bodySize=Number(r["content-length"])||void 0}async _onResponseBase(e){if(this.isAborted)return;let{options:r}=this,{url:n}=r;this._nativeResponse=e,r.decompress&&(e=(0,oa.default)(e));let s=e.statusCode,i=e;i.statusMessage=i.statusMessage??Tt.default.STATUS_CODES[s],i.url=r.url.toString(),i.requestUrl=this.requestUrl,i.redirectUrls=this.redirectUrls,i.request=this,i.isFromCache=this._nativeResponse.fromCache??!1,i.ip=this.ip,i.retryCount=this.retryCount,i.ok=Me(i),this._isFromCache=i.isFromCache,this._responseSize=Number(e.headers["content-length"])||void 0,this.response=i,e.once("end",()=>{this._responseSize=this._downloadedSize,this.emit("downloadProgress",this.downloadProgress)}),e.once("error",a=>{this._aborted=!0,e.destroy(),this._beforeError(new st(a,this))}),e.once("aborted",()=>{this._aborted=!0,this._beforeError(new st({name:"Error",message:"The server aborted pending request",code:"ECONNRESET"},this))}),this.emit("downloadProgress",this.downloadProgress);let o=e.headers["set-cookie"];if(h.object(r.cookieJar)&&o){let a=o.map(async c=>r.cookieJar.setCookie(c,n.toString()));r.ignoreInvalidCookies&&(a=a.map(async c=>{try{await c}catch{}}));try{await Promise.all(a)}catch(c){this._beforeError(c);return}}if(!this.isAborted){if(r.followRedirect&&e.headers.location&&Zd.has(s)){if(e.resume(),this._cancelTimeouts(),this._unproxyEvents(),this.redirectUrls.length>=r.maxRedirects){this._beforeError(new Vt(this));return}this._request=void 0;let a=new V(void 0,void 0,this.options),c=s===303&&a.method!=="GET"&&a.method!=="HEAD",l=s!==307&&s!==308,f=a.methodRewriting&&l;(c||f)&&(a.method="GET",a.body=void 0,a.json=void 0,a.form=void 0,delete a.headers["content-length"]);try{let m=_r.Buffer.from(e.headers.location,"binary").toString(),p=new br.URL(m,n);if(!gr(n)&&gr(p)){this._beforeError(new L("Cannot redirect to UNIX socket",{},this));return}p.hostname!==n.hostname||p.port!==n.port?("host"in a.headers&&delete a.headers.host,"cookie"in a.headers&&delete a.headers.cookie,"authorization"in a.headers&&delete a.headers.authorization,(a.username||a.password)&&(a.username="",a.password="")):(p.username=a.username,p.password=a.password),this.redirectUrls.push(p),a.prefixUrl="",a.url=p;for(let y of a.hooks.beforeRedirect)await y(a,i);this.emit("redirect",a,i),this.options=a,await this._makeRequest()}catch(m){this._beforeError(m);return}return}if(r.isStream&&r.throwHttpErrors&&!Me(i)){this._beforeError(new ie(i));return}if(e.on("readable",()=>{this._triggerRead&&this._read()}),this.on("resume",()=>{e.resume()}),this.on("pause",()=>{e.pause()}),e.once("end",()=>{this.push(null)}),this._noPipe){await this._setRawBody()&&this.emit("response",e);return}this.emit("response",e);for(let a of this._pipedServerResponses)if(!a.headersSent){for(let c in e.headers){let l=r.decompress?c!=="content-encoding":!0,f=e.headers[c];l&&a.setHeader(c,f)}a.statusCode=s}}}async _setRawBody(e=this){if(e.readableEnded)return!1;try{let r=await Jd(e);if(!this.isAborted)return this.response.rawBody=r,!0}catch{}return!1}async _onResponse(e){try{await this._onResponseBase(e)}catch(r){this._beforeError(r)}}_onRequest(e){let{options:r}=this,{timeout:n,url:s}=r;hi(e),this.options.http2&&e.setTimeout(0),this._cancelTimeouts=gn(e,n,s);let i=r.cache?"cacheableResponse":"response";e.once(i,o=>{this._onResponse(o)}),e.once("error",o=>{this._aborted=!0,e.destroy(),o=o instanceof gt?new Yt(o,this.timings,this):new L(o.message,o,this),this._beforeError(o)}),this._unproxyEvents=mt(e,this,ep),this._request=e,this.emit("uploadProgress",this.uploadProgress),this._sendBody(),this.emit("request",e)}async _asyncWrite(e){return new Promise((r,n)=>{super.write(e,s=>{if(s){n(s);return}r()})})}_sendBody(){let{body:e}=this.options,r=this.redirectUrls.length===0?this:this._request??this;h.nodeStream(e)?e.pipe(r):h.generator(e)||h.asyncGenerator(e)?(async()=>{try{for await(let n of e)await this._asyncWrite(n);super.end()}catch(n){this._beforeError(n)}})():h.undefined(e)?(this._cannotHaveBody||this._noPipe)&&r.end():(this._writeRequest(e,void 0,()=>{}),r.end())}_prepareCache(e){if(!zn.has(e)){let r=new Ri((n,s)=>{let i=n._request(n,s);return h.promise(i)&&(i.once=(o,a)=>{if(o==="error")(async()=>{try{await i}catch(c){a(c)}})();else if(o==="abort")(async()=>{try{(await i).once("abort",a)}catch{}})();else throw new Error(`Unknown HTTP2 promise event: ${o}`);return i}),i},e);zn.set(e,r.request())}}async _createCacheableRequest(e,r){return new Promise((n,s)=>{Object.assign(r,yn(e));let i,o=zn.get(r.cache)(r,async a=>{if(a._readableState.autoDestroy=!1,i){let c=()=>{a.req&&(a.complete=a.req.res.complete)};a.prependOnceListener("end",c),c(),(await i).emit("cacheableResponse",a)}n(a)});o.once("error",s),o.once("request",async a=>{i=a,n(i)})})}async _makeRequest(){let{options:e}=this,{headers:r,username:n,password:s}=e,i=e.cookieJar;for(let l in r)if(h.undefined(r[l]))delete r[l];else if(h.null_(r[l]))throw new TypeError(`Use \`undefined\` instead of \`null\` to delete the \`${l}\` header`);if(e.decompress&&h.undefined(r["accept-encoding"])&&(r["accept-encoding"]=Qd?"gzip, deflate, br":"gzip, deflate"),n||s){let l=_r.Buffer.from(`${n}:${s}`).toString("base64");r.authorization=`Basic ${l}`}if(i){let l=await i.getCookieString(e.url.toString());h.nonEmptyString(l)&&(r.cookie=l)}e.prefixUrl="";let o;for(let l of e.hooks.beforeRequest){let f=await l(e);if(!h.undefined(f)){o=()=>f;break}}o||(o=e.getRequestFunction());let a=e.url;this._requestOptions=e.createNativeRequestOptions(),e.cache&&(this._requestOptions._request=o,this._requestOptions.cache=e.cache,this._requestOptions.body=e.body,this._prepareCache(e.cache));let c=e.cache?this._createCacheableRequest:o;try{let l=c(a,this._requestOptions);h.promise(l)&&(l=await l),h.undefined(l)&&(l=e.getFallbackRequestFunction()(a,this._requestOptions),h.promise(l)&&(l=await l)),sa(l)?this._onRequest(l):this.writable?(this.once("finish",()=>{this._onResponse(l)}),this._sendBody()):this._onResponse(l)}catch(l){throw l instanceof re?new Wt(l,this):l}}async _error(e){try{if(!(e instanceof ie&&!this.options.throwHttpErrors))for(let r of this.options.hooks.beforeError)e=await r(e)}catch(r){e=new L(r.message,r,this)}this.destroy(e)}_writeRequest(e,r,n){!this._request||this._request.destroyed||this._request.write(e,r,s=>{if(!s&&!this._request.destroyed){this._uploadedSize+=_r.Buffer.byteLength(e,r);let i=this.uploadProgress;i.percent<1&&this.emit("uploadProgress",i)}n(s)})}get ip(){return this.socket?.remoteAddress}get isAborted(){return this._aborted}get socket(){return this._request?.socket??void 0}get downloadProgress(){let e;return this._responseSize?e=this._downloadedSize/this._responseSize:this._responseSize===this._downloadedSize?e=1:e=0,{percent:e,transferred:this._downloadedSize,total:this._responseSize}}get uploadProgress(){let e;return this._bodySize?e=this._uploadedSize/this._bodySize:this._bodySize===this._uploadedSize?e=1:e=0,{percent:e,transferred:this._uploadedSize,total:this._bodySize}}get timings(){return this._request?.timings}get isFromCache(){return this._isFromCache}get reusedSocket(){return this._request?.reusedSocket}};var wr=class extends L{constructor(e){super("Promise was canceled",{},e),this.name="CancelError",this.code="ERR_CANCELED"}get isCanceled(){return!0}};var tp=["request","response","redirect","uploadProgress","downloadProgress"];function Er(t){let e,r,n,s=new ca.EventEmitter,i=new Oe((a,c,l)=>{l(()=>{e.destroy()}),l.shouldReject=!1,l(()=>{c(new wr(e))});let f=m=>{l(()=>{});let p=t??new we(void 0,void 0,n);p.retryCount=m,p._noPipe=!0,e=p,p.once("response",async d=>{let C=(d.headers["content-encoding"]??"").toLowerCase(),w=C==="gzip"||C==="deflate"||C==="br",{options:T}=p;if(w&&!T.decompress)d.body=d.rawBody;else try{d.body=$n(d,T.responseType,T.parseJson,T.encoding)}catch(S){if(d.body=d.rawBody.toString(),Me(d)){p._beforeError(S);return}}try{let S=T.hooks.afterResponse;for(let[x,R]of S.entries())if(d=await R(d,async k=>{throw T.merge(k),T.prefixUrl="",k.url&&(T.url=k.url),T.hooks.afterResponse=T.hooks.afterResponse.slice(0,x),new Kt(p)}),!(h.object(d)&&h.number(d.statusCode)&&!h.nullOrUndefined(d.body)))throw new TypeError("The `afterResponse` hook returned an invalid value")}catch(S){p._beforeError(S);return}if(r=d,!Me(d)){p._beforeError(new ie(d));return}p.destroy(),a(p.options.resolveBodyOnly?d.body:d)});let y=d=>{if(i.isCanceled)return;let{options:C}=p;if(d instanceof ie&&!C.throwHttpErrors){let{response:w}=d;p.destroy(),a(p.options.resolveBodyOnly?w.body:w);return}c(d)};p.once("error",y);let _=p.options?.body;p.once("retry",(d,C)=>{t=void 0;let w=p.options.body;if(_===w&&h.nodeStream(w)){C.message="Cannot retry with consumed body stream",y(C);return}n=p.options,f(d)}),mt(p,s,tp),h.undefined(t)&&p.flush()};f(0)});i.on=(a,c)=>(s.on(a,c),i),i.off=(a,c)=>(s.off(a,c),i);let o=a=>{let c=(async()=>{await i;let{options:l}=r.request;return $n(r,a,l.parseJson,l.encoding)})();return Object.defineProperties(c,Object.getOwnPropertyDescriptors(i)),c};return i.json=()=>{if(e.options){let{headers:a}=e.options;!e.writableFinished&&!("accept"in a)&&(a.accept="application/json")}return o("json")},i.buffer=()=>o("buffer"),i.text=()=>o("text"),i}var rp=async t=>new Promise(e=>{setTimeout(e,t)}),np=t=>h.function_(t),sp=["get","post","put","patch","head","delete"],ua=t=>{t={options:new V(void 0,void 0,t.options),handlers:[...t.handlers],mutableDefaults:t.mutableDefaults},Object.defineProperty(t,"mutableDefaults",{enumerable:!0,configurable:!1,writable:!1});let e=(n,s,i=t.options)=>{let o=new we(n,s,i),a,c=m=>(o.options=m,o._noPipe=!m.isStream,o.flush(),m.isStream?o:(a||(a=Er(o)),a)),l=0,f=m=>{let y=(t.handlers[l++]??c)(m,f);if(h.promise(y)&&!o.options.isStream&&(a||(a=Er(o)),y!==a)){let _=Object.getOwnPropertyDescriptors(a);for(let d in _)d in y&&delete _[d];Object.defineProperties(y,_),y.cancel=a.cancel}return y};return f(o.options)};e.extend=(...n)=>{let s=new V(void 0,void 0,t.options),i=[...t.handlers],o;for(let a of n)np(a)?(s.merge(a.defaults.options),i.push(...a.defaults.handlers),o=a.defaults.mutableDefaults):(s.merge(a),a.handlers&&i.push(...a.handlers),o=a.mutableDefaults);return ua({options:s,handlers:i,mutableDefaults:!!o})};let r=async function*(n,s){let i=new V(n,s,t.options);i.resolveBodyOnly=!1;let{pagination:o}=i;b.function_(o.transform),b.function_(o.shouldContinue),b.function_(o.filter),b.function_(o.paginate),b.number(o.countLimit),b.number(o.requestLimit),b.number(o.backoff);let a=[],{countLimit:c}=o,l=0;for(;l<o.requestLimit;){l!==0&&await rp(o.backoff);let f=await e(void 0,void 0,i),m=await o.transform(f),p=[];b.array(m);for(let _ of m)if(o.filter({item:_,currentItems:p,allItems:a})&&(!o.shouldContinue({item:_,currentItems:p,allItems:a})||(yield _,o.stackAllItems&&a.push(_),p.push(_),--c<=0)))return;let y=o.paginate({response:f,currentItems:p,allItems:a});if(y===!1)return;y===f.request.options?i=f.request.options:(i.merge(y),b.any([h.urlInstance,h.undefined],y.url),y.url!==void 0&&(i.prefixUrl="",i.url=y.url)),l++}};e.paginate=r,e.paginate.all=async(n,s)=>{let i=[];for await(let o of r(n,s))i.push(o);return i},e.paginate.each=r,e.stream=(n,s)=>e(n,{...s,isStream:!0});for(let n of sp)e[n]=(s,i)=>e(s,{...i,method:n}),e.stream[n]=(s,i)=>e(s,{...i,method:n,isStream:!0});return t.mutableDefaults||(Object.freeze(t.handlers),t.options.freeze()),Object.defineProperty(e,"defaults",{value:t,writable:!1,configurable:!1,enumerable:!0}),e},la=ua;var ip={options:new V,handlers:[],mutableDefaults:!1},op=la(ip),ha=op;var ap=require("@raycast/api");var Vn="https://passport.bilibili.com",Q="https://api.bilibili.com",W={gennerateQRCode:()=>`${Vn}/x/passport-login/web/qrcode/generate`,checkQRCodeStatus:()=>`${Vn}/x/passport-login/web/qrcode/poll`,logout:()=>`${Vn}/login/exit/v2`,dynamicFeedAll:(t,e)=>`${Q}/x/polymer/web-dynamic/v1/feed/all?timezone_offset=${e}&type=all&page=${t}`,popularVideos:(t,e)=>`${Q}/x/web-interface/popular?pn=${t}&ps=${e}`,rcmdVideos:(t,e,r,n)=>`${Q}/x/web-interface/index/top/feed/rcmd?y_num=5&fresh_type=4&feed_version=V9&fetch_row=${e}&fresh_idx=${r}&fresh_idx_1h=${t}&brush=${n}&homepage_ver=1&ps=20`,popularSeriesList:()=>`${Q}/x/web-interface/popular/series/list`,popularSeriesVideos:t=>`${Q}/x/web-interface/popular/series/one?number=${t}`,videoInfo:t=>`${Q}/x/web-interface/view?aid=${t}`,playUrl:(t,e)=>`${Q}/x/player/playurl?bvid=${t}&cid=${e}&qn=112&fnval=0&fnver=0&fourk=1`,bvidGetCid:t=>`${Q}/x/player/pagelist?bvid=${t}`,conclusion:()=>`${Q}/x/web-interface/view/conclusion/get`,heartbeat:()=>`${Q}/x/click-interface/web/heartbeat`,searchVideos:()=>`${Q}/x/web-interface/search/all/v2`};var cp=require("@raycast/api");var up=require("@raycast/api");var fa=require("@raycast/api");function da(){let t=new fa.Cache,e=new Date().getTime();return t.has("cookie")&&new Date(t.get("expires")||e).getTime()>e}var lp=require("@raycast/api");var hp=require("@raycast/api");var fp=require("@raycast/api");var dp=require("@raycast/api");var pa=require("@raycast/api");async function ma(){let e=new pa.Cache().get("cookie")||"{}",r=await ha(W.dynamicFeedAll(1,-480),{headers:{cookie:e}}).json();if(r.code!==0)throw new Error(r.message);return r.data.items}var Og=N(Ru());var Ig=require("@raycast/api");var uh=require("child_process");var ah=N(require("node:process"),1),ch=N(oh(),1);async function ti(t,{humanReadableOutput:e=!0}={}){if(ah.default.platform!=="darwin")throw new Error("macOS only");let r=e?[]:["-ss"],{stdout:n}=await(0,ch.default)("osascript",["-e",t,r]);return n}var Ft=require("@raycast/api"),ri=(0,Ft.getPreferenceValues)();function Yr(t,e,r,n){if(ri.justNotifyVideos&&e!=="DYNAMIC_TYPE_AV")return;if(!ri.terminalNotifierPath){ti(`display notification "${r}" with title "${t} - Bilibili"`);return}let{status:s}=(0,uh.spawnSync)(ri.terminalNotifierPath,["-title",`${t} - Bilibili`,"-subtitle",r,"-open",Gt(n),"-sound","default"]);s&&ti(`display notification "${r}" with title "${t} - Bilibili"`)}function b_(t){switch(t.type){case"DYNAMIC_TYPE_AV":Yr(t.modules.module_author.name,t.type,t.modules.module_dynamic.major.archive.title,t.modules.module_dynamic.major.archive.jump_url);break;case"DYNAMIC_TYPE_FORWARD":case"DYNAMIC_TYPE_WORD":case"DYNAMIC_TYPE_DRAW":Yr(t.modules.module_author.name,t.type,t.modules.module_dynamic.desc.text,`https://www.bilibili.com/opus/${t.id_str}`);break;case"DYNAMIC_TYPE_MUSIC":Yr(t.modules.module_author.name,t.type,t.modules.module_dynamic.major.music.title,Gt(t.modules.module_dynamic.major.music.jump_url));break;case"DYNAMIC_TYPE_LIVE_RCMD":let e=JSON.parse(t.modules.module_dynamic.major.live_rcmd.content);Yr(t.modules.module_author.name,t.type,e.live_play_info.title,Gt(e.live_play_info.link));break}}function w_(t){return new Promise(e=>setTimeout(e,t))}async function lh(){if(!da())return;console.log("running");let t=await ma(),e=t.map(n=>n.id_str),r=JSON.parse(await Ft.LocalStorage.getItem("notifications")||"[]");if(r.length!==0){let n=r.map(i=>e.findIndex(o=>o===i)).filter(i=>i>=0)[0],s=e.slice(0,n);for(let i of s)t.map(async o=>{o.id_str===i&&(b_(o),await w_(500))})}await Ft.LocalStorage.setItem("notifications",JSON.stringify(e))}
